/**
 * almond 0.0.3 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */

/**
		 * Copyright 2012, Digital Fusion
		 * Licensed under the MIT license.
		 * http://teamdf.com/jquery-plugins/license/
		 *
		 * @author Sam Sehnert
		 * @desc A small plugin that checks whether elements are within
		 *       the user visible viewport of a web browser.
		 *       can accounts for vertical position, horizontal, or both
		 */

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*! jQuery UI - v1.11.4 - 2015-09-08
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, draggable.js, droppable.js, resizable.js, sortable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

/* Web Font Loader v1.6.16 - (c) Adobe Systems, Google. License: Apache 2.0 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * JavaScript Cookie v2.0.4
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */

/*!
 * jsUri
 * https://github.com/derek-watson/jsUri
 *
 * Copyright 2013, Derek Watson
 * Released under the MIT license.
 *
 * Includes parseUri regular expressions
 * http://blog.stevenlevithan.com/archives/parseuri
 * Copyright 2007, Steven Levithan
 * Released under the MIT license.
 */

/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */

/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

(function(w){var IEVersion=-1;if(w.navigator.appName=="Microsoft Internet Explorer"){var ua=w.navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");re.exec(ua)!=null&&(IEVersion=parseFloat(RegExp.$1))}if(IEVersion<=9&&IEVersion!=-1)return!1;try{w.glzOldDefine=w.define,delete w.define}catch(er){}var requirejs,require,define;(function(e){function o(e,t){if(e&&e.charAt(0)==="."&&t){t=t.split("/"),t=t.slice(0,t.length-1),e=t.concat(e.split("/"));var n,r;for(n=0;r=e[n];n++)if(r===".")e.splice(n,1),n-=1;else if(r===".."){if(n===1&&(e[2]===".."||e[0]===".."))break;n>0&&(e.splice(n-1,2),n-=2)}e=e.join("/")}return e}function u(t,n){return function(){return s.apply(e,r.call(arguments,0).concat([t,n]))}}function a(e){return function(t){return o(t,e)}}function f(e){return function(n){t[e]=n}}function l(r){if(n.hasOwnProperty(r)){var s=n[r];delete n[r],i.apply(e,s)}return t[r]}function c(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=o(e.slice(0,i),t),e=e.slice(i+1),r=l(n),r&&r.normalize?e=r.normalize(e,a(t)):e=o(e,t)):e=o(e,t),{f:n?n+"!"+e:e,n:e,p:r}}var t={},n={},r=[].slice,i,s;if(typeof define=="function")return;i=function(r,i,s,o){var a=[],h,p,d,v,m,g;o||(o=r);if(typeof s=="function"){!i.length&&s.length&&(i=["require","exports","module"]);for(v=0;v<i.length;v++){g=c(i[v],o),d=g.f;if(d==="require")a[v]=u(r);else if(d==="exports")a[v]=t[r]={},h=!0;else if(d==="module")p=a[v]={id:r,uri:"",exports:t[r]};else if(t.hasOwnProperty(d)||n.hasOwnProperty(d))a[v]=l(d);else{if(!g.p)throw r+" missing "+d;g.p.load(g.n,u(o,!0),f(d),{}),a[v]=t[d]}}m=s.apply(t[r],a),r&&(p&&p.exports!==e?t[r]=p.exports:h||(t[r]=m))}else r&&(t[r]=s)},requirejs=s=function(t,n,r,o){return typeof t=="string"?l(c(t,n).f):(t.splice||(n.splice?(t=n,n=arguments[2]):t=[]),o?i(e,t,n,r):setTimeout(function(){i(e,t,n,r)},15),s)},s.config=function(){return s},require||(require=s),define=function(e,t,r){t.splice||(r=t,t=[]),define.unordered?n[e]=[e,t,r]:i(e,t,r)},define.amd={jQuery:!0}})(),define("../lib/almond",function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function y(e,t,n){var r,i,s=(n=n||m).createElement("script");if(s.text=e,t)for(r in g)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[f.call(e)]||"object":typeof e}function S(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!d(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function A(e,t,n){return d(t)?E.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?E.grep(e,function(e){return e===t!==n}):"string"!=typeof t?E.grep(e,function(e){return-1<u.call(t,e)!==n}):E.filter(t,e,n)}function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}function B(e){return e}function j(e){throw e}function F(e,t,n,r){var i;try{e&&d(i=e.promise)?i.call(e).done(t).fail(n):e&&d(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function R(){m.removeEventListener("DOMContentLoaded",R),e.removeEventListener("load",R),E.ready()}function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(W,X)}function J(){this.expando=E.expando+J.uid++}function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Y,"-$&").toLowerCase(),"string"==typeof (n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:G.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}function ut(e,t,n,r){var i,s,o=20,u=r?function(){return r.cur()}:function(){return E.css(e,t,"")},a=u(),f=n&&n[3]||(E.cssNumber[t]?"":"px"),l=e.nodeType&&(E.cssNumber[t]||"px"!==f&&+a)&&tt.exec(E.css(e,t));if(l&&l[3]!==f){a/=2,f=f||l[3],l=+a||1;while(o--)E.style(e,t,l+f),(1-s)*(1-(s=u()/a||.5))<=0&&(o=0),l/=s;l*=2,E.style(e,t,l+f),n=n||[]}return n&&(l=+l||+a||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=f,r.start=l,r.end=i)),i}function ft(e,t){for(var n,r,i,s,o,u,a,f=[],l=0,c=e.length;l<c;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(f[l]=K.get(r,"display")||null,f[l]||(r.style.display="")),""===r.style.display&&ot(r)&&(f[l]=(a=o=s=void 0,o=(i=r).ownerDocument,u=i.nodeName,(a=at[u])||(s=o.body.appendChild(o.createElement(u)),a=E.css(s,"display"),s.parentNode.removeChild(s),"none"===a&&(a="block"),at[u]=a)))):"none"!==n&&(f[l]="none",K.set(r,"display",n)));for(l=0;l<c;l++)null!=f[l]&&(e[l].style.display=f[l]);return e}function mt(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?E.merge([e],n):n}function gt(e,t){for(var n=0,r=e.length;n<r;n++)K.set(e[n],"globalEval",!t||K.get(t[n],"globalEval"))}function bt(e,t,n,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;p<d;p++)if((s=e[p])||0===s)if("object"===b(s))E.merge(h,s.nodeType?[s]:s);else if(yt.test(s)){o=o||c.appendChild(t.createElement("div")),u=(pt.exec(s)||["",""])[1].toLowerCase(),a=vt[u]||vt._default,o.innerHTML=a[1]+E.htmlPrefilter(s)+a[2],l=a[0];while(l--)o=o.lastChild;E.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if(r&&-1<E.inArray(s,r))i&&i.push(s);else if(f=it(s),o=mt(c.appendChild(s),"script"),f&&gt(o),n){l=0;while(s=o[l++])dt.test(s.type||"")&&n.push(s)}return c}function xt(){return!0}function Tt(){return!1}function Nt(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function Ct(e,t,n,r,i,s){var o,u;if("object"==typeof t){for(u in"string"!=typeof n&&(r=r||n,n=void 0),t)Ct(e,u,n,r,t[u],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Tt;else if(!i)return e;return 1===s&&(o=i,(i=function(e){return E().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=E.guid++)),e.each(function(){E.event.add(this,t,i,r,n)})}function kt(e,t,n){n?(K.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var r,s,o=K.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=i.call(arguments),K.set(this,t,o),r=n(this,t),this[t](),o!==(s=K.get(this,t))||r?K.set(this,t,!1):s={},o!==s)return e.stopImmediatePropagation(),e.preventDefault(),s.value}else o.length&&(K.set(this,t,{value:E.event.trigger(E.extend(o[0],E.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&E.event.add(e,t,xt)}function Mt(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function _t(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Dt(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pt(e,t){var n,r,i,s,o,u;if(1===t.nodeType){if(K.hasData(e)&&(u=K.get(e).events))for(i in K.remove(t,"handle events"),u)for(n=0,r=u[i].length;n<r;n++)E.event.add(t,i,u[i][n]);Q.hasData(e)&&(s=Q.access(e),o=E.extend({},s),Q.set(t,o))}}function Ht(e,t,n,r){t=s(t);var i,o,u,a,f,l,c=0,h=e.length,v=h-1,m=t[0],g=d(m);if(g||1<h&&"string"==typeof m&&!p.checkClone&&At.test(m))return e.each(function(i){var s=e.eq(i);g&&(t[0]=m.call(this,i,s.html())),Ht(s,t,n,r)});if(h&&(o=(i=bt(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(u=E.map(mt(i,"script"),_t)).length;c<h;c++)f=i,c!==v&&(f=E.clone(f,!0,!0),a&&E.merge(u,mt(f,"script"))),n.call(e[c],f,c);if(a)for(l=u[u.length-1].ownerDocument,E.map(u,Dt),c=0;c<a;c++)f=u[c],dt.test(f.type||"")&&!K.access(f,"globalEval")&&E.contains(l,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?E._evalUrl&&!f.noModule&&E._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},l):y(f.textContent.replace(Ot,""),f,l))}return e}function Bt(e,t,n){for(var r,i=t?E.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||E.cleanData(mt(r)),r.parentNode&&(n&&it(r)&&gt(mt(r,"script")),r.parentNode.removeChild(r));return e}function Rt(e,t,n){var r,i,s,o,u=e.style;return(n=n||Ft(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||it(e)||(o=E.style(e,t)),!p.pixelBoxStyles()&&jt.test(o)&&qt.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),void 0!==o?o+"":o}function Ut(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Vt(e){var t=E.cssProps[e]||Xt[e];return t||(e in Wt?e:Xt[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=zt.length;while(n--)if((e=zt[n]+t)in Wt)return e}(e)||e)}function Gt(e,t,n){var r=tt.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Yt(e,t,n,r,i,s){var o="width"===t?1:0,u=0,a=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(a+=E.css(e,n+nt[o],!0,i)),r?("content"===n&&(a-=E.css(e,"padding"+nt[o],!0,i)),"margin"!==n&&(a-=E.css(e,"border"+nt[o]+"Width",!0,i))):(a+=E.css(e,"padding"+nt[o],!0,i),"padding"!==n?a+=E.css(e,"border"+nt[o]+"Width",!0,i):u+=E.css(e,"border"+nt[o]+"Width",!0,i));return!r&&0<=s&&(a+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-a-u-.5))||0),a}function Zt(e,t,n){var r=Ft(e),i=(!p.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,r),s=i,o=Rt(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(jt.test(o)){if(!n)return o;o="auto"}return(!p.boxSizingReliable()&&i||!p.reliableTrDimensions()&&k(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===E.css(e,"boxSizing",!1,r),(s=u in e)&&(o=e[u])),(o=parseFloat(o)||0)+Yt(e,t,n||(i?"border":"content"),s,r,o)+"px"}function en(e,t,n,r,i){return new en.prototype.init(e,t,n,r,i)}function an(){nn&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(an):e.setTimeout(an,E.fx.interval),E.fx.tick())}function fn(){return e.setTimeout(function(){tn=void 0}),tn=Date.now()}function ln(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=nt[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function cn(e,t,n){for(var r,i=(hn.tweeners[t]||[]).concat(hn.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function hn(e,t,n){var r,i,s=0,o=hn.prefilters.length,u=E.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;for(var t=tn||fn(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),s=0,o=f.tweens.length;s<o;s++)f.tweens[s].run(r);return u.notifyWith(e,[f,r,n]),r<1&&o?n:(o||u.notifyWith(e,[f,1,0]),u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:tn||fn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)f.tweens[n].run(1);return t?(u.notifyWith(e,[f,1,0]),u.resolveWith(e,[f,t])):u.rejectWith(e,[f,t]),this}}),l=f.props;for(!function(e,t){var n,r,i,s,o;for(n in e)if(i=t[r=V(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(o=E.cssHooks[r])&&"expand"in o)for(n in s=o.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(l,f.opts.specialEasing);s<o;s++)if(r=hn.prefilters[s].call(f,e,l,f.opts))return d(r.stop)&&(E._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return E.map(l,cn,f),d(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),E.fx.timer(E.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f}function gn(e){return(e.match(H)||[]).join(" ")}function yn(e){return e.getAttribute&&e.getAttribute("class")||""}function bn(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(H)||[]}function On(e,t,n,r){var i;if(Array.isArray(t))E.each(t,function(t,i){n||Cn.test(e)?r(e,i):On(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)On(e+"["+i+"]",t[i],n,r)}function Rn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(H)||[];if(d(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Un(e,t,n,r){function o(u){var a;return i[u]=!0,E.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):void 0:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===Fn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function zn(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}var n=[],r=Object.getPrototypeOf,i=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,u=n.indexOf,a={},f=a.toString,l=a.hasOwnProperty,c=l.toString,h=c.call(Object),p={},d=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},m=e.document,g={type:!0,src:!0,nonce:!0,noModule:!0},w="3.5.1",E=function(e,t){return new E.fn.init(e,t)};E.fn=E.prototype={jquery:w,constructor:E,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(E.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[u]||{},u++),"object"==typeof o||d(o)||(o={}),u===a&&(o=this,u--);u<a;u++)if(null!=(e=arguments[u]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(f&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],s=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,o[t]=E.extend(f,s,r)):void 0!==r&&(o[t]=r));return o},E.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!!e&&"[object Object]"===f.call(e)&&(!(t=r(e))||"function"==typeof (n=l.call(t,"constructor")&&t.constructor)&&c.call(n)===h)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){y(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(S(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(S(Object(e))?E.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,o=!n;i<s;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,u=[];if(S(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&u.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&u.push(i);return s(u)},guid:1,support:p}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=n[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var x=function(e){function ut(e,t,r,i){var s,u,f,l,c,d,g,y=t&&t.ownerDocument,E=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return r;if(!i&&(h(t),t=t||p,v)){if(11!==E&&(c=Z.exec(e)))if(s=c[1]){if(9===E){if(!(f=t.getElementById(s)))return r;if(f.id===s)return r.push(f),r}else if(y&&(f=y.getElementById(s))&&b(t,f)&&f.id===s)return r.push(f),r}else{if(c[2])return D.apply(r,t.getElementsByTagName(e)),r;if((s=c[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(s)),r}if(n.qsa&&!k[e+" "]&&(!m||!m.test(e))&&(1!==E||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===E&&(X.test(e)||W.test(e))){(y=et.test(e)&&gt(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(rt,it):t.setAttribute("id",l=w)),u=(d=o(e)).length;while(u--)d[u]=(l?"#"+l:":scope")+" "+bt(d[u]);g=d.join(",")}try{return D.apply(r,y.querySelectorAll(g)),r}catch(t){k(e,!0)}finally{l===w&&t.removeAttribute("id")}}}return a(e.replace(U,"$1"),t,r,i)}function at(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ft(e){return e[w]=!0,e}function lt(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ct(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ht(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function pt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function vt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ot(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function mt(e){return ft(function(t){return t=+t,ft(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function gt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function yt(){}function bt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function wt(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,u=x++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,a){var f,l,c,h=[S,u];if(a){while(t=t[r])if((1===t.nodeType||o)&&e(t,n,a))return!0}else while(t=t[r])if(1===t.nodeType||o)if(l=(c=t[w]||(t[w]={}))[t.uniqueID]||(c[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((f=l[s])&&f[0]===S&&f[1]===u)return h[2]=f[2];if((l[s]=h)[2]=e(t,n,a))return!0}return!1}}function Et(e){return 1<e.length?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function St(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;u<a;u++)(s=e[u])&&(n&&!n(s,r,i)||(o.push(s),f&&t.push(u)));return o}function xt(e,t,n,r,i,s){return r&&!r[w]&&(r=xt(r)),i&&!i[w]&&(i=xt(i,s)),ft(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ut(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:St(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=St(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&-1<(f=i?H(s,c):h[l])&&(s[f]=!(o[f]=c))}}else g=St(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function Tt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=wt(function(e){return e===t},u,!0),c=wt(function(e){return-1<H(t,e)},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];a<s;a++)if(n=r.relative[e[a].type])h=[wt(Et(h),n)];else{if((n=r.filter[e[a].type].apply(null,e[a].matches))[w]){for(i=++a;i<s;i++)if(r.relative[e[i].type])break;return xt(1<a&&Et(h),1<a&&bt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(U,"$1"),n,a<i&&Tt(e.slice(a,i)),i<s&&Tt(e=e.slice(i)),i<s&&bt(e))}h.push(n)}return Et(h)}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=at(),N=at(),C=at(),k=at(),L=function(e,t){return e===t&&(c=!0),0},A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",I="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+j+"*\\]",q=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",R=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),z=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),X=new RegExp(j+"|>"),V=new RegExp(q),$=new RegExp("^"+F+"$"),J={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),nt=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},st=function(){h()},ot=wt(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(t){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}for(t in n=ut.support={},s=ut.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!K.test(t||n&&n.nodeName||"HTML")},h=ut.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!=p&&9===o.nodeType&&o.documentElement&&(d=(p=o).documentElement,v=!s(p),E!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",st,!1):i.attachEvent&&i.attachEvent("onunload",st)),n.scope=lt(function(e){return d.appendChild(e).appendChild(p.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=lt(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=lt(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(p.getElementsByClassName),n.getById=lt(function(e){return d.appendChild(e).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];i=t.getElementsByName(e),r=0;while(s=i[r++])if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Y.test(p.querySelectorAll))&&(lt(function(e){var t;d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")}),lt(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&lt(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==E&&b(E,e)?-1:t==p||t.ownerDocument==E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,o=[e],u=[t];if(!i||!s)return e==p?-1:t==p?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ht(e,t);n=e;while(n=n.parentNode)o.unshift(n);n=t;while(n=n.parentNode)u.unshift(n);while(o[r]===u[r])r++;return r?ht(o[r],u[r]):o[r]==E?-1:u[r]==E?1:0}),p},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&v&&!k[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){k(t,!0)}return 0<ut(t,p,null,[e]).length},ut.contains=function(e,t){return(e.ownerDocument||e)!=p&&h(e),b(e,t)},ut.attr=function(e,t){(e.ownerDocument||e)!=p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ut.escape=function(e){return(e+"").replace(rt,it)},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(L),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ut.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=ut.selectors={cacheLength:50,createPseudo:ft,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&-1<i.indexOf(n):"$="===t?n&&i.slice(-n.length)===n:"~="===t?-1<(" "+i.replace(R," ")+" ").indexOf(n):"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u,b=!1;if(m){if(s){while(v){h=t;while(h=h[v])if(u?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){b=(p=(f=(l=(c=(h=m)[w]||(h[w]={}))[h.uniqueID]||(c[h.uniqueID]={}))[e]||[])[0]===S&&f[1])&&f[2],h=p&&m.childNodes[p];while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if(1===h.nodeType&&++b&&h===t){l[e]=[S,p,b];break}}else if(y&&(b=p=(f=(l=(c=(h=t)[w]||(h[w]={}))[h.uniqueID]||(c[h.uniqueID]={}))[e]||[])[0]===S&&f[1]),!1===b)while(h=++p&&h&&h[v]||(b=p=0)||d.pop())if((u?h.nodeName.toLowerCase()===g:1===h.nodeType)&&++b&&(y&&((l=(c=h[w]||(h[w]={}))[h.uniqueID]||(c[h.uniqueID]={}))[e]=[S,b]),h===t))break;return(b-=i)===r||b%r==0&&0<=b/r}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return i[w]?i(t):1<i.length?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ft(function(e,n){var r,s=i(e,t),o=s.length;while(o--)e[r=H(e,s[o])]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ft(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ft(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:ft(function(e){return function(t){return 0<ut(e,t).length}}),contains:ft(function(e){return e=e.replace(tt,nt),function(t){return-1<(t.textContent||i(t)).indexOf(e)}}),lang:ft(function(e){return $.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:vt(!1),disabled:vt(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:mt(function(){return[0]}),last:mt(function(e,t){return[t-1]}),eq:mt(function(e,t,n){return[n<0?n+t:n]}),even:mt(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:mt(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:mt(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:mt(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=dt(t);return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,o=ut.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){for(o in n&&!(i=z.exec(u))||(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=W.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length)),r.filter)!(i=J[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):N(e,a).slice(0)},u=ut.compile=function(e,t){var n,i,s,u,a,l,c=[],d=[],m=C[e+" "];if(!m){t||(t=o(e)),n=t.length;while(n--)(m=Tt(t[n]))[w]?c.push(m):d.push(m);(m=C(e,(i=d,u=0<(s=c).length,a=0<i.length,l=function(e,t,n,o,l){var c,d,m,g=0,y="0",b=e&&[],w=[],E=f,x=e||a&&r.find.TAG("*",l),T=S+=null==E?1:Math.random()||.1,N=x.length;for(l&&(f=t==p||t||l);y!==N&&null!=(c=x[y]);y++){if(a&&c){d=0,t||c.ownerDocument==p||(h(c),n=!v);while(m=i[d++])if(m(c,t||p,n)){o.push(c);break}l&&(S=T)}u&&((c=!m&&c)&&g--,e&&b.push(c))}if(g+=y,u&&y!==g){d=0;while(m=s[d++])m(b,w,t,n);if(e){if(0<g)while(y--)b[y]||w[y]||(w[y]=M.call(o));w=St(w)}D.apply(o,w),l&&!e&&0<w.length&&1<g+s.length&&ut.uniqueSort(o)}return l&&(S=T,f=E),b},u?ft(l):l))).selector=e}return m},a=ut.select=function(e,t,n,i){var s,a,f,l,c,h="function"==typeof e&&e,p=!i&&o(e=h.selector||e);if(n=n||[],1===p.length){if(2<(a=p[0]=p[0].slice(0)).length&&"ID"===(f=a[0]).type&&9===t.nodeType&&v&&r.relative[a[1].type]){if(!(t=(r.find.ID(f.matches[0].replace(tt,nt),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(a.shift().value.length)}s=J.needsContext.test(e)?0:a.length;while(s--){if(f=a[s],r.relative[l=f.type])break;if((c=r.find[l])&&(i=c(f.matches[0].replace(tt,nt),et.test(a[0].type)&&gt(t.parentNode)||t))){if(a.splice(s,1),!(e=i.length&&bt(a)))return D.apply(n,i),n;break}}}return(h||u(e,p))(i,t,!v,n,!t||et.test(e)&&gt(t.parentNode)||t),n},n.sortStable=w.split("").sort(L).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=lt(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),lt(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ct("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&lt(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ct("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),lt(function(e){return null==e.getAttribute("disabled")})||ct(B,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ut}(e);E.find=x,E.expr=x.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=x.uniqueSort,E.text=x.getText,E.isXMLDoc=x.isXML,E.contains=x.contains,E.escapeSelector=x.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},N=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},C=E.expr.match.needsContext,L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<r;t++)if(E.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,i[t],n);return 1<r?E.uniqueSort(n):n},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&C.test(e)?E(e):e||[],!1).length}});var O,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:M.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),L.test(r[1])&&E.isPlainObject(t))for(r in t)d(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):d(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,O=E(m);var _=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!=typeof e&&E(e);if(!C.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&E.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(1<s.length?E.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?u.call(E(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=E.filter(r,i)),1<this.length&&(D[e]||E.uniqueSort(i),_.test(e)&&i.reverse()),this.pushStack(i)}});var H=/[^\x20\t\r\n\f]+/g;E.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},E.each(t.match(H)||[],function(e,t){n[t]=!0}),n):E.extend({},e);var r,i,s,o,u=[],a=[],f=-1,l=function(){for(o=o||e.once,s=r=!0;a.length;f=-1){i=a.shift();while(++f<u.length)!1===u[f].apply(i[0],i[1])&&e.stopOnFalse&&(f=u.length,i=!1)}e.memory||(i=!1),r=!1,o&&(u=i?[]:"")},c={add:function(){return u&&(i&&!r&&(f=u.length-1,a.push(i)),function t(n){E.each(n,function(n,r){d(r)?e.unique&&c.has(r)||u.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),i&&!r&&l()),this},remove:function(){return E.each(arguments,function(e,t){var n;while(-1<(n=E.inArray(t,u,n)))u.splice(n,1),n<=f&&f--}),this},has:function(e){return e?-1<E.inArray(e,u):0<u.length},empty:function(){return u&&(u=[]),this},disable:function(){return o=a=[],u=i="",this},disabled:function(){return!u},lock:function(){return o=a=[],i||r||(u=i=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],a.push(t),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!s}};return c},E.extend({Deferred:function(t){var n=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return E.Deferred(function(t){E.each(n,function(n,r){var i=d(e[r[4]])&&e[r[4]];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&d(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var u=this,a=arguments,f=function(){var e,f;if(!(t<s)){if((e=r.apply(u,a))===n.promise())throw new TypeError("Thenable self-resolution");f=e&&("object"==typeof e||"function"==typeof e)&&e.then,d(f)?i?f.call(e,o(s,n,B,i),o(s,n,j,i)):(s++,f.call(e,o(s,n,B,i),o(s,n,j,i),o(s,n,B,n.notifyWith))):(r!==B&&(u=void 0,a=[e]),(i||n.resolveWith)(u,a))}},l=i?f:function(){try{e()}catch(e){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(e,l.stackTrace),s<=t+1&&(r!==j&&(u=void 0,a=[e]),n.rejectWith(u,a))}};t?l():(E.Deferred.getStackHook&&(l.stackTrace=E.Deferred.getStackHook()),e.setTimeout(l))}}var s=0;return E.Deferred(function(e){n[0][3].add(o(0,e,d(i)?i:B,e.notifyWith)),n[1][3].add(o(0,e,d(t)?t:B)),n[2][3].add(o(0,e,d(r)?r:j))}).promise()},promise:function(e){return null!=e?E.extend(e,i):i}},s={};return E.each(n,function(e,t){var o=t[2],u=t[5];i[t[1]]=o.add,u&&o.add(function(){r=u},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=o.fireWith}),i.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),s=i.call(arguments),o=E.Deferred(),u=function(e){return function(n){r[e]=this,s[e]=1<arguments.length?i.call(arguments):n,--t||o.resolveWith(r,s)}};if(t<=1&&(F(e,o.done(u(n)).resolve,o.reject,!t),"pending"===o.state()||d(s[n]&&s[n].then)))return o.then();while(n--)F(s[n],u(n),o.reject);return o.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&I.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},E.readyException=function(t){e.setTimeout(function(){throw t})};var q=E.Deferred();E.fn.ready=function(e){return q.then(e)["catch"](function(e){E.readyException(e)}),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0)!==e&&0<--E.readyWait||q.resolveWith(m,[E])}}),E.ready.then=q.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(E.ready):(m.addEventListener("DOMContentLoaded",R),e.addEventListener("load",R));var U=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===b(n))for(u in i=!0,n)U(e,t,u,n[u],!0,s,o);else if(void 0!==r&&(i=!0,d(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(E(e),n)})),t))for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},z=/^-ms-/,W=/-([a-z])/g,$=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(H)||[]).length;while(n--)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var K=new J,Q=new J,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;E.extend({hasData:function(e){return Q.hasData(e)||K.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return K.access(e,t,n)},_removeData:function(e,t){K.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=Q.get(s),1===s.nodeType&&!K.get(s,"hasDataAttrs"))){n=o.length;while(n--)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=V(r.slice(5)),Z(s,r,i[r]));K.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):U(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=Q.get(s,e))?n:void 0!==(n=Z(s,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=K.get(e,t),n&&(!r||Array.isArray(n)?r=K.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),s=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,function(){E.dequeue(e,t)},s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K.get(e,n)||K.access(e,n,{empty:E.Callbacks("once memory").add(function(){K.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each(function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(o--)(n=K.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=m.documentElement,it=function(e){return E.contains(e.ownerDocument,e)},st={composed:!0};rt.getRootNode&&(it=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(st)===e.ownerDocument});var ot=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&it(e)&&"none"===E.css(e,"display")},at={};E.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ot(this)?E(this).show():E(this).hide()})}});var lt,ct,ht=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i;lt=m.createDocumentFragment().appendChild(m.createElement("div")),(ct=m.createElement("input")).setAttribute("type","radio"),ct.setAttribute("checked","checked"),ct.setAttribute("name","t"),lt.appendChild(ct),p.checkClone=lt.cloneNode(!0).cloneNode(!0).lastChild.checked,lt.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!lt.cloneNode(!0).lastChild.defaultValue,lt.innerHTML="<option></option>",p.option=!!lt.lastChild;var vt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,p.option||(vt.optgroup=vt.option=[1,"<select multiple='multiple'>","</select>"]);var yt=/<|&#?\w+;/,wt=/^key/,Et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,St=/^([^.]*)(?:\.(.+)|)/;E.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=K.get(e);if($(e)){n.handler&&(n=(s=n).handler,i=s.selector),i&&E.find.matchesSelector(rt,i),n.guid||(n.guid=E.guid++),(a=m.events)||(a=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),f=(t=(t||"").match(H)||[""]).length;while(f--)p=v=(u=St.exec(t[f])||[])[1],d=(u[2]||"").split(".").sort(),p&&(c=E.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=E.event.special[p]||{},l=E.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:d.join(".")},s),(h=a[p])||((h=a[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,r,d,o)||e.addEventListener&&e.addEventListener(p,o)),c.add&&(c.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,l):h.push(l),E.event.global[p]=!0)}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=K.hasData(e)&&K.get(e);if(m&&(a=m.events)){f=(t=(t||"").match(H)||[""]).length;while(f--)if(p=v=(u=St.exec(t[f])||[])[1],d=(u[2]||"").split(".").sort(),p){c=E.event.special[p]||{},h=a[p=(r?c.delegateType:c.bindType)||p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],!i&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&(c.teardown&&!1!==c.teardown.call(e,d,m.handle)||E.removeEvent(e,p,m.handle),delete a[p])}else for(p in a)E.event.remove(e,p+t[f],n,r,!0);E.isEmptyObject(a)&&K.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,u=new Array(arguments.length),a=E.event.fix(e),f=(K.get(this,"events")||Object.create(null))[a.type]||[],l=E.event.special[a.type]||{};for(u[0]=a,t=1;t<arguments.length;t++)u[t]=arguments[t];if(a.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){o=E.event.handlers.call(this,a,f),t=0;while((i=o[t++])&&!a.isPropagationStopped()){a.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!1!==s.namespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(r=((E.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&!("click"===e.type&&1<=e.button))for(;f!==this;f=f.parentNode||this)if(1===f.nodeType&&("click"!==e.type||!0!==f.disabled)){for(s=[],o={},n=0;n<a;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?-1<E(i,this).index(f):E.find(i,this,null,[f]).length),o[i]&&s.push(r);s.length&&u.push({elem:f,handlers:s})}return f=this,a<t.length&&u.push({elem:f,handlers:t.slice(a)}),u},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:d(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ht.test(t.type)&&t.click&&k(t,"input")&&kt(t,"click",xt),!1},trigger:function(e){var t=this||e;return ht.test(t.type)&&t.click&&k(t,"input")&&kt(t,"click"),!0},_default:function(e){var t=e.target;return ht.test(t.type)&&t.click&&k(t,"input")&&K.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xt:Tt,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xt,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xt,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xt,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&wt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Et.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},function(e,t){E.event.special[e]={setup:function(){return kt(this,e,Nt),!1},trigger:function(){return kt(this,e),!0},delegateType:t}}),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||E.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),E.fn.extend({on:function(e,t,n,r){return Ct(this,e,t,n,r)},one:function(e,t,n,r){return Ct(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Tt),this.each(function(){E.event.remove(this,e,n,t)})}});var Lt=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,o,u,a,f,l=e.cloneNode(!0),c=it(e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(o=mt(l),r=0,i=(s=mt(e)).length;r<i;r++)u=s[r],a=o[r],void 0,"input"===(f=a.nodeName.toLowerCase())&&ht.test(u.type)?a.checked=u.checked:"input"!==f&&"textarea"!==f||(a.defaultValue=u.defaultValue);if(t)if(n)for(s=s||mt(e),o=o||mt(l),r=0,i=s.length;r<i;r++)Pt(s[r],o[r]);else Pt(e,l);return 0<(o=mt(l,"script")).length&&gt(o,!c&&mt(e,"script")),l},cleanData:function(e){for(var t,n,r,i=E.event.special,s=0;void 0!==(n=e[s]);s++)if($(n)){if(t=n[K.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[K.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Bt(this,e,!0)},remove:function(e){return Bt(this,e)},text:function(e){return U(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ht(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,e).appendChild(e)})},prepend:function(){return Ht(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Mt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ht(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ht(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return U(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Lt.test(e)&&!vt[(pt.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ht(this,arguments,function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(mt(this)),n&&n.replaceChild(t,this))},e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(e){for(var n,r=[],i=E(e),s=i.length-1,u=0;u<=s;u++)n=u===s?this:this.clone(!0),E(i[u])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var jt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Ft=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},It=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},qt=new RegExp(nt.join("|"),"i");!function(){function t(){if(l){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(f).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,a=12===n(t.marginLeft),l.style.right="60%",o=36===n(t.right),i=36===n(t.width),l.style.position="absolute",s=12===n(l.offsetWidth/3),rt.removeChild(f),l=null}}function n(e){return Math.round(parseFloat(e))}var r,i,s,o,u,a,f=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===l.style.backgroundClip,E.extend(p,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),a},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,r,i;return null==u&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",rt.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),u=3<parseInt(i.height),rt.removeChild(t)),u}}))}();var zt=["Webkit","Moz","ms"],Wt=m.createElement("div").style,Xt={},$t=/^(none|table(?!-c[ea]).+)/,Jt=/^--/,Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"};E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=V(t),a=Jt.test(t),f=e.style;if(a||(t=Vt(u)),o=E.cssHooks[t]||E.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:f[t];"string"===(s=typeof n)&&(i=tt.exec(n))&&i[1]&&(n=ut(e,t,i),s="number"),null!=n&&n==n&&("number"!==s||a||(n+=i&&i[3]||(E.cssNumber[u]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(f[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(a?f.setProperty(t,n):f[t]=n))}},css:function(e,t,n,r){var i,s,o,u=V(t);return Jt.test(t)||(t=Vt(u)),(o=E.cssHooks[t]||E.cssHooks[u])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Rt(e,t,r)),"normal"===i&&t in Qt&&(i=Qt[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!$t.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Zt(e,t,r):It(e,Kt,function(){return Zt(e,t,r)})},set:function(e,n,r){var i,s=Ft(e),o=!p.scrollboxSize()&&"absolute"===s.position,u=(o||r)&&"border-box"===E.css(e,"boxSizing",!1,s),a=r?Yt(e,t,r,u,s):0;return u&&o&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-Yt(e,t,"border",!1,s)-.5)),a&&(i=tt.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),Gt(0,n,a)}}}),E.cssHooks.marginLeft=Ut(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Rt(e,"marginLeft"))||e.getBoundingClientRect().left-It(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+nt[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(E.cssHooks[e+t].set=Gt)}),E.fn.extend({css:function(e,t){return U(this,function(e,t,n){var r,i,s={},o=0;if(Array.isArray(t)){for(r=Ft(e),i=t.length;o<i;o++)s[t[o]]=E.css(e,t[o],!1,r);return s}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,1<arguments.length)}}),((E.Tween=en).prototype={constructor:en,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var e=en.propHooks[this.prop];return e&&e.get?e.get(this):en.propHooks._default.get(this)},run:function(e){var t,n=en.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):en.propHooks._default.set(this),this}}).init.prototype=en.prototype,(en.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[Vt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=en.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=en.prototype.init,E.fx.step={};var tn,nn,rn,sn,on=/^(?:toggle|show|hide)$/,un=/queueHooks$/;E.Animation=E.extend(hn,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ut(n.elem,e,tt.exec(t),n),n}]},tweener:function(e,t){d(e)?(t=e,e=["*"]):e=e.match(H);for(var n,r=0,i=e.length;r<i;r++)n=e[r],hn.tweeners[n]=hn.tweeners[n]||[],hn.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,o,u,a,f,l,c="width"in t||"height"in t,h=this,p={},d=e.style,v=e.nodeType&&ot(e),m=K.get(e,"fxshow");for(r in n.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,u=o.empty.fire,o.empty.fire=function(){o.unqueued||u()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],on.test(i)){if(delete t[r],s=s||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;v=!0}p[r]=m&&m[r]||E.style(e,r)}if((a=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(r in c&&1===e.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(f=m&&m.display)&&(f=K.get(e,"display")),"none"===(l=E.css(e,"display"))&&(f?l=f:(ft([e],!0),f=e.style.display||f,l=E.css(e,"display"),ft([e]))),("inline"===l||"inline-block"===l&&null!=f)&&"none"===E.css(e,"float")&&(a||(h.done(function(){d.display=f}),null==f&&(l=d.display,f="none"===l?"":l)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),a=!1,p)a||(m?"hidden"in m&&(v=m.hidden):m=K.access(e,"fxshow",{display:f}),s&&(m.hidden=!v),v&&ft([e],!0),h.done(function(){for(r in v||ft([e]),K.remove(e,"fxshow"),p)E.style(e,r,p[r])})),a=cn(v?m[r]:0,r,h),r in m||(m[r]=a.start,v&&(a.end=a.start,a.start=0))}],prefilter:function(e,t){t?hn.prefilters.unshift(e):hn.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||d(e)&&e,duration:e,easing:n&&t||t&&!d(t)&&t};return E.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){d(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ot).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),s=E.speed(t,n,r),o=function(){var t=hn(this,E.extend({},e),s);(i||K.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=E.timers,o=K.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&un.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||E.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=K.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=E.timers,o=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),E.each(["toggle","show","hide"],function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ln(t,!0),e,r,i)}}),E.each({slideDown:ln("show"),slideUp:ln("hide"),slideToggle:ln("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(tn=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),tn=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){nn||(nn=!0,an())},E.fx.stop=function(){nn=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,n){return t=E.fx&&E.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},rn=m.createElement("input"),sn=m.createElement("select").appendChild(m.createElement("option")),rn.type="checkbox",p.checkOn=""!==rn.value,p.optSelected=sn.selected,(rn=m.createElement("input")).value="t",rn.type="radio",p.radioValue="t"===rn.value;var pn,dn=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return U(this,E.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?E.prop(e,t,n):(1===s&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?pn:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(H);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pn={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dn[t]||E.find.attr;dn[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=dn[o],dn[o]=i,i=null!=n(e,t,r)?o:null,dn[o]=s),i}});var vn=/^(?:input|select|textarea|button)$/i,mn=/^(?:a|area)$/i;E.fn.extend({prop:function(e,t){return U(this,E.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):vn.test(e.nodeName)||mn.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),p.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this}),E.fn.extend({addClass:function(e){var t,n,r,i,s,o,u,a=0;if(d(e))return this.each(function(t){E(this).addClass(e.call(this,t,yn(this)))});if((t=bn(e)).length)while(n=this[a++])if(i=yn(n),r=1===n.nodeType&&" "+gn(i)+" "){o=0;while(s=t[o++])r.indexOf(" "+s+" ")<0&&(r+=s+" ");i!==(u=gn(r))&&n.setAttribute("class",u)}return this},removeClass:function(e){var t,n,r,i,s,o,u,a=0;if(d(e))return this.each(function(t){E(this).removeClass(e.call(this,t,yn(this)))});if(!arguments.length)return this.attr("class","");if((t=bn(e)).length)while(n=this[a++])if(i=yn(n),r=1===n.nodeType&&" "+gn(i)+" "){o=0;while(s=t[o++])while(-1<r.indexOf(" "+s+" "))r=r.replace(" "+s+" "," ");i!==(u=gn(r))&&n.setAttribute("class",u)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):d(e)?this.each(function(n){E(this).toggleClass(e.call(this,n,yn(this),t),t)}):this.each(function(){var t,i,s,o;if(r){i=0,s=E(this),o=bn(e);while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else void 0!==e&&"boolean"!==n||((t=yn(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+gn(yn(n))+" ").indexOf(t))return!0;return!1}});var wn=/\r/g;E.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=d(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,E(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=E.map(i,function(e){return null==e?"":e+""})),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof (n=i.value)?n.replace(wn,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:gn(E.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,u=o?null:[],a=o?s+1:i.length;for(r=s<0?a:o?s:0;r<a;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=E(n).val(),o)return t;u.push(t)}return u},set:function(e,t){var n,r,i=e.options,s=E.makeArray(t),o=i.length;while(o--)((r=i[o]).selected=-1<E.inArray(E.valHooks.option.get(r),s))&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<E.inArray(E(e).val(),t)}},p.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var En=/^(?:focusinfocus|focusoutblur)$/,Sn=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(t,n,r,i){var s,o,u,a,f,c,h,p,g=[r||m],y=l.call(t,"type")?t.type:t,b=l.call(t,"namespace")?t.namespace.split("."):[];if(o=p=u=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!En.test(y+E.event.triggered)&&(-1<y.indexOf(".")&&(y=(b=y.split(".")).shift(),b.sort()),f=y.indexOf(":")<0&&"on"+y,(t=t[E.expando]?t:new E.Event(y,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:E.makeArray(n,[t]),h=E.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(r,n))){if(!i&&!h.noBubble&&!v(r)){for(a=h.delegateType||y,En.test(a+y)||(o=o.parentNode);o;o=o.parentNode)g.push(o),u=o;u===(r.ownerDocument||m)&&g.push(u.defaultView||u.parentWindow||e)}s=0;while((o=g[s++])&&!t.isPropagationStopped())p=o,t.type=1<s?a:h.bindType||y,(c=(K.get(o,"events")||Object.create(null))[t.type]&&K.get(o,"handle"))&&c.apply(o,n),(c=f&&o[f])&&c.apply&&$(o)&&(t.result=c.apply(o,n),!1===t.result&&t.preventDefault());return t.type=y,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(g.pop(),n)||!$(r)||f&&d(r[y])&&!v(r)&&((u=r[f])&&(r[f]=null),E.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,Sn),r[y](),t.isPropagationStopped()&&p.removeEventListener(y,Sn),E.event.triggered=void 0,u&&(r[f]=u)),t.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),p.focusin||E.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,t);i||r.addEventListener(e,n,!0),K.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=K.access(r,t)-1;i?K.access(r,t,i):(r.removeEventListener(e,n,!0),K.remove(r,t))}}});var xn=e.location,Tn={guid:Date.now()},Nn=/\?/;E.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+t),n};var Cn=/\[\]$/,kn=/\r?\n/g,Ln=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;E.param=function(e,t){var n,r=[],i=function(e,t){var n=d(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){i(this.name,this.value)});else for(n in e)On(n,e[n],t,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&An.test(this.nodeName)&&!Ln.test(e)&&(this.checked||!ht.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(kn,"\r\n")}}):{name:t.name,value:n.replace(kn,"\r\n")}}).get()}});var Mn=/%20/g,_n=/#.*$/,Dn=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)$/gm,Hn=/^(?:GET|HEAD)$/,Bn=/^\/\//,jn={},Fn={},In="*/".concat("*"),qn=m.createElement("a");qn.href=xn.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xn.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":In,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zn(zn(e,E.ajaxSettings),t):zn(E.ajaxSettings,e)},ajaxPrefilter:Rn(jn),ajaxTransport:Rn(Fn),ajax:function(t,n){function N(t,n,o,a){var c,h,m,w,S,x=n;f||(f=!0,u&&e.clearTimeout(u),r=void 0,s=a||"",T.readyState=0<t?4:0,c=200<=t&&t<300||304===t,o&&(w=function(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==a[0]&&a.unshift(s),n[s]}(p,T,o)),!c&&-1<E.inArray("script",p.dataTypes)&&(p.converters["text script"]=function(){}),w=function(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(!(o=f[a+" "+s]||f["* "+s]))for(i in f)if((u=i.split(" "))[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){!0===o?o=f[i]:!0!==f[i]&&(s=u[0],l.unshift(u[1]));break}if(!0!==o)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}(p,w,T,c),c?(p.ifModified&&((S=T.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=S),(S=T.getResponseHeader("etag"))&&(E.etag[i]=S)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=w.state,h=w.data,c=!(m=w.error))):(m=x,!t&&x||(x="error",t<0&&(t=0))),T.status=t,T.statusText=(n||x)+"",c?g.resolveWith(d,[h,x,T]):g.rejectWith(d,[T,x,m]),T.statusCode(b),b=void 0,l&&v.trigger(c?"ajaxSuccess":"ajaxError",[T,p,c?h:m]),y.fireWith(d,[T,x]),l&&(v.trigger("ajaxComplete",[T,p]),--E.active||E.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,i,s,o,u,a,f,l,c,h,p=E.ajaxSetup({},n),d=p.context||p,v=p.context&&(d.nodeType||d.jquery)?E(d):E.event,g=E.Deferred(),y=E.Callbacks("once memory"),b=p.statusCode||{},w={},S={},x="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(f){if(!o){o={};while(t=Pn.exec(s))o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?s:null},setRequestHeader:function(e,t){return null==f&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==f&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(f)T.always(e[T.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),N(0,t),this}};if(g.promise(T),p.url=((t||p.url||xn.href)+"").replace(Bn,xn.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(H)||[""],null==p.crossDomain){a=m.createElement("a");try{a.href=p.url,a.href=a.href,p.crossDomain=qn.protocol+"//"+qn.host!=a.protocol+"//"+a.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),Un(jn,p,n,T),f)return T;for(c in(l=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Hn.test(p.type),i=p.url.replace(_n,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Mn,"+")):(h=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Nn.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Dn,"$1"),h=(Nn.test(i)?"&":"?")+"_="+Tn.guid++ +h),p.url=i+h),p.ifModified&&(E.lastModified[i]&&T.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&T.setRequestHeader("If-None-Match",E.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+In+"; q=0.01":""):p.accepts["*"]),p.headers)T.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(!1===p.beforeSend.call(d,T,p)||f))return T.abort();if(x="abort",y.add(p.complete),T.done(p.success),T.fail(p.error),r=Un(Fn,p,n,T)){if(T.readyState=1,l&&v.trigger("ajaxSend",[T,p]),f)return T;p.async&&0<p.timeout&&(u=e.setTimeout(function(){T.abort("timeout")},p.timeout));try{f=!1,r.send(w,N)}catch(t){if(f)throw t;N(-1,t)}}else N(-1,"No Transport");return T},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,t){E[t]=function(e,n,r,i){return d(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:n,success:r},E.isPlainObject(e)&&e))}}),E.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(d(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return d(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=d(e);return this.each(function(n){E(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){E(this).replaceWith(this.childNodes)}),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Wn={0:200,1223:204},Xn=E.ajaxSettings.xhr();p.cors=!!Xn&&"withCredentials"in Xn,p.ajax=Xn=!!Xn,E.ajaxTransport(function(t){var n,r;if(p.cors||Xn&&!t.crossDomain)return{send:function(i,s){var o,u=t.xhr();if(u.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)u[o]=t.xhrFields[o];for(o in t.mimeType&&u.overrideMimeType&&u.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)u.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(n=r=u.onload=u.onerror=u.onabort=u.ontimeout=u.onreadystatechange=null,"abort"===e?u.abort():"error"===e?"number"!=typeof u.status?s(0,"error"):s(u.status,u.statusText):s(Wn[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!=typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=n(),r=u.onerror=u.ontimeout=n("error"),void 0!==u.onabort?u.onabort=r:u.onreadystatechange=function(){4===u.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{u.send(t.hasContent&&t.data||null)}catch(i){if(n)throw i}},abort:function(){n&&n()}}}),E.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}});var Vn,$n=[],Jn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$n.pop()||E.expando+"_"+Tn.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=!1!==t.jsonp&&(Jn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jn.test(t.data)&&"data");if(u||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=d(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(Jn,"$1"+i):!1!==t.jsonp&&(t.url+=(Nn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||E.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){void 0===s?E(e).removeProp(i):e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,$n.push(i)),o&&d(s)&&s(o[0]),o=s=void 0}),"script"}),p.createHTMLDocument=((Vn=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vn.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),s=!n&&[],(i=L.exec(e))?[t.createElement(i[1])]:(i=bt([e],t,s),s&&s.length&&E(s).remove(),E.merge([],i.childNodes)));var r,i,s},E.fn.load=function(e,t,n){var r,i,s,o=this,u=e.indexOf(" ");return-1<u&&(r=gn(e.slice(u)),e=e.slice(0,u)),d(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<o.length&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length},E.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f=E.css(e,"position"),l=E(e),c={};"static"===f&&(e.style.position="relative"),u=l.offset(),s=E.css(e,"top"),a=E.css(e,"left"),("absolute"===f||"fixed"===f)&&-1<(s+a).indexOf("auto")?(o=(r=l.position()).top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),d(t)&&(t=t.call(e,n,E.extend({},u))),null!=t.top&&(c.top=t.top-u.top+o),null!=t.left&&(c.left=t.left-u.left+i),"using"in t?t.using.call(e,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),l.css(c))}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){E.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),i.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-E.css(r,"marginTop",!0),left:t.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===E.css(e,"position"))e=e.offsetParent;return e||rt})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return U(this,function(e,r,i){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i},e,r,arguments.length)}}),E.each(["top","left"],function(e,t){E.cssHooks[t]=Ut(p.pixelPosition,function(e,n){if(n)return n=Rt(e,t),jt.test(n)?E(e).position()[t]+"px":n})}),E.each({Height:"height",Width:"width"},function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){E.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),u=n||(!0===i||!0===s?"margin":"border");return U(this,function(t,n,i){var s;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?E.css(t,n,u):E.style(t,n,i,u)},t,o?i:void 0,o)}})}),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){E.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}});var Kn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,r,s;if("string"==typeof t&&(n=e[t],t=e,e=n),d(e))return r=i.call(arguments,2),(s=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||E.guid++,s},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=k,E.isFunction=d,E.isWindow=v,E.camelCase=V,E.type=b,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(Kn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var Qn=e.jQuery,Gn=e.$;return E.noConflict=function(t){return e.$===E&&(e.$=Gn),t&&e.jQuery===E&&(e.jQuery=Qn),E},"undefined"==typeof t&&(e.jQuery=e.$=E),E}),define("jqueryVisible",["require"],function(e){return function(e){var t=e(window);e.fn.visible=function(n,r,i,s){if(this.length<1)return;i=i||"both";var o=this.length>1?this.eq(0):this,u=typeof s!="undefined"&&s!==null,a=u?e(s):t,f=u?a.position():0,l=o.get(0),c=a.outerWidth(),h=a.outerHeight(),p=r===!0?l.offsetWidth*l.offsetHeight:!0;if(typeof l.getBoundingClientRect=="function"){var d=l.getBoundingClientRect(),v=u?d.top-f.top>=0&&d.top<h+f.top:d.top>=0&&d.top<h,m=u?d.bottom-f.top>0&&d.bottom<=h+f.top:d.bottom>0&&d.bottom<=h,g=u?d.left-f.left>=0&&d.left<c+f.left:d.left>=0&&d.left<c,y=u?d.right-f.left>0&&d.right<c+f.left:d.right>0&&d.right<=c,b=n?v||m:v&&m,w=n?g||y:g&&y,b=d.top<0&&d.bottom>h?!0:b,w=d.left<0&&d.right>c?!0:w;if(i==="both")return p&&b&&w;if(i==="vertical")return p&&b;if(i==="horizontal")return p&&w}else{var E=u?0:f,S=E+h,x=a.scrollLeft(),T=x+c,N=o.position(),C=N.top,k=C+o.height(),L=N.left,A=L+o.width(),O=n===!0?k:C,M=n===!0?C:k,_=n===!0?A:L,D=n===!0?L:A;if(i==="both")return!!p&&M<=S&&O>=E&&D<=T&&_>=x;if(i==="vertical")return!!p&&M<=S&&O>=E;if(i==="horizontal")return!!p&&D<=T&&_>=x}}}}),define("jqueryprivate",["require","jquery","jqueryVisible"],function(e){var t=e("jquery");return e("jqueryVisible")(t),t.noConflict(!0)}),function(){function x(e){function t(t,n,r,i,s,o){for(;s>=0&&s<o;s+=e){var u=i?i[s]:s;r=n(r,t[u],u,t)}return r}return function(n,r,i,s){r=v(r,s,4);var o=!S(n)&&d.keys(n),u=(o||n).length,a=e>0?0:u-1;return arguments.length<3&&(i=n[o?o[a]:a],a+=e),t(n,r,i,o,a,u)}}function C(e){return function(t,n,r){n=m(n,r);var i=E(t),s=e>0?0:i-1;for(;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}function k(e,t,n){return function(r,i,s){var u=0,a=E(r);if(typeof s=="number")e>0?u=s>=0?s:Math.max(s+a,u):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(o.call(r,u,a),d.isNaN),s>=0?s+u:-1;for(s=e>0?u:a-1;s>=0&&s<a;s+=e)if(r[s]===i)return s;return-1}}function M(e,t){var n=O.length,i=e.constructor,s=d.isFunction(i)&&i.prototype||r,o="constructor";d.has(e,o)&&!d.contains(t,o)&&t.push(o);while(n--)o=O[n],o in e&&e[o]!==s[o]&&!d.contains(t,o)&&t.push(o)}var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,s=n.push,o=n.slice,u=r.toString,a=r.hasOwnProperty,f=Array.isArray,l=Object.keys,c=i.bind,h=Object.create,p=function(){},d=function(e){if(e instanceof d)return e;if(!(this instanceof d))return new d(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.8.3";var v=function(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return function(){return e.apply(t,arguments)}},m=function(e,t,n){return e==null?d.identity:d.isFunction(e)?v(e,t,n):d.isObject(e)?d.matcher(e):d.property(e)};d.iteratee=function(e,t){return m(e,t,Infinity)};var g=function(e,t){return function(n){var r=arguments.length;if(r<2||n==null)return n;for(var i=1;i<r;i++){var s=arguments[i],o=e(s),u=o.length;for(var a=0;a<u;a++){var f=o[a];if(!t||n[f]===void 0)n[f]=s[f]}}return n}},y=function(e){if(!d.isObject(e))return{};if(h)return h(e);p.prototype=e;var t=new p;return p.prototype=null,t},b=function(e){return function(t){return t==null?void 0:t[e]}},w=Math.pow(2,53)-1,E=b("length"),S=function(e){var t=E(e);return typeof t=="number"&&t>=0&&t<=w};d.each=d.forEach=function(e,t,n){t=v(t,n);var r,i;if(S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=d.keys(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e},d.map=d.collect=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length,s=Array(i);for(var o=0;o<i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s},d.reduce=d.foldl=d.inject=x(1),d.reduceRight=d.foldr=x(-1),d.find=d.detect=function(e,t,n){var r;S(e)?r=d.findIndex(e,t,n):r=d.findKey(e,t,n);if(r!==void 0&&r!==-1)return e[r]},d.filter=d.select=function(e,t,n){var r=[];return t=m(t,n),d.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},d.reject=function(e,t,n){return d.filter(e,d.negate(m(t)),n)},d.every=d.all=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0},d.some=d.any=function(e,t,n){t=m(t,n);var r=!S(e)&&d.keys(e),i=(r||e).length;for(var s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1},d.contains=d.includes=d.include=function(e,t,n,r){S(e)||(e=d.values(e));if(typeof n!="number"||r)n=0;return d.indexOf(e,t,n)>=0},d.invoke=function(e,t){var n=o.call(arguments,2),r=d.isFunction(t);return d.map(e,function(e){var i=r?t:e[t];return i==null?i:i.apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matcher(t))},d.findWhere=function(e,t){return d.find(e,d.matcher(t))},d.max=function(e,t,n){var r=-Infinity,i=-Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s>r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o>i||o===-Infinity&&r===-Infinity)r=e,i=o});return r},d.min=function(e,t,n){var r=Infinity,i=Infinity,s,o;if(t==null&&e!=null){e=S(e)?e:d.values(e);for(var u=0,a=e.length;u<a;u++)s=e[u],s<r&&(r=s)}else t=m(t,n),d.each(e,function(e,n,s){o=t(e,n,s);if(o<i||o===Infinity&&r===Infinity)r=e,i=o});return r},d.shuffle=function(e){var t=S(e)?e:d.values(e),n=t.length,r=Array(n);for(var i=0,s;i<n;i++)s=d.random(0,i),s!==i&&(r[i]=r[s]),r[s]=t[i];return r},d.sample=function(e,t,n){return t==null||n?(S(e)||(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=m(t,n),d.pluck(d.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,r){var i={};return n=m(n,r),d.each(t,function(r,s){var o=n(r,s,t);e(i,r,o)}),i}};d.groupBy=T(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=T(function(e,t,n){e[n]=t}),d.countBy=T(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.toArray=function(e){return e?d.isArray(e)?o.call(e):S(e)?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return e==null?0:S(e)?e.length:d.keys(e).length},d.partition=function(e,t,n){t=m(t,n);var r=[],i=[];return d.each(e,function(e,n,s){(t(e,n,s)?r:i).push(e)}),[r,i]},d.first=d.head=d.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:d.initial(e,e.length-t)},d.initial=function(e,t,n){return o.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))},d.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:d.rest(e,Math.max(0,e.length-t))},d.rest=d.tail=d.drop=function(e,t,n){return o.call(e,t==null||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var N=function(e,t,n,r){var i=[],s=0;for(var o=r||0,u=E(e);o<u;o++){var a=e[o];if(S(a)&&(d.isArray(a)||d.isArguments(a))){t||(a=N(a,t,n));var f=0,l=a.length;i.length+=l;while(f<l)i[s++]=a[f++]}else n||(i[s++]=a)}return i};d.flatten=function(e,t){return N(e,t,!1)},d.without=function(e){return d.difference(e,o.call(arguments,1))},d.uniq=d.unique=function(e,t,n,r){d.isBoolean(t)||(r=n,n=t,t=!1),n!=null&&(n=m(n,r));var i=[],s=[];for(var o=0,u=E(e);o<u;o++){var a=e[o],f=n?n(a,o,e):a;t?((!o||s!==f)&&i.push(a),s=f):n?d.contains(s,f)||(s.push(f),i.push(a)):d.contains(i,a)||i.push(a)}return i},d.union=function(){return d.uniq(N(arguments,!0,!0))},d.intersection=function(e){var t=[],n=arguments.length;for(var r=0,i=E(e);r<i;r++){var s=e[r];if(d.contains(t,s))continue;for(var o=1;o<n;o++)if(!d.contains(arguments[o],s))break;o===n&&t.push(s)}return t},d.difference=function(e){var t=N(arguments,!0,!0,1);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(){return d.unzip(arguments)},d.unzip=function(e){var t=e&&d.max(e,E).length||0,n=Array(t);for(var r=0;r<t;r++)n[r]=d.pluck(e,r);return n},d.object=function(e,t){var n={};for(var r=0,i=E(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},d.findIndex=C(1),d.findLastIndex=C(-1),d.sortedIndex=function(e,t,n,r){n=m(n,r,1);var i=n(t),s=0,o=E(e);while(s<o){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s},d.indexOf=k(1,d.findIndex,d.sortedIndex),d.lastIndexOf=k(-1,d.findLastIndex),d.range=function(e,t,n){t==null&&(t=e||0,e=0),n=n||1;var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r);for(var s=0;s<r;s++,e+=n)i[s]=e;return i};var L=function(e,t,n,r,i){if(r instanceof t){var s=y(e.prototype),o=e.apply(s,i);return d.isObject(o)?o:s}return e.apply(n,i)};d.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,o.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var n=o.call(arguments,2),r=function(){return L(e,r,t,this,n.concat(o.call(arguments)))};return r},d.partial=function(e){var t=o.call(arguments,1),n=function(){var r=0,i=t.length,s=Array(i);for(var o=0;o<i;o++)s[o]=t[o]===d?arguments[r++]:t[o];while(r<arguments.length)s.push(arguments[r++]);return L(e,n,this,this,s)};return n},d.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=d.bind(e[r],e);return e},d.memoize=function(e,t){var n=function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return d.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return n.cache={},n},d.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=d.partial(d.delay,d,1),d.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:d.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=d.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},d.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=d.now()-o;f<t&&f>=0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=d.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){var n=t,r=e[t].apply(this,arguments);while(n--)r=e[n].call(this,r);return r}},d.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},d.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},d.once=d.partial(d.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];d.keys=function(e){if(!d.isObject(e))return[];if(l)return l(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return A&&M(e,t),t},d.allKeys=function(e){if(!d.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&M(e,t),t},d.values=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},d.mapObject=function(e,t,n){t=m(t,n);var r=d.keys(e),i=r.length,s={},o;for(var u=0;u<i;u++)o=r[u],s[o]=t(e[o],o,e);return s},d.pairs=function(e){var t=d.keys(e),n=t.length,r=Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},d.invert=function(e){var t={},n=d.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=g(d.allKeys),d.extendOwn=d.assign=g(d.keys),d.findKey=function(e,t,n){t=m(t,n);var r=d.keys(e),i;for(var s=0,o=r.length;s<o;s++){i=r[s];if(t(e[i],i,e))return i}},d.pick=function(e,t,n){var r={},i=e,s,o;if(i==null)return r;d.isFunction(t)?(o=d.allKeys(i),s=v(t,n)):(o=N(arguments,!1,!1,1),s=function(e,t,n){return t in n},i=Object(i));for(var u=0,a=o.length;u<a;u++){var f=o[u],l=i[f];s(l,f,i)&&(r[f]=l)}return r},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var r=d.map(N(arguments,!1,!1,1),String);t=function(e,t){return!d.contains(r,t)}}return d.pick(e,t,n)},d.defaults=g(d.allKeys,!0),d.create=function(e,t){var n=y(e);return t&&d.extendOwn(n,t),n},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e},d.isMatch=function(e,t){var n=d.keys(t),r=n.length;if(e==null)return!r;var i=Object(e);for(var s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var _=function(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=i==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];var f=n.length;while(f--)if(n[f]===e)return r[f]===t;n.push(e),r.push(t);if(s){f=e.length;if(f!==t.length)return!1;while(f--)if(!_(e[f],t[f],n,r))return!1}else{var l=d.keys(e),c;f=l.length;if(d.keys(t).length!==f)return!1;while(f--){c=l[f];if(!d.has(t,c)||!_(e[c],t[c],n,r))return!1}}return n.pop(),r.pop(),!0};d.isEqual=function(e,t){return _(e,t)},d.isEmpty=function(e){return e==null?!0:S(e)&&(d.isArray(e)||d.isString(e)||d.isArguments(e))?e.length===0:d.keys(e).length===0},d.isElement=function(e){return!!e&&e.nodeType===1},d.isArray=f||function(e){return u.call(e)==="[object Array]"},d.isObject=function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){d["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),typeof /./!="function"&&typeof Int8Array!="object"&&(d.isFunction=function(e){return typeof e=="function"||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||u.call(e)==="[object Boolean]"},d.isNull=function(e){return e===null},d.isUndefined=function(e){return e===void 0},d.has=function(e,t){return e!=null&&a.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=b,d.propertyOf=function(e){return e==null?function(){}:function(t){return e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(e,t,n){var r=Array(Math.max(0,e));t=v(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},d.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=d.invert(D),H=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==null?"":""+e,r.test(e)?e.replace(i,t):e}};d.escape=H(D),d.unescape=H(P),d.result=function(e,t,n){var r=e==null?void 0:e[t];return r===void 0&&(r=n),d.isFunction(r)?r.call(e):r};var B=0;d.uniqueId=function(e){var t=++B+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+F[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var r=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(I,q),i=u+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(u){throw u.source=s,u}var a=function(e){return o.call(this,e,d)},f=t.variable||"obj";return a.source="function("+f+"){\n"+s+"}",a},d.chain=function(e){var t=d(e);return t._chain=!0,t};var R=function(e,t){return e._chain?d(t).chain():t};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),R(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0],R(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return R(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return""+this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return d})}.call(this),define("underscoreprivate",["require","underscore"],function(e){var t=e("underscore");return t.noConflict()}),define("Settings",["require"],function(e){return window.glaze.settings}),define("utils/Logger",["require","jquery","underscore","Settings"],function(e){var t=e("jquery"),n=e("underscore"),r=e("Settings");return{queue:[],launched:!1,console:null,log:function(e,t){t=t||!1;if(!this.launched)this.queue.push({args:arguments});else{t&&(arguments=[arguments[0]],arguments[0]+=" %c"+t.title+" %c"+"("+t.campaign_title+")",arguments.push("color: red;"),arguments.push("color: blue;"));if(!window.console||!window.console.log){var n=document.createElement("iframe");n.style.display="none",document.body.appendChild(n),this.console=n.contentWindow.console}else this.console=window.console;this.console.log.apply(null,arguments)}},launch:function(){this.launched=!0,window._glazeLogger=this,this.log("Glaze: logger available"),n.each(this.queue,n.bind(function(e){this.log.apply(this,e.args)},this))}}}),define("utils/MiscUtils",["require","jquery","underscore","Settings","utils/Logger"],function(e){var t=e("jquery"),n=e("underscore"),r=e("Settings"),i=e("utils/Logger"),s={easeInOutQuad:function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},getParameterByName:function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},eraseCookieFromAllPaths:function(e){var t=location.pathname.split("/"),n=" path=";document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var r=0;r<t.length;r++)n+=(n.substr(-1)!="/"?"/":"")+t[r],document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+n+";"},checkStorageAvailability:function(){var e="glaze_storage_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}},localStorage:function(){return this.checkStorageAvailability()?window.localStorage:{setItem:function(){},getItem:function(){},clear:function(){}}},sessionStorage:function(){return this.checkStorageAvailability()?window.sessionStorage:{setItem:function(){},getItem:function(){}}},similarity:function(e,t){var n=e,r=t;e.length<t.length&&(n=t,r=e);var i=n.length;return i==0?1:(i-this.editDistance(n,r))/parseFloat(i)},editDistance:function(e,t){e=e.toLowerCase(),t=t.toLowerCase();var n=[];for(var r=0;r<=e.length;r++){var i=r;for(var s=0;s<=t.length;s++)if(r==0)n[s]=s;else if(s>0){var o=n[s-1];e.charAt(r-1)!=t.charAt(s-1)&&(o=Math.min(Math.min(o,i),n[s])+1),n[s-1]=i,i=o}r>0&&(n[t.length]=i)}return n[t.length]},reportInitTime:function(e){t.ajax({type:"post",url:r.apiHost+r.api.responseTime,data:{response_time:e},crossDomain:!0,timeout:r.ajaxTimeout,success:function(e){}})},prepareActionCode:function(e,t,n,r,i,s,o){return t+=o?" (with Glaze)":" (without Glaze)",e?(e=e.replace(/ACTION/g,"'"+t+"'"),e=e.replace(/GLAZE_ID/g,"'"+n+"'"),e=e.replace(/GLAZE_TITLE/g,"'"+r+"'"),e=e.replace(/CAMPAIGN_ID/g,"'"+i+"'"),e=e.replace(/CAMPAIGN_TITLE/g,"'"+s+"'"),e=e.replace(/[‘’]+/g,"'"),e):""}};return s}),function(e){var t=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){t.Backbone=e(t,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore"),r;try{r=require("jquery")}catch(i){}e(t,exports,n,r)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,r){var i=e.Backbone,s=Array.prototype.slice;t.VERSION="1.2.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],a(e,this),i)};case 4:return function(e,i,s){return n[t](this[r],a(e,this),i,s)};default:return function(){var e=s.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}},u=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=o(t,i,r))})},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?f(e):n.isString(e)?function(t){return t.get(e)}:e},f=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,h=function(e,t,r,i,s){var o=0,u;if(r&&typeof r=="object"){i!==void 0&&"context"in s&&s.context===void 0&&(s.context=i);for(u=n.keys(r);o<u.length;o++)t=h(e,t,u[o],r[u[o]],s)}else if(r&&c.test(r))for(u=r.split(c);o<u.length;o++)t=e(t,u[o],i,s);else t=e(t,r,i,s);return t};l.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,r,i){e._events=h(d,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var s=e._listeners||(e._listeners={});s[i.id]=i}return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),o=s[i];if(!o){var u=this._listenId||(this._listenId=n.uniqueId("l"));o=s[i]={obj:e,objId:i,id:u,listeningTo:s,count:0}}return p(e,t,r,this,o),this};var d=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),s=r.context,o=r.ctx,u=r.listening;u&&u.count++,i.push({callback:n,context:s,ctx:s||o,listening:u})}return e};l.off=function(e,t,n){return this._events?(this._events=h(v,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=e?[e._listenId]:n.keys(i);for(var o=0;o<s.length;o++){var u=i[s[o]];if(!u)break;u.obj.off(t,r,this)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var v=function(e,t,r,i){if(!e)return;var s=0,o,u=i.context,a=i.listeners;if(!t&&!r&&!u){var f=n.keys(a);for(;s<f.length;s++)o=a[f[s]],delete a[o.id],delete o.listeningTo[o.objId];return}var l=t?[t]:n.keys(e);for(;s<l.length;s++){t=l[s];var c=e[t];if(!c)break;var h=[];for(var p=0;p<c.length;p++){var d=c[p];r&&r!==d.callback&&r!==d.callback._callback||u&&u!==d.context?h.push(d):(o=d.listening,o&&--o.count===0&&(delete a[o.id],delete o.listeningTo[o.objId]))}h.length?e[t]=h:delete e[t]}if(n.size(e))return e};l.once=function(e,t,r){var i=h(m,{},e,t,n.bind(this.off,this));return this.on(i,void 0,r)},l.listenToOnce=function(e,t,r){var i=h(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var s=e[t]=n.once(function(){i(t,s),r.apply(this,arguments)});s._callback=r}return e};l.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1),n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],s=e.all;i&&s&&(s=s.slice()),i&&y(i,r),s&&y(s,[t].concat(r))}return e},y=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var b=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(e==null)return this;var i;typeof e=="object"?(i=e,r=t):(i={})[e]=t,r||(r={});if(!this._validate(i,r))return!1;var s=r.unset,o=r.silent,u=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={});var f=this.attributes,l=this.changed,c=this._previousAttributes;for(var h in i)t=i[h],n.isEqual(f[h],t)||u.push(h),n.isEqual(c[h],t)?delete l[h]:l[h]=t,s?delete f[h]:f[h]=t;this.id=this.get(this.idAttribute);if(!o){u.length&&(this._pending=r);for(var p=0;p<u.length;p++)this.trigger("change:"+u[p],this,f[u[p]],r)}if(a)return this;if(!o)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var s=e[i];if(n.isEqual(t[i],s))continue;r[i]=s}return n.size(r)?r:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,r=e.success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},R(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0,parse:!0},r);var s=r.wait;if(i&&!s){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var o=this,u=r.success,a=this.attributes;r.success=function(e){o.attributes=a;var t=r.parse?o.parse(e,r):e;s&&(t=n.extend({},i,t));if(t&&!o.set(t,r))return!1;u&&u.call(r.context,o,e,r),o.trigger("sync",o,e,r)},R(this,r),i&&s&&(this.attributes=n.extend({},a,i));var f=this.isNew()?"create":r.patch?"patch":"update";f==="patch"&&!r.attrs&&(r.attrs=i);var l=this.sync(f,this,r);return this.attributes=a,l},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=e.wait,s=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&s(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var o=!1;return this.isNew()?n.defer(e.success):(R(this,e),o=this.sync("delete",this,e)),i||s(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||q();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.defaults({validate:!0},e))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};u(b,w,"attributes");var E=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},S={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},T=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r=Array(e.length-n),i=t.length;for(var s=0;s<r.length;s++)r[s]=e[s+n];for(s=0;s<i;s++)e[s+n]=t[s];for(s=0;s<r.length;s++)e[s+i+n]=r[s]};n.extend(E.prototype,l,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:n.clone(e);var i=this._removeModels(e,t);return!t.silent&&i&&this.trigger("update",this,t),r?i[0]:i},set:function(e,t){if(e==null)return;t=n.defaults({},t,S),t.parse&&!this._isModel(e)&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;i!=null&&(i=+i),i<0&&(i+=this.length+1);var s=[],o=[],u=[],a={},f=t.add,l=t.merge,c=t.remove,h=!1,p=this.comparator&&i==null&&t.sort!==!1,d=n.isString(this.comparator)?this.comparator:null,v;for(var m=0;m<e.length;m++){v=e[m];var g=this.get(v);if(g){if(l&&v!==g){var y=this._isModel(v)?v.attributes:v;t.parse&&(y=g.parse(y,t)),g.set(y,t),p&&!h&&(h=g.hasChanged(d))}a[g.cid]||(a[g.cid]=!0,s.push(g)),e[m]=g}else f&&(v=e[m]=this._prepareModel(v,t),v&&(o.push(v),this._addReference(v,t),a[v.cid]=!0,s.push(v)))}if(c){for(m=0;m<this.length;m++)v=this.models[m],a[v.cid]||u.push(v);u.length&&this._removeModels(u,t)}var b=!1,w=!p&&f&&c;s.length&&w?(b=this.length!=s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,T(this.models,s,0),this.length=this.models.length):o.length&&(p&&(h=!0),T(this.models,o,i==null?this.length:i),this.length=this.models.length),h&&this.sort({silent:!0});if(!t.silent){for(m=0;m<o.length;m++)i!=null&&(t.index=i+m),v=o[m],v.trigger("add",v,this,t);(h||b)&&this.trigger("sort",this,t),(o.length||u.length)&&this.trigger("update",this,t)}return r?e[0]:e},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return s.apply(this.models,arguments)},get:function(e){if(e==null)return void 0;var t=this.modelId(this._isModel(e)?e.attributes:e);return this._byId[e]||this._byId[t]||this._byId[e.cid]},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),r===1||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},R(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var r=t.wait;e=this._prepareModel(e,t);if(!e)return!1;r||this.add(e,t);var i=this,s=t.success;return t.success=function(e,t,n){r&&i.add(e,n),s&&s.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=this.get(e[r]);if(!i)continue;var s=this.indexOf(i);this.models.splice(s,1),this.length--,t.silent||(t.index=s,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}return n.length?n:!1},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r);if(e==="change"){var i=this.modelId(t.previousAttributes()),s=this.modelId(t.attributes);i!==s&&(i!=null&&delete this._byId[i],s!=null&&(this._byId[s]=t))}this.trigger.apply(this,arguments)}});var N={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};u(E,N,"models");var C=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,L)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];n.extend(C.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){e||(e=n.result(this,"events"));if(!e)return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[r]);if(!r)continue;var i=t.match(k);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=A[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||q()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1);var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.call(i.context,e,t,n)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var O=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,_=/(\(\?)?:\w+/g,D=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(O.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(M,"(?:$1)?").replace(_,function(e,t){return t?e:"([^/?]+)"}).replace(D,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var H=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,F=/#.*$/;H.started=!1,n.extend(H.prototype,l,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return e.charAt(0)==="/"?e.slice(1):e},getFragment:function(e){return e==null&&(this._usePushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(B,"")},start:function(e){if(H.started)throw new Error("Backbone.history has already been started");H.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!this.history&&!!this.history.pushState,this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(j,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var s=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this._usePushState?s("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?s("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),H.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})):!1},navigate:function(e,t){if(!H.started)return!1;if(!t||t===!0)t={trigger:!!t};e=this.getFragment(e||"");var n=this.root;if(e===""||e.charAt(0)==="?")n=n.slice(0,-1)||"/";var r=n+e;e=this.decodeFragment(e.replace(F,""));if(this.fragment===e)return;this.fragment=e;if(this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);this._updateHash(this.location,e,t.replace);if(this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new H;var I=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};b.extend=E.extend=O.extend=C.extend=H.extend=I;var q=function(){throw new Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}),define("AppModel",["require","underscore","backbone","utils/MiscUtils"],function(require){var _=require("underscore"),Backbone=require("backbone"),MiscUtils=require("utils/MiscUtils"),AppModel=Backbone.Model.extend({pages:[],user:null,preview:!1,website:null,language:null,lastSeenCampaignId:null,shapes:[],isTrackingAllowed:function(){var e=this.get("website").ip_filters?this.get("website").ip_filters.split(","):[];return!_.some(e,_.bind(function(e){return e=e.replace(" ",""),e===this.get("settings").ip},this))&&!this.get("previewGlaze")},prepareData:function(e){return e.result&&(_.each(e.result.glazes,function(e){e.campaign_settings||(e.campaign_settings="{}"),_.each(e.variants,function(e){e.settings||(e.settings="{}")})}),_.each(e.result.website.audiences,function(e){e.code=JSON.parse(e.code)})),e},selectWebsiteLang:function(){if(this.get("website")&&this.get("website").languages&&_.isArray(this.get("website").languages)){var lang;lang=_.find(this.get("website").languages,function(lang){var check;try{check=eval(lang.condition)}catch(e){console.warn("Error in Website Language Condition: "+lang.slug),check=!1}return check}),lang||(lang=_.find(this.get("website").languages,function(e){return e.is_default})),lang&&this.set("language",lang)}},extendSettings:function(e,t){return t=t||{},t.restart||(t.restart_appearance=null,t.restart_behavior=null,t.restart_position=null,t.restart_tab_color=null,t.restart_text=null,t.restart_text_color=null,t.restart_text_font=null,t.restart_text_size=null),_.each(e,function(e,n){!t[n]&&n!=="css_rules"&&(t[n]=e)}),t},getSortedGlazes:function(e){e=e||this.lastSeenCampaignId;var t=_(this.get("glazes")).chain().sortBy(function(e){return parseInt(e.position)}).sortBy(function(e){return parseInt(e.priority)}).sortBy(function(t){if(t.preview)return-1e3;if(MiscUtils.sessionStorage().getItem("preview_campaign")&&t.campaign_id==MiscUtils.sessionStorage().getItem("preview_campaign"))return t.previewByCampaign=!0,-990;if(e==t.campaign_id)return-900}).value();return t},getNextGlaze:function(e){var t=_.find(this.get("glazes"),function(t){return Number(t.id)===Number(e)}),n=_.filter(this.getSortedGlazes(),function(e){return e.campaign_id===t.campaign_id}),r=_.findIndex(n,function(t){return parseInt(t.id)===parseInt(e)});return n&&n.length&&n[r+1]?n[r+1]:null},getPrevGlaze:function(e){var t=_.find(this.get("glazes"),function(t){return Number(t.id)===Number(e)}),n=_.filter(this.getSortedGlazes(),function(e){return e.campaign_id===t.campaign_id}),r=_.findIndex(n,function(t){return parseInt(t.id)===parseInt(e)});return n&&n.length&&n[r-1]?n[r-1]:null},getScreenSizeById:function(e){return _.find(this.get("screen_sizes"),function(t){return Number(t.id)===Number(e)})||null}});return new AppModel}),define("utils/Events",["require","jquery","underscore","Settings"],function(e){var t=e("jquery"),n=e("underscore"),r=e("Settings");return{dispatch:function(e,t){t=t||null;var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!0,!0,t),window.dispatchEvent(n)}}}),define("utils/TrackingManager",["require","jquery","underscore","utils/Logger","utils/MiscUtils","utils/Events","Settings","AppModel"],function(require){var $=require("jquery"),_=require("underscore"),Logger=require("utils/Logger"),MiscUtils=require("utils/MiscUtils"),Events=require("utils/Events"),Settings=require("Settings");return{appData:null,browseTimeStart:null,expired:null,data:null,initialize:function(){this.appData=require("AppModel");var e=MiscUtils.localStorage().getItem(Settings.glazeDataStorageKey)||"{}";this.data=JSON.parse(e),this.initTTL(),this.startTimeTracking(),this.setAzure()},initTTL:function(){var e=(new Date).getTime();this.data.ca?e-this.data.ca>Settings.glazeDataStorageTTL&&(Logger.log("Glaze: glaze data has expired, renew"),this.expired=!0,this.data={ca:e}):this.data.ca=e},getGlazeSid:function(){return this.expired?"":MiscUtils.localStorage().getItem("_glz_sid")||""},getGlazeSSid:function(){return this.expired?"":MiscUtils.sessionStorage().getItem("_glz_ssid")||""},checkPageConversion:function(){var e=(window.location.pathname+window.location.search).substr(1),t="/"+e;_.each(this.data.wc,_.bind(function(n,r){if(n.type==="PAGE_VISIT"){var i=!1;_.each(n.data,function(n){var r;switch(n.type){case"url_match":if(e===n.value||t===n.value)i=!0;break;case"url_match_pattern":r=new RegExp(n.value.replace("*",".*"),"i");if(e.match(r)||t.match(r))i=!0;break;case"url_contains":if(e.match(n.value)||t.match(n.value))i=!0;break;case"url_start_with":r=new RegExp("^"+n.value,"i");if(e.match(r)||t.match(r))i=!0;break;case"url_ends_width":r=new RegExp(n.value+"$","i");if(e.match(r)||t.match(r))i=!0;break;case"url_matches_regex":r=new RegExp(n.value,"i");if(e.match(r)||t.match(r))i=!0}}),i&&this.trackConversion(n,r)}},this))},checkEngagementConversion:function(e,t,n){var r=!1;return _.each(this.data.wc,_.bind(function(n,i){if(n.type==="ENGAGEMENT"&&e==i){var s=!!_.find(n.data,function(e){return e.type==="engagement_type"&&e.value===t});s&&(this.trackConversion(n,i,"no"),r=!0)}},this)),r},checkCustomConversion:function(e){_.each(this.data.wc,_.bind(function(t,n){t.type=="CUSTOM"&&e==n&&this.trackConversion(t,n,"yes")},this))},getSelectorVariant:function(e,t,n){var r=n.selectSelectorVariant(t.variants);if(r){var i=r.screen_size_id?this.appData.getScreenSizeById(r.screen_size_id).title:"ALL";Logger.log("Glaze: goal selector applied - "+t.name+" ("+i+")")}t=r.code;var s=e.get("promoted_products")||[],o=null;return t?(s=_.sortBy(s,function(e){return Number(e.priority||500)}),_.each(s,_.bind(function(r){if(!o){var i=[{placeholder:"{PROMOTED_PRODUCT.PID}",value:r.pid}],s=t;_.each(i,function(e){s=s.replace(e.placeholder,e.value)}),s=this.prepareSelector(s,e),$(s).length&&n.isBindedElementVisible(s)&&(o=s)}},this)),o=this.prepareSelector(o||t,e),o||null):null},prepareSelector:function(selector,glazeModel){selector.match(/{DFIELD:[^}]+\}/)&&(selector=selector.replace(/{DFIELD:[^}]+\}/,glazeModel.get("page_template_selector_dynamic_field")));if(selector.match(/JS:(.*):ENDJS/))try{selector=selector.replace(/JS:.*:ENDJS/,eval(selector.match(/JS:(.*):ENDJS/)[1]))}catch(e){console.warn("Glaze: error evaluating glaze goal selector "+selector)}return selector=selector.replace("{","").replace("}",""),selector},setWaitingConversion:function(e,t,n){if(!e.get("goal"))return;if(n.abHasGlaze!=0&&this.isConverted(e.get("id"),e.get("conversion_round"))){Logger.log("Glaze: already converted glaze "+e.get("title"));return}Logger.log("Glaze: waiting for conversion for glaze "+e.get("title"));var r=_.pick(e.get("goal"),"id","duration","type","conversion_value","data","selector"),i=n._getSettings();r.selector&&(r.selector=this.getSelectorVariant(e,r.selector,n));var s=i.conversion_action_js;s&&(s=s.replace(/GLAZE_ID/g,"'"+e.get("id")+"'"),s=s.replace(/GLAZE_TITLE/g,"'"+e.get("title")+"'"),s=s.replace(/CAMPAIGN_ID/g,"'"+e.get("campaign_id")+"'"),s=s.replace(/[‘’]+/g,"'"));var o=i.universal_action_js;o&&(o=MiscUtils.prepareActionCode(o,"GLAZE_CONVERT",e.get("id"),e.get("title"),e.get("campaign_id"),e.get("campaign_title"),n.abHasGlaze)),r.data=JSON.parse(r.data)||{},r.title=e.get("title"),r.campaign_id=e.get("campaign_id"),r.campaign_title=e.get("campaign_title"),r.glz_shown=t,r.vtc=0,r.time=new Date,r.cr=e.get("conversion_round"),r.page_url_hash=this.appData.get("page_url_hash"),r.action=s,r.universal_action=o,this.data.wc||(this.data.wc={}),r.type==="ENGAGEMENT"&&_.find(r.data,function(e){return e.type==="engagement_type"&&e.value==="void"})&&(r.details={slug:e.get("slug"),xpath:e.get("variant").getXpath(0),selector:e.get("variant").getSelector(0),shapeOffset:e.get("variant").get("shapeOffset"),scaleOffset:e.get("variant").get("scaleOffset")}),this.data.wc[e.get("id")]=r,this.save()},setWaitingVTC:function(e){this.data.wc||(this.data.wc={});var t=_.find(this.data.wc,function(t,n){return n==e.get("id")});t&&(t.vtc=1,this.data.wc[e.get("id")]=t,Logger.log("Glaze: waiting for vtc for glaze "+e.get("title")),this.save())},checkVoidVTC:function(e,t){var n=(window.location.pathname+window.location.search).substr(1),r="/"+n;_.each(this.data.wc,_.bind(function(i,s){if(_.find(e,function(e){return e==s}))return!1;if(i.type!="ENGAGEMENT"||!_.find(i.data,function(e){return e.type=="engagement_type"&&e.value=="void"}))return!1;if(!i.details||n!=i.details.slug&&r!=i.details.slug)return!1;var o=$(i.details.selector).get(0),u=$(o),a={};if(!u.length)return;u.is(":visible")&&u.outerWidth()>0&&u.outerHeight()>0&&(a.left=u.offset().left+(i.details.shapeOffset.left?i.details.shapeOffset.left:0),a.top=u.offset().top+(i.details.shapeOffset.top?i.details.shapeOffset.top:0),a.right=u.offset().left+u.outerWidth(),a.bottom=u.offset().top+u.outerHeight()),a.width=a.right-a.left,a.height=a.bottom-a.top,t.pageX>a.left&&t.pageX<a.right&&t.pageY>a.top&&t.pageY<a.bottom&&this.trackConversion(i,s,"yes")},this))},checkClickElement:function(e){var t=$(e.target);_.each(this.data.wc,_.bind(function(e,n){if(e.type!=="CLICK_ELEMENT"||!e.data)return!1;var r=_.find(e.data,function(e){return e.type==="selector"});!r.value&&e.selector&&(r.value=e.selector);var i=!1;t.parents().each(function(){$(this).is(r.value)&&(i=!0)}),(t.is(r.value)||i)&&this.trackConversion(e,n,"yes")},this))},save:function(){if(!this.appData.isTrackingAllowed())return;MiscUtils.localStorage().setItem("glz_tst_var",JSON.stringify),MiscUtils.localStorage().setItem(Settings.glazeDataStorageKey,JSON.stringify(this.data))},trackConversion:function(conversion,glaze_id,can_be_vtc){if(!this.appData.isTrackingAllowed())return;can_be_vtc=can_be_vtc||"yes";var data={glaze_id:glaze_id,glz_shown:conversion.glz_shown,_glz_psid:this.appData.get("_glz_psid"),can_be_vtc:can_be_vtc,page_url_hash:conversion.page_url_hash,value:conversion.conversion_value};$.ajax({type:"post",url:Settings.apiHost+(conversion.vtc==0||conversion.glz_shown=="no"?Settings.api.trackingConversion:Settings.api.trackingVtc),async:!1,data:data,success:_.bind(function(data){conversion.vtc==0||conversion.glz_shown=="no"?Logger.log("Glaze tracking: conversion for glaze "+conversion.title):Logger.log("Glaze tracking: vtc for glaze "+conversion.title),conversion.action&&(Logger.log("Glaze: execute action on glaze conversion "+conversion.action),eval(conversion.action)),conversion.universal_action&&(Logger.log("Glaze: execute single tag action on glaze conversion "+conversion.universal_action),eval(conversion.universal_action)),Events.dispatch("glazeConverted",{glaze_id:glaze_id,campaign_id:conversion.campaign_id,campaign_title:conversion.campaign_title,glaze_title:conversion.title,is_vtc:conversion.vtc!=0&&conversion.glz_shown!=="no"}),this.setConversion(glaze_id)},this)})},setConversion:function(e){var t=this.data.wc[e];this.data.cg||(this.data.cg={}),this.data.cg[e]={ts:new Date,dt:t.duration,cr:t.cr},delete this.data.wc[e],this.save()},setAB:function(e,t){this.data.ab||(this.data.ab={}),this.data.ab[e]=t,this.save()},getAB:function(e){return this.data.ab?this.data.ab[e]||null:null},setViewedGlazesNumber:function(e,t){this.data.gn||(this.data.gn={}),this.data.gn[e]=t,this.save()},getViewedGlazesNumber:function(e){return this.data.gn?this.data.gn[e]||null:null},isConverted:function(e,t){return _.find(this.data.cg,function(n,r){return r==e&&(typeof t=="undefined"||n.cr==t)})},isImpressed:function(e){return _.find(this.data.ig,function(t,n){return n==e})},getImpressionsNumber:function(e){this.data.ig||(this.data.ig={});var t=_.find(this.data.ig,function(t,n){return n==e});return t?t.num:0},setImpression:function(e,t){this.data.ig||(this.data.ig={}),this.data.ic||(this.data.ic={}),this.data.ig[e]={ts:new Date,cid:t,num:this.data.ig[e]?this.data.ig[e].num+1:1},this.data.ic[t]=this.data.ic[t]?this.data.ic[t]+1:1,this.save()},hasSeenCampaign:function(e,t){this.data.ic||(this.data.ic={});var n=!!this.data.ic[e];if(n&&parseInt(t)>0){var r=_.filter(this.data.ig,function(t){return t.cid===e});r=_.sortBy(r,function(e){return e.ts});if(!r.length)n=!1;else{var i=((new Date).getTime()-(new Date(r[0].ts)).getTime())/1e3;n=i>parseInt(t)*60*60}}return n},getLastSeenCampaignId:function(){this.data.ig||(this.data.ig={});var e=_.max(this.data.ig,function(e){return(new Date(e.ts)).getTime()});return e?e.cid:0},notifyNoElement:function(e,t){if(!this.appData.isTrackingAllowed()||this.appData.get("website").notify!="yes")return;$.ajax({type:"post",url:this.appData.get("platform_host")+Settings.api.notification,data:{glaze_id:e,element:t},success:_.bind(function(e){},this)})},trackPage:function(){if(!this.appData.isTrackingAllowed())return;var e=window.location.pathname+window.location.search||"/";this.data.pv||(this.data.pv={}),this.data.pv[e]||(this.data.pv[e]=[]),this.currentPageTime=(new Date).getTime(),this.data.pv[e][this.data.pv[e].length]=this.currentPageTime,this.save()},isPageVisited:function(e,t){var n=this.data.pv||{};return _.find(n,function(n,r){var i=!1;switch(t){case"simple":e==r&&(i=!0);break;case"exact":e==r&&(i=!0);break;case"substring":i=!!r.match(e);break;case"regular":i=!!r.match(e)}return i})},pagesVisited:function(){var e=this.data.pv||{};return _.reduce(e,function(e,t){return e+=t.length,e},0)},visitedPageRecentTime:function(e,t,n){var r=this.data.pv||{};return _.find(r,_.bind(function(r,i){var s=!1,o=_.filter(r,_.bind(function(e){return e!=this.currentPageTime},this));if(!o||!o.length)return!1;switch(t){case"simple":e==i&&(s=!0);break;case"exact":e==i&&(s=!0);break;case"substring":s=!!i.match(e);break;case"regular":s=!!i.match(e)}if(n){var u=(new Date(n+" 00:00")).getTime();s=s&&_.find(r,function(e){return e>=u})}return s},this))},startTimeTracking:function(){this.browseTimeStart=(new Date).getTime(),$(window).on("unload.glaze",_.bind(function(){window._glazePT||this.saveTimeTracking()},this))},saveTimeTracking:function(){var e=!MiscUtils.localStorage().getItem(Settings.glazeDataStorageKey);e||(this.data.bt=parseInt(this.data.bt||0),this.data.bt+=(new Date).getTime()-this.browseTimeStart,this.browseTimeStart=(new Date).getTime(),this.save())},checkBrowseTime:function(e){return this.saveTimeTracking(),this.data.bt>=e*1e3},setAzure:function(){this.appData.get("use_azure")==1&&$.ajaxPrefilter(function(e,t,n){e.data=e.data||"",e.data="use_azure=1&"+e.data})},setRestartCampaign:function(e){this.data.rc||(this.data.rc=[]),this.data.rc=_.union(this.data.rc,[e]),this.save()},isCampaignClosed:function(e){return this.data.rc||(this.data.rc=[]),!!_.find(this.data.rc,function(t){return t==e})},setClosedCampaign:function(e){this.data.cc||(this.data.cc={}),this.data.cc[e]=this.data.cc[e]?this.data.cc[e]+1:1,this.save()},getClosedCampaignTimes:function(e){return this.data.cc||(this.data.cc={}),this.data.cc[e]||0}}}),function(e,t){e("mobiledetect",[],function(){function i(e,t){return e!=null&&t!=null&&e.toLowerCase()===t.toLowerCase()}function s(e,t){var n,r,i=e.length;if(!i||!t)return!1;n=t.toLowerCase();for(r=0;r<i;++r)if(n===e[r].toLowerCase())return!0;return!1}function o(e){for(var t in e)n.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function u(e,t){this.ua=e||"",this._cache={},this.maxPhoneWidth=t||600}var e={};e.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"Samsung|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T360",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K017 |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris E10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.*\\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",Hudl:"Hudl HT7S3",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bJolla\\b|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},e.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var n=Object.prototype.hasOwnProperty,r;return e.FALLBACK_PHONE="UnknownPhone",e.FALLBACK_TABLET="UnknownTablet",e.FALLBACK_MOBILE="UnknownMobile",r="isArray"in Array?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},function(){var i,s,u,a,f,l,c=e.mobileDetectRules;for(i in c.props)if(n.call(c.props,i)){s=c.props[i],r(s)||(s=[s]),f=s.length;for(a=0;a<f;++a)u=s[a],l=u.indexOf("[VER]"),l>=0&&(u=u.substring(0,l)+"([\\w._\\+]+)"+u.substring(l+5)),s[a]=new RegExp(u,"i");c.props[i]=s}o(c.oss),o(c.phones),o(c.tablets),o(c.uas),o(c.utils),c.oss0={WindowsPhoneOS:c.oss.WindowsPhoneOS,WindowsMobileOS:c.oss.WindowsMobileOS}}(),e.findMatch=function(e,t){for(var r in e)if(n.call(e,r)&&e[r].test(t))return r;return null},e.findMatches=function(e,t){var r=[];for(var i in e)n.call(e,i)&&e[i].test(t)&&r.push(i);return r},e.getVersionStr=function(t,r){var i=e.mobileDetectRules.props,s,o,u,a;if(n.call(i,t)){s=i[t],u=s.length;for(o=0;o<u;++o){a=s[o].exec(r);if(a!==null)return a[1]}}return null},e.getVersion=function(t,n){var r=e.getVersionStr(t,n);return r?e.prepareVersionNo(r):NaN},e.prepareVersionNo=function(e){var t;return t=e.split(/[a-z._ \/\-]/i),t.length===1&&(e=t[0]),t.length>1&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},e.isMobileFallback=function(t){return e.detectMobileBrowsers.fullPattern.test(t)||e.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},e.isTabletFallback=function(t){return e.detectMobileBrowsers.tabletPattern.test(t)},e.prepareDetectionCache=function(n,r,i){if(n.mobile!==t)return;var s,o,a;o=e.findMatch(e.mobileDetectRules.tablets,r);if(o){n.mobile=n.tablet=o,n.phone=null;return}s=e.findMatch(e.mobileDetectRules.phones,r);if(s){n.mobile=n.phone=s,n.tablet=null;return}e.isMobileFallback(r)?(a=u.isPhoneSized(i),a===t?(n.mobile=e.FALLBACK_MOBILE,n.tablet=n.phone=null):a?(n.mobile=n.phone=e.FALLBACK_PHONE,n.tablet=null):(n.mobile=n.tablet=e.FALLBACK_TABLET,n.phone=null)):e.isTabletFallback(r)?(n.mobile=n.tablet=e.FALLBACK_TABLET,n.phone=null):n.mobile=n.tablet=n.phone=null},e.mobileGrade=function(e){var t=e.mobile()!==null;return e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")?"B":e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile")<=5.2?"C":"C"},e.detectOS=function(t){return e.findMatch(e.mobileDetectRules.oss0,t)||e.findMatch(e.mobileDetectRules.oss,t)},e.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},u.prototype={constructor:u,mobile:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return e.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===t&&(this._cache.userAgent=e.findMatch(e.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===t&&(this._cache.userAgents=e.findMatches(e.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===t&&(this._cache.os=e.detectOS(this.ua)),this._cache.os},version:function(t){return e.getVersion(t,this.ua)},versionStr:function(t){return e.getVersionStr(t,this.ua)},is:function(t){return s(this.userAgents(),t)||i(t,this.os())||i(t,this.phone())||i(t,this.tablet())||s(e.findMatches(e.mobileDetectRules.utils,this.ua),t)},match:function(e){return e instanceof RegExp||(e=new RegExp(e,"i")),e.test(this.ua)},isPhoneSized:function(e){return u.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===t&&(this._cache.grade=e.mobileGrade(this)),this._cache.grade}},typeof window!="undefined"&&window.screen?u.isPhoneSized=function(n){return n<0?t:e.getDeviceSmallerSide()<=n}:u.isPhoneSized=function(){},u._impl=e,u})}(function(e){if(typeof module!="undefined"&&module.exports)return function(e){module.exports=e()};if(typeof define=="function"&&define.amd)return define;if(typeof window!="undefined")return function(e){window.MobileDetect=e()};throw new Error("unknown environment")}()),define("Setup",["require","jquery","underscore","Settings","utils/MiscUtils","AppModel","utils/Logger","utils/TrackingManager","mobiledetect"],function(e){var t=e("jquery"),n=e("underscore"),r=e("Settings"),i=e("utils/MiscUtils"),s=e("AppModel"),o=e("utils/Logger"),u=e("utils/TrackingManager"),a=e("mobiledetect"),f=new a(window.navigator.userAgent);return function(e){if(!!window._glazeLibraryInit){console.warn("Glaze: snippet has been already started");return}window._glazeLibraryInit=!0;if(f.phone()&&window.innerWidth>window.innerHeight)return console.warn("Glaze: mobile landscape mode detected. Glaze has stopped."),this;typeof window.glaze.appData=="string"&&(window.glaze.appData=JSON.parse(window.glaze.appData));var r=s.prepareData(window.glaze.appData);s.set(r.result),s.selectWebsiteLang();if(r.result.previewGlaze&&!t(".glaze-preview-preloader").length){var a=document.createElement("div");a.className="glaze-preview-preloader",a.innerHTML="Glaze preview: loading...",document.body.appendChild(a)}i.localStorage().setItem("_glz_sid",r.result._glz_sid),i.sessionStorage().setItem("_glz_ssid",r.result._glz_ssid),u.initialize(),window.glazeAPI.addConversion=function(e,t){u.checkCustomConversion(t)},u.checkPageConversion();if(typeof [].reduce(function(){},0)!="number"||typeof "".match!="function"){var l=document.createElement("iframe");document.documentElement.appendChild(l);var c=l.contentWindow;Array.prototype.reduce=c.Array.prototype.reduce,String.prototype.match=c.String.prototype.match,Function.prototype.bind=c.Function.prototype.bind,document.documentElement.removeChild(l)}window.glaze.logger=o,e&&n.isFunction(e)&&e(s)}}),function(e){"function"==typeof define&&define.amd?define("jqueryUI",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o)):!1):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function r(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(n=i.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(s&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;s.length>i;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var r=0,i=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;null!=(i=n[s]);s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=s,t}}(),void 0):(a[t]=r,void 0)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,s=i.call(arguments,1),o=0,u=s.length;u>o;o++)for(n in s[o])r=s[o][n],s[o].hasOwnProperty(n)&&void 0!==r&&(t[n]=e.isPlainObject(r)?e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,u=i.call(arguments,1),a=this;return o?this.each(function(){var n,i=e.data(this,r);return"instance"===s?(a=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,u),n!==i&&void 0!==n?(a=n&&n.jquery?a.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'")}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),s=0;r.length-1>s;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var f=r.match(/^([\w:-]*)\s*(.*)$/),l=f[1]+s.eventNamespace,c=f[2];c?i.delegate(c,l,u):n.bind(l,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.widget;var s=!1;e(document).mouseup(function(){s=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,i="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!i&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),s=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===i.containment?(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):i.containment.constructor===Array?(this.containment=i.containment,void 0):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;return u&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(a=this.originalPageX),"x"===o.axis&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];o!==u&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--)a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height,a-v>g||m>f+v||l-v>b||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)?(r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(i=v>=Math.abs(l-b),s=v>=Math.abs(c-y),o=v>=Math.abs(a-g),u=v>=Math.abs(f-m),i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,"outer"!==d.snapMode&&(i=v>=Math.abs(l-y),s=v>=Math.abs(c-b),o=v>=Math.abs(a-m),u=v>=Math.abs(f-g),i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return s>=f&&c>=u&&o>=l&&h>=a;case"intersect":return s+t.helperProportions.width/2>f&&c>u-t.helperProportions.width/2&&o+t.helperProportions.height/2>l&&h>a-t.helperProportions.height/2;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&h>=o||a>=l&&h>=a||l>o&&a>h)&&(s>=f&&c>=s||u>=f&&c>=u||f>s&&u>c);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;s.length>r;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;u.length>i;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}))}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,n),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];return this._updatePrevProperties(),a?(n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),s.maxWidth>n&&(s.maxWidth=n),s.maxHeight>i&&(s.maxHeight=i)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;h&&(a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u}))},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a="number"==typeof r.grid?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&p>r.maxWidth,m=r.maxHeight&&d>r.maxHeight,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l),/^(se|s|e)$/.test(u)?(n.size.width=p,n.size.height=d):/^(ne)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.top=o.top-h):/^(sw)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.left=o.left-c):((0>=d-l||0>=p-f)&&(t=n._getPaddingPlusBorderDimensions(this)),d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p))}}),e.ui.resizable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r?!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c="x"===this.options.axis||r+f>u&&a>r+f,h="y"===this.options.axis||t+l>s&&o>t+l,p=c&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>u&&a>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){u.push(this)}var r,i,s,o,u=[],a=[],f=this._connectWith();if(f&&t)for(r=f.length-1;r>=0;r--)for(s=e(f[r],this.document[0]),i=s.length-1;i>=0;i--)o=e.data(s[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=a.length-1;r>=0;r--)a[r][0].each(n);return e(u)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n],this.document[0]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),i>Math.abs(t[c]-a)&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;i.length>r;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}});var o="ui-effects-",u=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(u),function(){function t(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function n(t,n){var r,s,o={};for(r in n)s=n[r],t[r]!==s&&(i[r]||(e.fx.step[r]||!isNaN(parseFloat(s)))&&(o[r]=s));return o}var r=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(u.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var n=e(this);return{el:n,start:t(this)}}),s=function(){e.each(r,function(e,t){i[t]&&o[t+"Class"](i[t])})},s(),f=f.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return"boolean"==typeof r||void 0===r?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function t(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(o+t[n],e[0].style[t[n]])},restore:function(e,t){var n,r;for(r=0;t.length>r;r++)null!==t[r]&&(n=e.data(o+t[r]),void 0===n&&(n=""),e.css(t[r],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=r.complete,u=r.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),n()):o.call(i[0],r,n)}var r=t.apply(this,arguments),i=r.mode,s=r.queue,o=e.effects.effect[r.effect];return e.fx.off||!o?i?this[i](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):s===!1?this.each(n):this.queue(s||"fx",n)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||"boolean"==typeof r)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,n){var r,i,s,o=e(this),u=/up|down|vertical/,a=/up|left|vertical|horizontal/,f=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),c=t.direction||"up",h=u.test(c),p=h?"height":"width",d=h?"top":"left",v=a.test(c),m={},g="show"===l;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),f):e.effects.save(o,f),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i=r[p](),s=parseFloat(r.css(d))||0,m[p]=g?i:0,v||(o.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),m[d]=g?s:i+s),g&&(r.css(p,0),v||r.css(d,s+i)),r.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===l&&o.hide(),e.effects.restore(o,f),e.effects.removeWrapper(o),n()}})},e.effects.effect.bounce=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"effect"),f="hide"===a,l="show"===a,c=t.direction||"up",h=t.distance,p=t.times||5,d=2*p+(l||f?1:0),v=t.duration/d,m=t.easing,g="up"===c||"down"===c?"top":"left",y="up"===c||"left"===c,b=o.queue(),w=b.length;for((l||f)&&u.push("opacity"),e.effects.save(o,u),o.show(),e.effects.createWrapper(o),h||(h=o["top"===g?"outerHeight":"outerWidth"]()/3),l&&(s={opacity:1},s[g]=0,o.css("opacity",0).css(g,y?2*-h:2*h).animate(s,v,m)),f&&(h/=Math.pow(2,p-1)),s={},s[g]=0,r=0;p>r;r++)i={},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m).animate(s,v,m),h=f?2*h:h/2;f&&(i={opacity:0},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m)),o.queue(function(){f&&o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,d+1))),o.dequeue()},e.effects.effect.clip=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),f="show"===a,l=t.direction||"vertical",c="vertical"===l,h=c?"height":"width",p=c?"top":"left",d={};e.effects.save(o,u),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i="IMG"===o[0].tagName?r:o,s=i[h](),f&&(i.css(h,0),i.css(p,s/2)),d[h]=f?s:0,d[p]=f?0:s/2,i.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}})},e.effects.effect.drop=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(i,t.mode||"hide"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"pos":"neg",c={opacity:u?1:0};e.effects.save(i,s),i.show(),e.effects.createWrapper(i),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0)/2,u&&i.css("opacity",0).css(f,"pos"===l?-r:r),c[f]=(u?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.explode=function(t,n){function r(){b.push(this),b.length===c*h&&i()}function i(){p.css({visibility:"visible"}),e(b).remove(),v||p.hide(),n()}var s,o,u,a,f,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=c,p=e(this),d=e.effects.setMode(p,t.mode||"hide"),v="show"===d,m=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/c),b=[];for(s=0;c>s;s++)for(a=m.top+s*y,l=s-(c-1)/2,o=0;h>o;o++)u=m.left+o*g,f=o-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:y,left:u+(v?f*g:0),top:a+(v?l*y:0),opacity:v?0:1}).animate({left:u+(v?0:f*g),top:a+(v?0:l*y),opacity:v?1:0},t.duration||500,t.easing,r)},e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},e.effects.effect.fold=function(t,n){var r,i,s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a="show"===u,f="hide"===u,l=t.size||15,c=/([0-9]+)%/.exec(l),h=!!t.horizFirst,p=a!==h,d=p?["width","height"]:["height","width"],v=t.duration/2,m={},g={};e.effects.save(s,o),s.show(),r=e.effects.createWrapper(s).css({overflow:"hidden"}),i=p?[r.width(),r.height()]:[r.height(),r.width()],c&&(l=parseInt(c[1],10)/100*i[f?0:1]),a&&r.css(h?{height:0,width:l}:{height:l,width:0}),m[d[0]]=a?i[0]:l,g[d[1]]=a?i[1]:0,r.animate(m,v,t.easing).animate(g,v,t.easing,function(){f&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),n()})},e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};"hide"===s&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,i),n()}})},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||"effect"!==p,v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||("show"===p?b:r),o.to=t.to||("hide"===p?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}},("box"===v||"both"===v)&&(s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to))),("content"===v||"both"===v)&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from),("content"===v||"both"===v)&&(c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),d||("static"===g?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return"auto"===n?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:"horizontal"!==u?o/100:1,x:"vertical"!==u?o/100:1};i.effect="size",i.queue=!1,i.complete=n,"effect"!==s&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&("show"===s&&(i.from.opacity=0,i.to.opacity=1),"hide"===s&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s="hide"===i,o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.pulsate=function(t,n){var r,i=e(this),s=e.effects.setMode(i,t.mode||"show"),o="show"===s,u="hide"===s,a=o||"hide"===s,f=2*(t.times||5)+(a?1:0),l=t.duration/f,c=0,h=i.queue(),p=h.length;for((o||!i.is(":visible"))&&(i.css("opacity",0).show(),c=1),r=1;f>r;r++)i.animate({opacity:c},l,t.easing),c=1-c;i.animate({opacity:c},l,t.easing),i.queue(function(){u&&i.hide(),n()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,f+1))),i.dequeue()},e.effects.effect.shake=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(i,t.mode||"effect"),u=t.direction||"left",a=t.distance||20,f=t.times||3,l=2*f+1,c=Math.round(t.duration/l),h="up"===u||"down"===u?"top":"left",p="up"===u||"left"===u,d={},v={},m={},g=i.queue(),y=g.length;for(e.effects.save(i,s),i.show(),e.effects.createWrapper(i),d[h]=(p?"-=":"+=")+a,v[h]=(p?"+=":"-=")+2*a,m[h]=(p?"-=":"+=")+2*a,i.animate(d,c,t.easing),r=1;f>r;r++)i.animate(v,c,t.easing).animate(m,c,t.easing);i.animate(v,c,t.easing).animate(d,c/2,t.easing).queue(function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,l+1))),i.dequeue()},e.effects.effect.slide=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(i,t.mode||"show"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a,c={};e.effects.save(i,s),i.show(),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(i).css({overflow:"hidden"}),u&&i.css(f,l?isNaN(r)?"-"+r:-r:r),c[f]=(u?l?"+=":"-=":l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s="fixed"===i.css("position"),o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}}),define("utils/PostMessageManager",["require","jquery","underscore","utils/Logger","backbone"],function(e){var t=e("jquery"),n=e("underscore"),r=e("utils/Logger"),i=e("backbone"),s=i.Model.extend({initialize:function(){window.addEventListener("message",n.bind(this.receiveMessage,this))},receiveMessage:function(e){},youTubeCommand:function(e,t,n){e.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:n||[]}),"*")},vimeoCommand:function(e,t,n){e.contentWindow.postMessage(JSON.stringify({method:t,value:n||[]}),"*")},dailyMotionCommand:function(e,t,n){e.contentWindow.postMessage(JSON.stringify({command:t,parameters:n||[]}),"*")}});return new s}),define("utils/VideoPlayer",["require","jquery","underscore","backbone","utils/Logger","utils/PostMessageManager"],function(e){var t=e("jquery"),n=e("underscore"),r=e("backbone"),i=e("utils/Logger"),s=e("utils/PostMessageManager");return r.Model.extend({parentView:null,queue:[],youtubePlayer:null,defaults:{type:"youtube",playing:null,paused:null,ready:!1},initialize:function(){r.Model.prototype.initialize.apply(this,arguments),this.listenTo(this,"change:ready",n.bind(this.onReady,this))},start:function(e){this.parentView=e;switch(this.get("type")){case"youtube":this.initYouTubePlayer();break;case"vimeo":window.addEventListener("message",n.bind(this.initVimeoPlayer,this),!1);break;case"dm":window.addEventListener("message",n.bind(this.initDailyMotionPlayer,this),!1)}},command:function(e){if(!n.isFunction(this[e])){i.log("Glaze: video player command not found ("+e+")");return}this.get("ready")?this[e]():this.queue.push(e)},pause:function(){i.log("Glaze: video player pause");switch(this.get("type")){case"youtube":this.youtubePlayer.pauseVideo();break;case"vimeo":s.vimeoCommand(this.parentView.$("iframe")[0],"pause");break;case"dm":s.dailyMotionCommand(this.parentView.$("iframe")[0],"pause")}},play:function(){i.log("Glaze: video player play");switch(this.get("type")){case"youtube":this.youtubePlayer.playVideo();break;case"vimeo":s.vimeoCommand(this.parentView.$("iframe")[0],"play");break;case"dm":s.dailyMotionCommand(this.parentView.$("iframe")[0],"play")}},mute:function(){i.log("Glaze: video player mute");switch(this.get("type")){case"youtube":this.youtubePlayer.mute();break;case"vimeo":s.vimeoCommand(this.parentView.$("iframe")[0],"setVolume",[0]);break;case"dm":s.dailyMotionCommand(this.parentView.$("iframe")[0],"mute")}},unmute:function(){i.log("Glaze: video player unmute");switch(this.get("type")){case"youtube":this.youtubePlayer.unMute(),this.youtubePlayer.setVolume(100);break;case"vimeo":s.vimeoCommand(this.parentView.$("iframe")[0],"setVolume",[1]);break;case"dm":s.dailyMotionCommand(this.parentView.$("iframe")[0],"unmute")}},initYouTubePlayer:function(){if(!!window.onYouTubePlayerAPIReady){setTimeout(n.bind(this.youtubeApiReady,this),300);return}window.onYouTubePlayerAPIReady=n.bind(this.youtubeApiReady,this),function(){var e=document.createElement("script");e.src=(window.location.protocol==="https:"?"https":"http")+"://www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},youtubeApiReady:function(){var e=this.parentView.$("iframe");e.attr("id",this.parentView.cid),this.youtubePlayer=new YT.Player(this.parentView.cid,{events:{onReady:n.bind(function(){this.set("ready",!0)},this),onStateChange:n.bind(this.onYouTubeStateChange,this)}})},initVimeoPlayer:function(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;var t=JSON.parse(e.data);t.event=="ready"&&(this.set("ready",!0),s.vimeoCommand(this.parentView.$("iframe")[0],"addEventListener","pause"),s.vimeoCommand(this.parentView.$("iframe")[0],"addEventListener","finish"),s.vimeoCommand(this.parentView.$("iframe")[0],"addEventListener","playProgress")),t.event=="playProgress"&&(this.get("paused")&&this.unmute(),this.set({playing:!0,paused:!1})),t.event=="pause"&&this.set({playing:!1,paused:!0})},initDailyMotionPlayer:function(e){if(!/^https?:\/\/www.dailymotion.com/.test(e.origin))return!1;e.data&&e.data=="event=apiready"&&this.set("ready",!0),e.data&&e.data=="event=playing"&&(this.get("paused")&&this.unmute(),this.set({playing:!0,paused:!1})),e.data&&e.data=="event=pause"&&(this.get("paused")&&this.unmute(),this.set({playing:!1,paused:!0}))},onYouTubeStateChange:function(e){e.data===YT.PlayerState.PLAYING?(this.get("paused")&&this.unmute(),this.set({playing:!0,paused:!1})):e.data===YT.PlayerState.PAUSED&&this.set({playing:!1,paused:!0})},onReady:function(){i.log("Glaze: Video ready ("+this.get("type")+")"),n.each(this.queue,n.bind(function(e){this[e]()},this))}})}),function(){function e(e,t,n){return e.call.apply(e.bind,arguments)}function t(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function n(r,i,s){return n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:t,n.apply(null,arguments)}function i(e,t){this.F=e,this.k=t||e,this.H=this.k.document}function o(e,t,n){e=e.H.getElementsByTagName(t)[0],e||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function u(e,t,n){t=t||[],n=n||[];for(var r=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var s=!1,o=0;o<r.length;o+=1)if(t[i]===r[o]){s=!0;break}s||r.push(t[i])}t=[];for(i=0;i<r.length;i+=1){s=!1;for(o=0;o<n.length;o+=1)if(r[i]===n[o]){s=!0;break}s||t.push(r[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function a(e,t){for(var n=e.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==t)return!0;return!1}function f(e){if("string"==typeof e.fa)return e.fa;var t=e.k.location.protocol;return"about:"==t&&(t=e.F.location.protocol),"https:"==t?"https:":"http:"}function l(e,t,n){function r(){f&&i&&u&&(f(a),f=null)}t=e.createElement("link",{rel:"stylesheet",href:t,media:"all"});var i=!1,u=!0,a=null,f=n||null;s?(t.onload=function(){i=!0,r()},t.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),o(e,"head",t)}function c(e,t,n,r){var i=e.H.getElementsByTagName("head")[0];if(i){var s=e.createElement("script",{src:t}),o=!1;return s.onload=s.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,n&&n(null),s.onload=s.onreadystatechange=null,"HEAD"==s.parentNode.tagName&&i.removeChild(s))},i.appendChild(s),setTimeout(function(){o||(o=!0,n&&n(Error("Script load timeout")))},r||5e3),s}return null}function h(){this.S=0,this.K=null}function p(e){return e.S++,function(){e.S--,v(e)}}function d(e,t){e.K=t,v(e)}function v(e){0==e.S&&e.K&&(e.K(),e.K=null)}function m(e){this.ea=e||"-"}function g(e,t){this.Q=e,this.M=4,this.L="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.L=n[1],this.M=parseInt(n[2],10))}function y(e){return E(e)+" "+(e.M+"00")+" 300px "+b(e.Q)}function b(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var r=e[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?t.push("'"+r+"'"):t.push(r)}return t.join(",")}function w(e){return e.L+e.M}function E(e){var t="normal";return"o"===e.L?t="oblique":"i"===e.L&&(t="italic"),t}function S(e){var t=4,n="n",r=null;return e&&((r=e.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=e.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?t=7:/[1-9]00/.test(r[1])&&(t=parseInt(r[1].substr(0,1),10)))),n+t}function x(e,t){this.a=e,this.j=e.k.document.documentElement,this.O=t,this.f="wf",this.e=new m("-"),this.da=!1!==t.events,this.u=!1!==t.classes}function T(e){e.u&&u(e.j,[e.e.d(e.f,"loading")]),C(e,"loading")}function N(e){if(e.u){var t=a(e.j,e.e.d(e.f,"active")),n=[],r=[e.e.d(e.f,"loading")];t||n.push(e.e.d(e.f,"inactive")),u(e.j,n,r)}C(e,"inactive")}function C(e,t,n){e.da&&e.O[t]&&(n?e.O[t](n.getName(),w(n)):e.O[t]())}function k(){this.t={}}function L(e,t,n){var r=[],i;for(i in t)if(t.hasOwnProperty(i)){var s=e.t[i];s&&r.push(s(t[i],n))}return r}function A(e,t){this.a=e,this.h=t,this.m=this.a.createElement("span",{"aria-hidden":"true"},this.h)}function O(e,t){var n=e.m,r;r="display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.Q)+";"+("font-style:"+E(t)+";font-weight:"+(t.M+"00")+";"),n.style.cssText=r}function M(e){o(e.a,"body",e.m)}function _(e,t,n,r,i,s){this.G=e,this.J=t,this.g=r,this.a=n,this.v=i||3e3,this.h=s||void 0}function D(e,t,n,r,i,s,o){this.G=e,this.J=t,this.a=n,this.g=r,this.h=o||"BESbswy",this.s={},this.v=i||3e3,this.Z=s||null,this.D=this.C=this.A=this.w=null,this.w=new A(this.a,this.h),this.A=new A(this.a,this.h),this.C=new A(this.a,this.h),this.D=new A(this.a,this.h),O(this.w,new g(this.g.getName()+",serif",w(this.g))),O(this.A,new g(this.g.getName()+",sans-serif",w(this.g))),O(this.C,new g("serif",w(this.g))),O(this.D,new g("sans-serif",w(this.g))),M(this.w),M(this.A),M(this.C),M(this.D)}function B(){if(null===H){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);H=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return H}function j(e,t,n){for(var r in P)if(P.hasOwnProperty(r)&&t===e.s[P[r]]&&n===e.s[P[r]])return!0;return!1}function F(e){var t=e.w.m.offsetWidth,n=e.A.m.offsetWidth,i;(i=t===e.s.serif&&n===e.s["sans-serif"])||(i=B()&&j(e,t,n)),i?r()-e.ga>=e.v?B()&&j(e,t,n)&&(null===e.Z||e.Z.hasOwnProperty(e.g.getName()))?q(e,e.G):q(e,e.J):I(e):q(e,e.G)}function I(e){setTimeout(n(function(){F(this)},e),50)}function q(e,t){setTimeout(n(function(){this.w.remove(),this.A.remove(),this.C.remove(),this.D.remove(),t(this.g)},e),0)}function R(e,t,n){this.a=e,this.p=t,this.P=0,this.ba=this.Y=!1,this.v=n}function z(e){0==--e.P&&e.Y&&(e.ba?(e=e.p,e.u&&u(e.j,[e.e.d(e.f,"active")],[e.e.d(e.f,"loading"),e.e.d(e.f,"inactive")]),C(e,"active")):N(e.p))}function W(e){this.F=e,this.q=new k,this.$=0,this.T=this.U=!0}function X(e,t,r,i,s){var o=0==--e.$;(e.T||e.U)&&setTimeout(function(){var e=s||null,a=i||null||{};if(0===r.length&&o)N(t.p);else{t.P+=r.length,o&&(t.Y=o);var f,l=[];for(f=0;f<r.length;f++){var c=r[f],h=a[c.getName()],p=t.p,d=c;p.u&&u(p.j,[p.e.d(p.f,d.getName(),w(d).toString(),"loading")]),C(p,"fontloading",d),p=null,null===U&&(U=window.FontFace?(p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(p[1],10):!0:!1),p=U?new _(n(t.V,t),n(t.W,t),t.a,c,t.v,h):new D(n(t.V,t),n(t.W,t),t.a,c,t.v,e,h),l.push(p)}for(f=0;f<l.length;f++)l[f].start()}},0)}function V(e,t,n){var r=[],i=n.timeout;T(t);var r=L(e.q,n,e.a),s=new R(e.a,t,i);e.$=r.length,t=0;for(n=r.length;t<n;t++)r[t].load(function(t,n,r){X(e,s,t,n,r)})}function $(e,t,n){this.N=e?e:t+J,this.o=[],this.R=[],this.ca=n||""}function K(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r].split(":");3==i.length&&e.R.push(i.pop());var s="";2==i.length&&""!=i[1]&&(s=":"),e.o.push(i.join(s))}}function Q(e){this.o=e,this.aa=[],this.I={}}function tt(e,t){this.a=e,this.c=t}function rt(e,t){this.a=e,this.c=t,this.X=[]}function it(e,t){this.a=e,this.c=t}function st(e,t){this.a=e,this.c=t}function ot(e,t){this.a=e,this.c=t}var r=Date.now||function(){return+(new Date)},s=!!window.FontFace;i.prototype.createElement=function(e,t,n){e=this.H.createElement(e);if(t)for(var r in t)t.hasOwnProperty(r)&&("style"==r?e.style.cssText=t[r]:e.setAttribute(r,t[r]));return n&&e.appendChild(this.H.createTextNode(n)),e},m.prototype.d=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.ea)},g.prototype.getName=function(){return this.Q},A.prototype.remove=function(){var e=this.m;e.parentNode&&e.parentNode.removeChild(e)},_.prototype.start=function(){function e(){r()-i>=n.v?n.J(n.g):t.fonts.load(y(n.g),n.h).then(function(t){1<=t.length?n.G(n.g):setTimeout(e,25)},function(){n.J(n.g)})}var t=this.a.k.document,n=this,i=r();e()};var P={ia:"serif",ha:"sans-serif"},H=null;D.prototype.start=function(){this.s.serif=this.C.m.offsetWidth,this.s["sans-serif"]=this.D.m.offsetWidth,this.ga=r(),F(this)};var U=null;R.prototype.V=function(e){var t=this.p;t.u&&u(t.j,[t.e.d(t.f,e.getName(),w(e).toString(),"active")],[t.e.d(t.f,e.getName(),w(e).toString(),"loading"),t.e.d(t.f,e.getName(),w(e).toString(),"inactive")]),C(t,"fontactive",e),this.ba=!0,z(this)},R.prototype.W=function(e){var t=this.p;if(t.u){var n=a(t.j,t.e.d(t.f,e.getName(),w(e).toString(),"active")),r=[],i=[t.e.d(t.f,e.getName(),w(e).toString(),"loading")];n||r.push(t.e.d(t.f,e.getName(),w(e).toString(),"inactive")),u(t.j,r,i)}C(t,"fontinactive",e),z(this)},W.prototype.load=function(e){this.a=new i(this.F,e.context||this.F),this.U=!1!==e.events,this.T=!1!==e.classes,V(this,new x(this.a,e),e)};var J="//fonts.googleapis.com/css";$.prototype.d=function(){if(0==this.o.length)throw Error("No fonts to load!");if(-1!=this.N.indexOf("kit="))return this.N;for(var e=this.o.length,t=[],n=0;n<e;n++)t.push(this.o[n].replace(/ /g,"+"));return e=this.N+"?family="+t.join("%7C"),0<this.R.length&&(e+="&subset="+this.R.join(",")),0<this.ca.length&&(e+="&text="+encodeURIComponent(this.ca)),e};var G={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},Y={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Z={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;Q.prototype.parse=function(){for(var e=this.o.length,t=0;t<e;t++){var n=this.o[t].split(":"),r=n[0].replace(/\+/g," "),i=["n4"];if(2<=n.length){var s,o=n[1];s=[];if(o)for(var o=o.split(","),u=o.length,a=0;a<u;a++){var f;f=o[a];if(f.match(/^[\w-]+$/))if(f=et.exec(f.toLowerCase()),null==f)f="";else{var l;l=f[1];if(null==l||""==l)l="4";else{var c=Y[l];l=c?c:isNaN(l)?"4":l.substr(0,1)}f=f[2],f=[null==f||""==f?"n":Z[f],l].join("")}else f="";f&&s.push(f)}0<s.length&&(i=s),3==n.length&&(n=n[2],s=[],n=n?n.split(","):s,0<n.length&&(n=G[n[0]])&&(this.I[r]=n))}this.I[r]||(n=G[r])&&(this.I[r]=n);for(n=0;n<i.length;n+=1)this.aa.push(new g(r,i[n]))}};var nt={Arimo:!0,Cousine:!0,Tinos:!0};tt.prototype.load=function(e){var t=new h,n=this.a,r=new $(this.c.api,f(n),this.c.text),i=this.c.families;K(r,i);var s=new Q(i);s.parse(),l(n,r.d(),p(t)),d(t,function(){e(s.aa,s.I,nt)})},rt.prototype.B=function(e){var t=this.a;return f(this.a)+(this.c.api||"//f.fontdeck.com/s/css/js/")+(t.k.location.hostname||t.F.location.hostname)+"/"+e+".js"},rt.prototype.load=function(e){var t=this.c.id,n=this.a.k,r=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var i=0,s=n.fonts.length;i<s;++i){var o=n.fonts[i];r.X.push(new g(o.name,S("font-weight:"+o.weight+";font-style:"+o.style)))}e(r.X)},c(this.a,this.B(t),function(t){t&&e([])})):e([])},it.prototype.B=function(e){return(this.c.api||"https://use.typekit.net")+"/"+e+".js"},it.prototype.load=function(e){var t=this.c.id,n=this.a.k;t?c(this.a,this.B(t),function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var r=[],i=0;i<t.length;i+=2)for(var s=t[i],o=t[i+1],u=0;u<o.length;u++)r.push(new g(s,o[u]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(a){}e(r)}},2e3):e([])},st.prototype.B=function(e,t){var n=f(this.a),r=(this.c.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return n+"//"+r+"/"+e+".js"+(t?"?v="+t:"")},st.prototype.load=function(e){function t(){if(i["__mti_fntLst"+n]){var r=i["__mti_fntLst"+n](),s=[],o;if(r)for(var u=0;u<r.length;u++){var a=r[u].fontfamily;void 0!=r[u].fontStyle&&void 0!=r[u].fontWeight?(o=r[u].fontStyle+r[u].fontWeight,s.push(new g(a,o))):s.push(new g(a))}e(s)}else setTimeout(function(){t()},50)}var n=this.c.projectId,r=this.c.version;if(n){var i=this.a.k;c(this.a,this.B(n,r),function(n){n?e([]):t()}).id="__MonotypeAPIScript__"+n}else e([])},ot.prototype.load=function(e){var t,n,r=this.c.urls||[],i=this.c.families||[],s=this.c.testStrings||{},o=new h;t=0;for(n=r.length;t<n;t++)l(this.a,r[t],p(o));var u=[];t=0;for(n=i.length;t<n;t++)if(r=i[t].split(":"),r[1])for(var a=r[1].split(","),f=0;f<a.length;f+=1)u.push(new g(r[0],a[f]));else u.push(new g(r[0]));d(o,function(){e(u,s)})};var ut=new W(window);ut.q.t.custom=function(e,t){return new ot(t,e)},ut.q.t.fontdeck=function(e,t){return new rt(t,e)},ut.q.t.monotype=function(e,t){return new st(t,e)},ut.q.t.typekit=function(e,t){return new it(t,e)},ut.q.t.google=function(e,t){return new tt(t,e)};var at={load:n(ut.load,ut)};"function"==typeof define&&define.amd?define("webfontloader",[],function(){return at}):"undefined"!=typeof module&&module.exports?module.exports=at:(window.WebFont=at,window.WebFontConfig&&ut.load(window.WebFontConfig))}(),define("utils/FontLoader",["require","underscore","Settings","webfontloader"],function(e){var t=e("underscore"),n=e("Settings"),r=e("webfontloader"),i={loadedFonts:{common:[],custom:[]},loadFonts:function(e,i){e=e||[],t.isArray(e)||(e=[e]),e=t.difference(e,n.excludedFonts),e=t.difference(e,this.loadedFonts.common),e=t.filter(e,function(e){return!!e}),e.length&&(r.load({google:{families:e}}),t.each(e,t.bind(function(e){this.loadedFonts.common.push(e)},this)))},loadCustomFont:function(e){if(this.loadedFonts.custom.indexOf(e)===-1)if(!n.cdnHost)$("head").append('<link rel="stylesheet" type="text/css" href="'+n.apiHost+"/api/fonts/"+e+'">');else{var t="fonts";n.environment!=="prod"&&n.environment!=="production"&&(t=n.environment+"-"+t),$("head").append('<link rel="stylesheet" type="text/css" href="'+n.cdnHost+"/"+t+"/font-"+e+'.css">'),this.loadedFonts.custom.push(e)}}};return i}),define("view/ElementView",["require","jquery","underscore","backbone","Settings","jqueryUI","utils/PostMessageManager","utils/TrackingManager","utils/VideoPlayer","utils/Logger","utils/FontLoader","AppModel"],function(require){var $=require("jquery"),_=require("underscore"),Backbone=require("backbone"),Settings=require("Settings"),jqueryUI=require("jqueryUI"),PostMessageManager=require("utils/PostMessageManager"),TrackingManager=require("utils/TrackingManager"),VideoPlayer=require("utils/VideoPlayer"),Logger=require("utils/Logger"),FontLoader=require("utils/FontLoader");return Backbone.View.extend({attributes:function(){var e=JSON.parse(this.model.get("settings")||"{}");return{"class":"glaze-element reset-this glaze-exclude"+(this.model.get("is_centered")?" centered":"")+(e.flipped?" flipped":"")}},videoPlayer:null,appData:null,events:{click:"clickHandle",mouseover:"rollover",mouseout:"rollout"},initialize:function(e){e=e||{},_.extend(this,e),this.appData=require("AppModel"),this.prepareSettings(),Backbone.View.prototype.initialize.apply(this,arguments)},prepareSettings:function(){var e=JSON.parse(this.model.get("settings")||"{}");if(this.model.get("action")){var t=this.model.get("action");e.actionType=t.type,e.actionUrl=t.url,e.actionUrlBlank=t.url_blank,e.actionGlaze=t.glaze_id,e.actionGlazeTransition=t.smooth_transition&&"smooth",e.actionCampaign=t.campaign_id,e.actionJs=t.code}this.model.set("settings",e)},render:function(){var e=this.getContent().replace('id="title-trick"','id="'+this.parent.attributes["aria-labelledby"]+'"');return this.model.get("type")==="video"?this.$el.html(e+'<span class="element-close js-close"><span class="glaze-exclude">&times;</span></span>'):this.$el.html(e),this.$el.addClass("glz-el-"+this.model.get("type")),this.setStyles(),this},getContent:function(){var e=this.model.get("content");if(e.match("lang_id")){try{e=JSON.parse(e||"[]")}catch(t){return this.model.get("content")}var n;return this.appData.get("language")&&(n=_.find(e,_.bind(function(e){return e.lang_id===this.appData.get("language").slug},this))),n||(n=e[0]),n.content}return e},setStyles:function(){if(this.model.get("style")){var e=JSON.parse(this.model.get("style"));this.$el.css(_.omit(e,"fontFamily")),e.fontFamily&&(this.$el.css({fontFamily:e.fontFamily.family}),e.fontFamily.customId?FontLoader.loadCustomFont(e.fontFamily.customId):FontLoader.loadFonts([e.fontFamily.family]))}this.model.get("z_index")&&this.$el.css({zIndex:this.model.get("z_index")}),this.model.get("settings")&&this.model.get("settings").inEffect&&this.model.get("settings").inEffect==="fade"&&(this.$el.hide(),setTimeout(_.bind(function(){this.$el.fadeIn(Number(this.model.get("settings").inDuration))},this),Number(this.model.get("settings").inDelay))),this.model.get("type")==="x"&&this.$el.css({cursor:"pointer"}),this.model.get("type")==="clipart"&&this.$el.find("i").attr("aria-hidden","true")},initControls:function(){var e=JSON.parse(this.model.get("style"));e.width&&(this.model.get("type")=="image"?this.$("img").css({width:"100%"}):this.model.get("type")=="embed"?(this.$("iframe").attr("width",e.width),this.$("iframe").attr("height",e.height)):this.model.get("type")=="video"&&(this.$("iframe").attr("width",e.width),this.$("iframe").attr("height",e.height))),this.model.get("settings")&&this.model.get("settings").outEffect&&this.model.get("settings").outEffect==="fade"&&this.model.get("settings").outDelay&&setTimeout(_.bind(function(){this.$el.fadeOut(Number(this.model.get("settings").outDuration))},this),Number(this.model.get("settings").outDelay)),this.model.get("type")==="video"&&(this.videoPlayer=new VideoPlayer(this.model.get("settings")),this.videoPlayer.start(this))},start:function(){this.$el.html(this.prepareContent(this.$el.html()));var e=this.model.get("settings")||{};this.model.get("type")==="video"&&(e.sound?this.videoPlayer.command("unmute"):this.videoPlayer.command("mute"),e.autoplay&&this.videoPlayer.command("play"))},updatePosition:function(){var e=this.parent.model.get("variant").getXpath(0),t=this.parent.model.get("variant").getSelector(0),n=this.model.get("settings")||{},r=JSON.parse(this.model.get("style")),i=JSON.parse(this.model.get("position"));if(this.$el.hasClass("glaze-nestle-video"))return;if(this.model.get("is_centered")&&this.model.get("is_centered")!=0)r.position==="fixed"?(r.left=0,r.top="auto",r.marginLeft=0,r.marginTop=$(window).height()/2-this.$el.height()/2):(r.left=0,r.marginLeft=0,r.marginTop=0),r=_.pick(r,"left","top","marginLeft","marginTop"),this.$el.css(r);else if(e||t||this.parent.rolledElement){var s=this.rolledElement||$(t).get(0),o=$(s),u=o.offset(),a=!1;o.parents().each(function(){$(this).css("position")==="fixed"&&(a=!0)}),a&&(u.top+=$("body").scrollTop());if(!o.length)return;n.shapeOrigin==="tr"&&(u.left+=o.outerWidth()),n.shapeOrigin==="bl"&&(u.top+=o.outerHeight()),n.shapeOrigin==="br"&&(u.top+=o.outerHeight(),u.left+=o.outerWidth()),n.positionOrigin==="tr"&&(u.left-=this.$el.outerWidth()),n.positionOrigin==="bl"&&(u.top-=this.$el.outerHeight()),n.positionOrigin==="br"&&(u.top-=this.$el.outerHeight(),u.left-=this.$el.outerWidth()),r.position==="fixed"?(r.marginLeft=u.left+(i&&i.left?i.left:0),r.marginTop=u.top+(i&&i.top?i.top:0),r.left="auto",r.top="auto",r=_.pick(r,"left","top","marginLeft","marginTop")):(r.left=u.left+(i&&i.left?i.left:0),r.top=u.top+(i&&i.top?i.top:0),r=_.pick(r,"left","top")),parseInt(r.left)<0&&(r.left=0),parseInt(r.left)>0&&this.$el.outerWidth()+parseInt(r.left)>$(window).width()&&(r.left=$(window).width()-this.$el.outerWidth()),this.$el.css(r)}},clickHandle:function(event){var settings=this.model.get("settings")||{},converted=!1;event&&event.stopPropagation();if(this.model.get("type")==="x"){converted=TrackingManager.checkEngagementConversion(this.parent.model.get("id"),"inserted_element",this.model),this.parent.hideGlaze(null,converted);return}if($(event.target).hasClass("js-close")||$(event.target).parents(".js-close").length){this.$el.removeClass("glaze-nestle-video"),this.$("iframe").attr("width",this.videoWidth),this.$("iframe").attr("height",this.videoHeight);var style=JSON.parse(this.model.get("style"));this.$el.css(style),this.videoPlayer.command("pause");return}this.model.get("is_tracked")!=0?converted=TrackingManager.checkEngagementConversion(this.parent.model.get("id"),"inserted_element",this.model):Logger.log("Glaze: element clicked, but tracking is disabled");var cb=this.parent.parent.openGlazeById,context=this.parent.parent;if(settings.actionType)if(settings.actionType==="url")if(settings.actionUrlBlank){var win=window.open(settings.actionUrl,"_blank");win.focus()}else window.location.href=settings.actionUrl;else if(settings.actionType==="glaze")settings.actionGlazeTransition&&settings.actionGlazeTransition==="smooth"?this.parent.smoothTransitionGlaze(settings.actionGlaze):this.parent.hideGlaze(function(){cb.call(context,settings.actionGlaze,!0)},converted);else if(settings.actionType==="close")this.parent.hideGlaze(null,converted);else if(settings.actionType==="close_campaign")this.parent.hideGlaze(null,converted,{forceClose:!0});else if(settings.actionType==="js")try{event&&event.preventDefault();if(settings.actionJs.match("{PRODUCT")){var products=this.model.get("products")||[];_.each(products,_.bind(function(product){var replacements=[{placeholder:"{PRODUCT.PID}",value:product.pid}],replacedActionJs=settings.actionJs;_.each(replacements,function(e){replacedActionJs=replacedActionJs.replace(e.placeholder,e.value)}),replacedActionJs.match(/JS:(.*):ENDJS/)&&(replacedActionJs=replacedActionJs.replace(/JS:.*:ENDJS/,eval(replacedActionJs.match(/JS:(.*):ENDJS/)[1]))),eval(replacedActionJs)},this))}else eval(settings.actionJs);setTimeout(_.bind(function(){this.parent.hideGlaze(null,converted)},this),1e3)}catch(err){console.warn("Error in Custom Javasctipt Action on click element"),console.warn(err)}($(event.target).attr("data-close-glaze")||$(event.target).parents("[data-close-glaze]").length)&&this.parent.hideGlaze(null,!1);var glazeToTransition,transitionType=$(event.target).attr("data-transition-type")||"smooth";if($(event.target).attr("data-transition")==="next"||$(event.target).parents('[data-transition="next"]').length)glazeToTransition=this.parent.appData.getNextGlaze(this.parent.model.get("id")),glazeToTransition&&(transitionType==="smooth"?this.parent.smoothTransitionGlaze(glazeToTransition.id):this.parent.hideGlaze(function(){cb.call(context,glazeToTransition.id,!0)},converted));if($(event.target).attr("data-transition")==="prev"||$(event.target).parents('[data-transition="prev"]').length)glazeToTransition=this.parent.appData.getPrevGlaze(this.parent.model.get("id")),transitionType==="smooth"?this.parent.smoothTransitionGlaze(glazeToTransition.id):this.parent.hideGlaze(function(){cb.call(context,glazeToTransition.id,!0)},converted)},rollover:function(e){var t=this.model.get("settings")||{};if(!t.rolloverEnabled)return;t.rolloverStyle&&this.$el.css(t.rolloverStyle)},rollout:function(e){var t=JSON.parse(this.model.get("style"));t.left=this.$el.css("left"),t.top=this.$el.css("top"),this.model.get("is_centered")&&this.model.get("is_centered")!=0&&(t=_.omit(t,"top","left","marginTop","marginLeft")),t=_.omit(t,"fontFamily"),this.$el.css(t)},onGlazeHide:function(){if(this.model.get("type")=="video"){var e=this.$("iframe");if(!e.length)return;if(this.model.get("settings").nestle&&this.videoPlayer.get("playing")){this.videoWidth=this.$("iframe").width(),this.videoHeight=this.$("iframe").height(),this.$el.css({top:0,left:0}),this.$el.addClass("glaze-nestle-video"),this.$("iframe").attr("width","100%"),this.$("iframe").attr("height","100%");return}switch(this.model.get("settings").type){case"youtube":PostMessageManager.youTubeCommand(e[0],"pauseVideo");break;case"vimeo":PostMessageManager.vimeoCommand(e[0],"pause");break;case"dm":PostMessageManager.dailyMotionCommand(e[0],"pause")}}this.$el.hide()},onGlazeShow:function(){this.$el.show();if(this.model.get("type")=="video"){var e=this.$("iframe");if(!e.length)return;if(this.model.get("settings").nestle){this.$el.removeClass("glaze-nestle-video"),this.$("iframe").attr("width",this.videoWidth),this.$("iframe").attr("height",this.videoHeight);var t=JSON.parse(this.model.get("style"));this.$el.css(t);return}switch(this.model.get("settings").type){case"youtube":PostMessageManager.youTubeCommand(e[0],"playVideo");break;case"vimeo":PostMessageManager.vimeoCommand(e[0],"play");break;case"dm":PostMessageManager.dailyMotionCommand(e[0],"play")}}},isVisible:function(){var e=JSON.parse(this.model.get("style")),t=e.position==="fixed";if(t){var n=this.$el[0].getBoundingClientRect(),r=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(n.bottom<0||n.top-r>=0)&&!(n.left<0)}var i=this.$el.offset().top,s=this.$el.offset().top+this.$el.outerHeight(),o=$(window).scrollTop()+$(window).innerHeight(),u=$(window).scrollTop();return o>i&&u<s},prepareContent:function(content){var placeholders=content.match(/\{[^\}]+\}/gi);if(!placeholders||!placeholders.length||!this.appData.get("website").page_templates||!this.appData.get("website").page_templates.length)return content;var selectors=_.reduce(this.appData.get("website").page_templates,function(e,t){return!t.selectors||!t.selectors.length?e:(_.each(t.selectors,function(t){e.push(t)}),e)},[]);return _.each(placeholders,_.bind(function(placeholder){var selector=_.find(selectors,function(e){return"{"+e.name+"}"===placeholder});if(selector){var text="";if(selector.type==="JavaScript"){selector.code=selector.code.replace("~HIGHLIGHTED_ELEMENT~",this.parent.model.get("variant").getSelector(0));try{text=eval(selector.code)}catch(e){console.warn("Error in Selector"),console.warn(selector.code),console.warn(err)}content=content.replace(placeholder,text)}if(selector.type==="CSS"){var $el=$(selector.code);$el.length?text=$el.html():Logger.log("Glaze: placeholder selector element not found: "+selector.code),content=content.replace(placeholder,text)}}},this)),content},remove:function(){Backbone.View.prototype.remove.apply(this,arguments)}})}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!view/GlazeView.html",[],function(){return'<div role="document">\r\n    <div class="glaze-elements glaze-exclude"></div>\r\n\r\n    <% if(data.model.get(\'variant\').get(\'shape_id\') !== -1) { %>\r\n        <% if(settings.a11y_shape_btn_no_interaction) { %>\r\n            <div class="glaze-shape-button no-interaction">\r\n                <span class="sr-only"><%= settings.a11y_shape_btn_text ||  "Enregistrer l\'offre d\'emploi dans MEMO (Ouvre une fenêtre popup)" %></span>\r\n            </div>\r\n        <% } else { %>\r\n            <button class="glaze-shape-button">\r\n                <span class="sr-only"><%= settings.a11y_shape_btn_text ||  "Enregistrer l\'offre d\'emploi dans MEMO (Ouvre une fenêtre popup)" %></span>\r\n            </button>\r\n        <% } %>\r\n    <% } %>\r\n    <div class="glaze-wrapper glaze-exclude">\r\n        <canvas id="canvas-shape-<%= data.cid %>" class="glaze-exclude"></canvas>\r\n    </div>\r\n\r\n    <% if(settings.close_click_x) { %>\r\n        <button type="button" class="close glaze-exclude" style="<% if(settings.close_click_x_opacity) { %>opacity:<%= settings.close_click_x_opacity %>; <% } %><%= settings.x_image_css %>">\r\n            <% if(settings.x_image) { %>\r\n                <img src="<%= settings.x_image %>" alt="" class="x-close-icon glaze-exclude" aria-hidden="true" />\r\n            <% } else { %>\r\n                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n                     viewBox="0 0 174.239 174.239" xml:space="preserve"\r\n                     width="16" height="16" aria-hidden="true" class="glaze-exclude">\r\n                    <path style="<% if(settings.close_click_x_color) { %>fill:<%= settings.close_click_x_color %>;<% } %>" d="M146.537,1.047c-1.396-1.396-3.681-1.396-5.077,0L89.658,52.849c-1.396,1.396-3.681,1.396-5.077,0L32.78,1.047\r\n                        c-1.396-1.396-3.681-1.396-5.077,0L1.047,27.702c-1.396,1.396-1.396,3.681,0,5.077l51.802,51.802c1.396,1.396,1.396,3.681,0,5.077\r\n                        L1.047,141.46c-1.396,1.396-1.396,3.681,0,5.077l26.655,26.655c1.396,1.396,3.681,1.396,5.077,0l51.802-51.802\r\n                        c1.396-1.396,3.681-1.396,5.077,0l51.801,51.801c1.396,1.396,3.681,1.396,5.077,0l26.655-26.655c1.396-1.396,1.396-3.681,0-5.077\r\n                        l-51.801-51.801c-1.396-1.396-1.396-3.681,0-5.077l51.801-51.801c1.396-1.396,1.396-3.681,0-5.077L146.537,1.047z"/>\r\n                </svg>\r\n                <span class="sr-only">Fermer l\'astuce</span>\r\n            <% } %>\r\n        </button>\r\n    <% } %>\r\n</div>\r\n'}),function(e){if(typeof define=="function"&&define.amd)define("cookie",e);else if(typeof exports=="object")module.exports=e();else{var t=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){var e=0,t={};for(;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,s){var o;if(arguments.length>1){s=e({path:"/"},r.defaults,s);if(typeof s.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+s.expires*864e5),s.expires=u}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(a){}return i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}t||(o={});var f=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;for(;c<f.length;c++){var h=f[c].split("="),p=h[0].replace(l,decodeURIComponent),d=h.slice(1).join("=");d.charAt(0)==='"'&&(d=d.slice(1,-1));try{d=n&&n(d,p)||d.replace(l,decodeURIComponent);if(this.json)try{d=JSON.parse(d)}catch(a){}if(t===p){o=d;break}t||(o[p]=d)}catch(a){}}return o}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t()}),function(e){function n(e){return e&&(e=e.toString().replace(t.pluses,"%20"),e=decodeURIComponent(e)),e}function r(e){var n=t.uri_parser,r=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],i=n.exec(e||""),s={};return r.forEach(function(e,t){s[e]=i[t]||""}),s}function i(e){var r,i,s,o,u,a,f,l=[];if(typeof e=="undefined"||e===null||e==="")return l;e.indexOf("?")===0&&(e=e.substring(1)),i=e.toString().split(t.query_separator);for(r=0,f=i.length;r<f;r++)s=i[r],o=s.indexOf("="),o!==0&&(u=n(s.substring(0,o)),a=n(s.substring(o+1)),l.push(o===-1?[s,null]:[u,a]));return l}function s(e){this.uriParts=r(e),this.queryPairs=i(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var t={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(this==null)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if(typeof e!="function")throw new TypeError(e+" is not a function");arguments.length>1&&(n=t),r=0;while(r<s){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(e){s.prototype[e]=function(t){return typeof t!="undefined"&&(this.uriParts[e]=t),this.uriParts[e]}}),s.prototype.hasAuthorityPrefix=function(e){return typeof e!="undefined"&&(this.hasAuthorityPrefixUserPref=e),this.hasAuthorityPrefixUserPref===null?this.uriParts.source.indexOf("//")!==-1:this.hasAuthorityPrefixUserPref},s.prototype.isColonUri=function(e){if(typeof e=="undefined")return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!e},s.prototype.query=function(e){var t="",n,r,s;typeof e!="undefined"&&(this.queryPairs=i(e));for(n=0,s=this.queryPairs.length;n<s;n++)r=this.queryPairs[n],t.length>0&&(t+="&"),r[1]===null?t+=r[0]:(t+=r[0],t+="=",typeof r[1]!="undefined"&&(t+=encodeURIComponent(r[1])));return t.length>0?"?"+t:t},s.prototype.getQueryParamValue=function(e){var t,n,r;for(n=0,r=this.queryPairs.length;n<r;n++){t=this.queryPairs[n];if(e===t[0])return t[1]}},s.prototype.getQueryParamValues=function(e){var t=[],n,r,i;for(n=0,i=this.queryPairs.length;n<i;n++)r=this.queryPairs[n],e===r[0]&&t.push(r[1]);return t},s.prototype.deleteQueryParam=function(e,t){var r=[],i,s,o,u,a;for(i=0,a=this.queryPairs.length;i<a;i++)s=this.queryPairs[i],o=n(s[0])===n(e),u=s[1]===t,(arguments.length===1&&!o||arguments.length===2&&(!o||!u))&&r.push(s);return this.queryPairs=r,this},s.prototype.addQueryParam=function(e,t,n){return arguments.length===3&&n!==-1?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[e,t])):arguments.length>0&&this.queryPairs.push([e,t]),this},s.prototype.hasQueryParam=function(e){var t,n=this.queryPairs.length;for(t=0;t<n;t++)if(this.queryPairs[t][0]==e)return!0;return!1},s.prototype.replaceQueryParam=function(e,t,r){var i=-1,s=this.queryPairs.length,o,u;if(arguments.length===3){for(o=0;o<s;o++){u=this.queryPairs[o];if(n(u[0])===n(e)&&decodeURIComponent(u[1])===n(r)){i=o;break}}i>=0&&this.deleteQueryParam(e,n(r)).addQueryParam(e,t,i)}else{for(o=0;o<s;o++){u=this.queryPairs[o];if(n(u[0])===n(e)){i=o;break}}this.deleteQueryParam(e),this.addQueryParam(e,t,i)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(e){var t="set"+e.charAt(0).toUpperCase()+e.slice(1);s.prototype[t]=function(t){return this[e](t),this}}),s.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},s.prototype.origin=function(){var e=this.scheme();this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@"));if(this.host()){e+=this.host();if(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))e+=":"+this.port()}return e},s.prototype.addTrailingSlash=function(){var e=this.path()||"";return e.substr(-1)!=="/"&&this.path(e+"/"),this},s.prototype.toString=function(){var e,n=this.origin();return this.isColonUri()?this.path()&&(n+=":"+this.path()):this.path()?(e=this.path(),!t.ends_with_slashes.test(n)&&!t.starts_with_slashes.test(e)?n+="/":(n&&n.replace(t.ends_with_slashes,"/"),e=e.replace(t.starts_with_slashes,"/")),n+=e):this.host()&&(this.query().toString()||this.anchor())&&(n+="/"),this.query().toString()&&(n+=this.query().toString()),this.anchor()&&(this.anchor().indexOf("#")!==0&&(n+="#"),n+=this.anchor()),n},s.prototype.clone=function(){return new s(this.toString())},typeof define=="function"&&define.amd?define("uri",[],function(){return s}):typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=s:e.Uri=s}(this),define("utils/ConditionChecker",["require","jquery","underscore","cookie","utils/TrackingManager","mobiledetect","utils/Logger","utils/MiscUtils","uri","AppModel","AppModel"],function(require){var $=require("jquery"),_=require("underscore"),Cookie=require("cookie"),TrackingManager=require("utils/TrackingManager"),mobiledetect=require("mobiledetect"),Logger=require("utils/Logger"),md=new mobiledetect(window.navigator.userAgent),MiscUtils=require("utils/MiscUtils"),URI=require("uri"),ConditionChecker={checkCondition:function(e){return e.deferred?!0:_.isFunction(this[e.type])?this[e.type].call(this,e):(Logger.log('Glaze: no handler for condition type "'+e.type+'" found!'),!0)},checkDeferredCondition:function(e,t){_.isFunction(this[e.type])?this[e.type].call(this,e,t):(Logger.log('Glaze: no handler for deferred condition type "'+e.type+'" found!'),t.trigger("releaseDeferredCondition",e))},campaign:function(e){var t=TrackingManager.hasSeenCampaign(e.value,e.hours_ago||0);return e.action==="isNot"&&(t=!t),t},ad:function(e){if(e.action==="seen")return TrackingManager.isImpressed(e.value)||0;if(e.action==="converted")return TrackingManager.isConverted(e.value);if(e.action==="not_converted")return!TrackingManager.isConverted(e.value)},browser:function(e){var t=!0;switch(e.value){case"ff":t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;break;case"ie":t=!!detectIE();break;case"ie8":t=detectIE()==8;break;case"ie9":t=detectIE()==9;break;case"ie10":t=detectIE()==10;break;case"ie11":t=detectIE()==11;break;case"ie13":t=detectIE()==13;break;case"ie14":t=detectIE()==14;break;case"sf":t=!!safariVersion();break;case"sf6":t=safariVersion()==6;break;case"sf7":t=safariVersion()==7;break;case"sf8":t=safariVersion()==8;break;case"gc":t=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;break;case"op":t=!!window.opera;break;case"uc":(function(e){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))t=!0})(navigator.userAgent||navigator.vendor||window.opera)}return e.action==="isNot"&&(t=!t),t},device:function(e){var t=!0;switch(e.value){case"ipad":t=md.is("iPad");break;case"iphone":t=md.is("iPhone");break;case"mobile":t=!!md.phone();break;case"tablet":t=!!md.tablet();break;case"desktop":t=!md.tablet()&&!md.phone()}return e.action==="isNot"&&(t=!t),t},cookie:function(e){var t=!1,n=Cookie.getJSON();return n&&_.each(n,function(n,r){n=n||"",_.isString(n)||(n="");var i,s;switch(e.name_match){case"equals":i=r===e.name;break;case"contains":i=r.match(e.name);break;case"matches":i=r.match(e.name)}switch(e.value_match){case"equals":s=n===e.value;break;case"contains":s=n.match(e.value);break;case"matches":s=n.match(e.value);break;case"anyvalue":s=!!n}i&&s&&(t=!0)}),e.action==="isNot"&&(t=!t),t},"custom-event":function(e){return!0},"custom-js":function(condition,glazeView){glazeView=glazeView||!1;var pass=!1;if(!condition.products||!condition.products.products||!condition.products.products.length)try{pass=eval(condition.name)}catch(e){console.log(e)}else try{pass=_.some(condition.products.products,function(item){var replacements=[{placeholder:"{PRODUCT.PID}",value:item.pid},{placeholder:"{PRODUCT.SKU}",value:item.sku},{placeholder:"{PRODUCT.CATEGORY_ID}",value:item.category_guid},{placeholder:"{PRODUCT.NAME}",value:item.name},{placeholder:"{PRODUCT.VENDOR}",value:item.vendor}],conditionCode=condition.name;return _.each(replacements,function(e){conditionCode=conditionCode.replace(e.placeholder,e.value)}),eval(conditionCode)})}catch(e){}if(!condition.deferred)return!!pass;pass?glazeView.trigger("releaseDeferredCondition",condition):setTimeout(_.bind(function(){this[condition.type].call(this,condition,glazeView)},this),300)},"custom-tags":function(e){return!0},ip:function(e){var t=require("AppModel"),n=t.get("settings").ip,r,i;return _.isArray(e.value)||(e.value=(e.value||"").replace("\r","").split("\n")),r=_.some(e.value,function(t){var r;switch(e.match){case"equals":r=t===n;break;case"prefix":i=new RegExp("^"+t,"i"),r=n.match(i);break;case"regexp":r=n.match(t);break;case"cidr":var s=cidrToRange(t);r=ip2num(n)>=ip2num(s[0])&&ip2num(n)<=ip2num(s[1])}return r}),r},language:function(e){var t=window.navigator.languages&&window.navigator.languages[0].toLowerCase(),n=!0;return t&&(n=t.match(e.value)),n},session_storage:function(e){if(!window.sessionStorage)return!1;var t=!0;switch(e.match){case"equals":t=window.sessionStorage[e.name]===e.value;break;case"contains":t=window.sessionStorage[e.name]&&window.sessionStorage[e.name].match(e.value);break;case"matches":t=window.sessionStorage[e.name]&&window.sessionStorage[e.name].match(e.value);break;case"anyvalue":t=!!window.sessionStorage[e.name]}return t},session:function(e){var t=TrackingManager.pagesVisited()>1;return e.value==="new"&&(t=!t),t},os:function(e){var t=!1,n=md.version("Android")&&parseFloat(md.version("Android")).toFixed(1);switch(e.value){case"any-mobile":t=md.tablet()||md.phone();break;case"any-desktop":t=!md.tablet()&&!md.phone();break;case"ios":t=!!md.version("iOS");break;case"ios6":t=md.version("iOS")&&parseInt(md.version("iOS"),10)==6;break;case"ios7":t=md.version("iOS")&&parseInt(md.version("iOS"),10)==7;break;case"ios8":t=md.version("iOS")&&parseInt(md.version("iOS"),10)==8;break;case"android":t=!!n;break;case"andr23":t=n=="2.3";break;case"andr40":t=n=="4.0";break;case"andr4143":t=n=="4.1"||n=="4.2"||n=="4.3";break;case"andr44":t=n=="4.4";break;case"andr50":t=n>="5.0";break;case"win-phone":t=!!md.version("Windows Phone");break;case"blackberry":t=!!md.version("BlackBerry");break;case"win":t=navigator.platform.toUpperCase().indexOf("WIN")>=0;break;case"win7":t=md.version("Windows NT")=="6.1";break;case"win8":t=md.version("Windows NT")=="6.2";break;case"win10":t=md.version("Windows NT")=="10.0";break;case"osx":t=navigator.platform.toUpperCase().indexOf("MAC")>=0;break;case"osx6":t=/Mac OS X 10_6/.test(window.navigator.userAgent)||/Mac OS X 10\.6/.test(window.navigator.userAgent);break;case"osx7":t=/Mac OS X 10_7/.test(window.navigator.userAgent);break;case"osx8":t=/Mac OS X 10_8/.test(window.navigator.userAgent);break;case"osx9":t=/Mac OS X 10_9/.test(window.navigator.userAgent);break;case"osx10":t=/Mac OS X 10_10/.test(window.navigator.userAgent)}return e.action=="isNot"&&(t=!t),t},"query-params":function(e){var t=getParameterByName(e.name)==e.value;return e.action=="isNot"&&(t=!t),t},referrer:function(e){var t=document.referrer,n=!1;switch(e.match){case"simple":n=t==e.name;break;case"contains":n=!!t.match(e.name);break;case"matches":n=!!t.match(e.name);break;case"anyvalue":n=!!t.match(e.name)}return n},"traffic-source":function(e){var t=!1,n=document.referrer;switch(e.value){case"campaign":t=!0;break;case"search":t=n.match("google")||n.match("yahoo")||n.match("msn")||n.match("bing");break;case"ref":t=!0;break;case"direct":t=n==""}return t},time:function(e){var t=!0,n=new Date,r=n.getMonth()+"/"+n.getDate()+"/"+n.getFullYear()+" ",i=n.getHours()+":"+n.getMinutes(),s=n.getDay();return e["time-from"]&&(t=Date.parse(r+i)>=Date.parse(r+e["time-from"])),e["time-to"]&&(t=Date.parse(r+i)<=Date.parse(r+e["time-to"])),e["day"]!=""&&(t=t&&_.find(e.day,function(e){return e==s})),t},scrolling:function(e,t){var n=function(n){$(window).scrollTop()>=$(document).height()*parseInt(e.value)/100&&(t.trigger("releaseDeferredCondition",e),$(window).off("scroll.glazecondition"))};$(window).on("scroll.glazecondition",n)},"copy-text":function(e,t){var n=function(n){var r=$(e.name).eq(0),i="";window.getSelection?i=window.getSelection().toString():document.selection&&document.selection.type!="Control"&&(i=document.selection.createRange().text),i=i.toLowerCase();if(r.length){var s=Number(MiscUtils.similarity(r.text().toLowerCase(),i))*100;s>Number(e.value)&&(t.trigger("releaseDeferredCondition",e),$(window).off("copy.glazecondition"))}};$(window).on("copy.glazecondition",n)},"opened-pages":function(e){return TrackingManager.pagesVisited()>=parseInt(e.value)},"visited-page":function(e){return TrackingManager.isPageVisited(e.name,e.match)},"not-visit-page":function(e){return!TrackingManager.visitedPageRecentTime(e.name,e.match,e.date)},"browse-time":function(e){return TrackingManager.checkBrowseTime(e.value)},"ad-campaign":function(e){var t,n=new URI(window.location.href),r=n.getQueryParamValue(e.name);switch(e.match){case"equals":t=r===e.value;break;case"contains":t=r.match(e.value);break;case"matches":t=r.match(e.value);break;case"anyvalue":t=!!r}return e.action==="isNot"&&(t=!t),t},location:function(e,t){var n=require("AppModel"),r=n.get("geo");return r&&_.some(e.locations,_.bind(function(e){if(e.country_short!==r.country_short&&e.country_full!==r.country_full)return!1;if(e.city_short)if(e.city_short===r.city_full||e.city_full===r.city_full)return!0;if(e.lat&&e.lng&&r.lat&&r.lng){var t=this.checkLocationDistance(e.lat,e.lng,r.lat,r.lng);if(t<25)return!0}return!1},this))},checkLocationDistance:function(e,t,n,r){var i=.017453292519943295,s=Math.cos,o=.5-s((n-e)*i)/2+s(e*i)*s(n*i)*(1-s((r-t)*i))/2;return 12742*Math.asin(Math.sqrt(o))}},getParameterByName=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return n===null?"":decodeURIComponent(n[1].replace(/\+/g," "))},ip2num=function(e){var t=e.split(".");return((+t[0]*256+ +t[1])*256+ +t[2])*256+ +t[3]},cidrToRange=function(e){var t=[2];e=e.split("/");var n=ip2long(e[0]);return t[0]=long2ip(n),t[1]=long2ip(Math.pow(2,32-e[1])+n-1),t},detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):!1},iOSversion=function(){return/iPad|iPhone|iPod/.test(navigator.platform)?window.indexedDB?"iOS 8":window.SpeechSynthesisUtterance?"iOS 7":window.webkitAudioContext?"iOS 6":window.matchMedia?"iOS 5":!!window.history&&"pushState"in window.history?"iOS 4":"iOS 3 or earlier":!1},safariVersion=function(){var e=/^((?!chrome).)*safari/i.test(navigator.userAgent),t;return e?(t=navigator.userAgent.substr(navigator.userAgent.lastIndexOf("Safari/")+7,7),t):!1};return ConditionChecker});var fabric=fabric||{version:"2.4.3"};typeof exports!="undefined"?exports.fabric=fabric:typeof define=="function"&&define.amd&&define("fabric",[],function(){return fabric}),typeof document!="undefined"&&typeof window!="undefined"&&(fabric.document=document,fabric.window=window),fabric.isTouchSupported="ontouchstart"in fabric.window,fabric.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.canvasModule="canvas",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.initFilterBackend=function(){if(fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize))return console.log("max texture size: "+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize});if(fabric.Canvas2dFilterBackend)return new fabric.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=fabric),function(){function e(e,t){if(!this.__eventListeners[e])return;var n=this.__eventListeners[e];t?n[n.indexOf(t)]=!1:fabric.util.array.fill(n,!1)}function t(e,t){this.__eventListeners||(this.__eventListeners={});if(arguments.length===1)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this}function n(t,n){if(!this.__eventListeners)return;if(arguments.length===0)for(t in this.__eventListeners)e.call(this,t);else if(arguments.length===1&&typeof arguments[0]=="object")for(var r in t)e.call(this,r,t[r]);else e.call(this,t,n);return this}function r(e,t){if(!this.__eventListeners)return;var n=this.__eventListeners[e];if(!n)return;for(var r=0,i=n.length;r<i;r++)n[r]&&n[r].call(this,t||{});return this.__eventListeners[e]=n.filter(function(e){return e!==!1}),this}fabric.Observable={observe:t,stopObserving:n,fire:r,on:t,off:n,trigger:r}}(),fabric.Collection={_objects:[],add:function(){this._objects.push.apply(this._objects,arguments);if(this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,n){var r=this._objects;return n?r[t]=e:r.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){var e=this._objects,t,n=!1;for(var r=0,i=arguments.length;r<i;r++)t=e.indexOf(arguments[r]),t!==-1&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(e,t){var n=this.getObjects();for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);return this},getObjects:function(e){return typeof e=="undefined"?this._objects.concat():this._objects.filter(function(t){return t.type===e})},item:function(e){return this._objects[e]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(e){return this._objects.indexOf(e)>-1},complexity:function(){return this._objects.reduce(function(e,t){return e+=t.complexity?t.complexity():0,e},0)}},fabric.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){e&&e.colorStops&&!(e instanceof fabric.Gradient)&&this.set(t,new fabric.Gradient(e))},_initPattern:function(e,t,n){!e||!e.source||e instanceof fabric.Pattern?n&&n():this.set(t,new fabric.Pattern(e,n))},_initClipping:function(e){if(!e.clipTo||typeof e.clipTo!="string")return;var t=fabric.util.getFunctionBody(e.clipTo);typeof t!="undefined"&&(this.clipTo=new Function("ctx",t))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return typeof e=="object"?this._setObject(e):typeof t=="function"&&e!=="clipTo"?this._set(e,t(this.get(e))):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this},get:function(e){return this[e]}},function(e){var t=Math.sqrt,n=Math.atan2,r=Math.pow,i=Math.abs,s=Math.PI/180,o=Math.PI/2;fabric.util={cos:function(e){if(e===0)return 1;e<0&&(e=-e);var t=e/o;switch(t){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(e===0)return 0;var t=e/o,n=1;e<0&&(n=-1);switch(t){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(e)},removeFromArray:function(e,t){var n=e.indexOf(t);return n!==-1&&e.splice(n,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*s},radiansToDegrees:function(e){return e/s},rotatePoint:function(e,t,n){e.subtractEquals(t);var r=fabric.util.rotateVector(e,n);return(new fabric.Point(r.x,r.y)).addEquals(t)},rotateVector:function(e,t){var n=fabric.util.sin(t),r=fabric.util.cos(t),i=e.x*r-e.y*n,s=e.x*n+e.y*r;return{x:i,y:s}},transformPoint:function(e,t,n){return n?new fabric.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new fabric.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e){var t=[e[0].x,e[1].x,e[2].x,e[3].x],n=fabric.util.array.min(t),r=fabric.util.array.max(t),i=r-n,s=[e[0].y,e[1].y,e[2].y,e[3].y],o=fabric.util.array.min(s),u=fabric.util.array.max(s),a=u-o;return{left:n,top:o,width:i,height:a}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0]],r=fabric.util.transformPoint({x:e[4],y:e[5]},n,!0);return n[4]=-r.x,n[5]=-r.y,n},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var n=/\D{0,2}$/.exec(e),r=parseFloat(e);t||(t=fabric.Text.DEFAULT_SVG_FONT_SIZE);switch(n[0]){case"mm":return r*fabric.DPI/25.4;case"cm":return r*fabric.DPI/2.54;case"in":return r*fabric.DPI;case"pt":return r*fabric.DPI/72;case"pc":return r*fabric.DPI/72*12;case"em":return r*t;default:return r}},falseFunction:function(){return!1},getKlass:function(e,t){return e=fabric.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),fabric.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(t){if(!t)return fabric;var n=t.split("."),r=n.length,i,s=e||fabric.window;for(i=0;i<r;++i)s=s[n[i]];return s},loadImage:function(e,t,n,r){if(!e){t&&t.call(n,e);return}var i=fabric.util.createImage(),s=function(){t&&t.call(n,i),i=i.onload=i.onerror=null};i.onload=s,i.onerror=function(){fabric.log("Error loading "+i.src),t&&t.call(n,null,!0),i=i.onload=i.onerror=null},e.indexOf("data")!==0&&r&&(i.crossOrigin=r),e.substring(0,14)==="data:image/svg"&&(i.onload=null,fabric.util.loadImageInDom(i,s)),i.src=e},loadImageInDom:function(e,t){var n=fabric.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(e),fabric.document.querySelector("body").appendChild(n),e.onload=function(){t(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(e,t,n,r){function i(){++o===u&&t&&t(s)}e=e||[];var s=[],o=0,u=e.length;if(!u){t&&t(s);return}e.forEach(function(e,t){if(!e||!e.type){i();return}var o=fabric.util.getKlass(e.type,n);o.fromObject(e,function(n,o){o||(s[t]=n),r&&r(e,n,o),i()})})},enlivenPatterns:function(e,t){function n(){++i===s&&t&&t(r)}e=e||[];var r=[],i=0,s=e.length;if(!s){t&&t(r);return}e.forEach(function(e,t){e&&e.source?new fabric.Pattern(e,function(e){r[t]=e,n()}):(r[t]=e,n())})},groupSVGElements:function(e,t,n){var r;return e&&e.length===1?e[0]:(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),r=new fabric.Group(e,t),typeof n!="undefined"&&(r.sourcePath=n),r)},populateWithProperties:function(e,t,n){if(n&&Object.prototype.toString.call(n)==="[object Array]")for(var r=0,i=n.length;r<i;r++)n[r]in e&&(t[n[r]]=e[n[r]])},drawDashedLine:function(e,r,i,s,o,u){var a=s-r,f=o-i,l=t(a*a+f*f),c=n(f,a),h=u.length,p=0,d=!0;e.save(),e.translate(r,i),e.moveTo(0,0),e.rotate(c),r=0;while(l>r)r+=u[p++%h],r>l&&(r=l),e[d?"lineTo":"moveTo"](r,0),d=!d;e.restore()},createCanvasElement:function(){return fabric.document.createElement("canvas")},copyCanvasElement:function(e){var t=fabric.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},createImage:function(){return fabric.document.createElement("img")},clipContext:function(e,t){t.save(),t.beginPath(),e.clipTo(t),t.clip()},multiplyTransformMatrices:function(e,t,n){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var i=n(e[1],e[0]),o=r(e[0],2)+r(e[1],2),u=t(o),a=(e[0]*e[3]-e[2]*e[1])/u,f=n(e[0]*e[2]+e[1]*e[3],o);return{angle:i/s,scaleX:u,scaleY:a,skewX:f/s,skewY:0,translateX:e[4],translateY:e[5]}},customTransformMatrix:function(e,t,n){var r=[1,0,i(Math.tan(n*s)),1],o=[i(e),0,0,i(t)];return fabric.util.multiplyTransformMatrices(o,r,!0)},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},getFunctionBody:function(e){return(String(e).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(e,t,n,r){r>0&&(t>r?t-=r:t=0,n>r?n-=r:n=0);var i=!0,s,o,u=e.getImageData(t,n,r*2||1,r*2||1),a=u.data.length;for(s=3;s<a;s+=4){o=u.data[s],i=o<=0;if(i===!1)break}return u=null,i},parsePreserveAspectRatioAttribute:function(e){var t="meet",n="Mid",r="Mid",i=e.split(" "),s;return i&&i.length&&(t=i.pop(),t!=="meet"&&t!=="slice"?(s=t,t="meet"):i.length&&(s=i.pop())),n=s!=="none"?s.slice(1,4):"none",r=s!=="none"?s.slice(5,8):"none",{meetOrSlice:t,alignX:n,alignY:r}},clearFabricFontCache:function(e){e=(e||"").toLowerCase(),e?fabric.charWidthsCache[e]&&delete fabric.charWidthsCache[e]:fabric.charWidthsCache={}},limitDimsByArea:function(e,t){var n=Math.sqrt(t*e),r=Math.floor(t/n);return{x:Math.floor(n),y:r}},capValue:function(e,t,n){return Math.max(e,Math.min(t,n))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)}}}(typeof exports!="undefined"?exports:this),function(){function t(t,n){var r=e.call(arguments,2),i=[];for(var s=0,o=t.length;s<o;s++)i[s]=r.length?t[s][n].apply(t[s],r):t[s][n].call(t[s]);return i}function n(e,t){return s(e,t,function(e,t){return e>=t})}function r(e,t){return s(e,t,function(e,t){return e<t})}function i(e,t){var n=e.length;while(n--)e[n]=t;return e}function s(e,t,n){if(!e||e.length===0)return;var r=e.length-1,i=t?e[r][t]:e[r];if(t)while(r--)n(e[r][t],i)&&(i=e[r][t]);else while(r--)n(e[r],i)&&(i=e[r]);return i}var e=Array.prototype.slice;fabric.util.array={fill:i,invoke:t,min:r,max:n}}(),function(){function e(t,n,r){if(r)if(!fabric.isLikelyNode&&n instanceof Element)t=n;else if(n instanceof Array){t=[];for(var i=0,s=n.length;i<s;i++)t[i]=e({},n[i],r)}else if(n&&typeof n=="object")for(var o in n)n.hasOwnProperty(o)&&(t[o]=e({},n[o],r));else t=n;else for(var o in n)t[o]=n[o];return t}function t(t,n){return e({},t,n)}fabric.util.object={extend:e,clone:t},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function e(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function t(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())}function n(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(e){var t=0,n,r=[];for(t=0,n;t<e.length;t++){if((n=i(e,t))===!1)continue;r.push(n)}return r}function i(e,t){var n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var r=e.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";var i=e.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1}fabric.util.string={camelize:e,capitalize:t,escapeXml:n,graphemeSplit:r}}(),function(){function i(){}function s(t){var n=null,r=this;while(r.constructor.superclass){var i=r.constructor.superclass.prototype[t];if(r[t]!==i){n=i;break}r=r.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,e.call(arguments,1)):n.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}function o(){function u(){this.initialize.apply(this,arguments)}var n=null,o=e.call(arguments,0);typeof o[0]=="function"&&(n=o.shift()),u.superclass=n,u.subclasses=[],n&&(i.prototype=n.prototype,u.prototype=new i,n.subclasses.push(u));for(var a=0,f=o.length;a<f;a++)r(u,o[a],n);return u.prototype.initialize||(u.prototype.initialize=t),u.prototype.constructor=u,u.prototype.callSuper=s,u}var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if(e==="toString")return!1;return!0}(),r=function(e,t,r){for(var i in t)i in e.prototype&&typeof e.prototype[i]=="function"&&(t[i]+"").indexOf("callSuper")>-1?e.prototype[i]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=r;var i=t[e].apply(this,arguments);this.constructor.superclass=n;if(e!=="initialize")return i}}(i):e.prototype[i]=t[i],n&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};fabric.util.createClass=o}(),function(){function t(e){var t=Array.prototype.slice.call(arguments,1),n,r,i=t.length;for(r=0;r<i;r++){n=typeof e[t[r]];if(!/^(?:function|object|unknown)$/.test(n))return!1}return!0}function s(e,t){return{handler:t,wrappedHandler:o(e,t)}}function o(e,t){return function(r){t.call(n(e),r||fabric.window.event)}}function u(e,t){return function(n){if(c[e]&&c[e][t]){var r=c[e][t];for(var i=0,s=r.length;i<s;i++)r[i].call(this,n||fabric.window.event)}}}function d(t){t||(t=fabric.window.event);var n=t.target||(typeof t.srcElement!==e?t.srcElement:null),r=fabric.util.getScrollLeftTop(n);return{x:v(t)+r.left,y:m(t)+r.top}}function g(e,t,n){var r=e.type==="touchend"?"changedTouches":"touches",i,s=e[r];return s&&s[0]&&(i=s[0][n]),typeof i=="undefined"&&(i=e[n]),i}var e="unknown",n,r,i=function(){var e=0;return function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+e++)}}();(function(){var e={};n=function(t){return e[t]},r=function(t,n){e[t]=n}})();var a=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),f=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),l={},c={},h,p;a?(h=function(e,t,n,r){e&&e.addEventListener(t,n,f?!1:r)},p=function(e,t,n,r){e&&e.removeEventListener(t,n,f?!1:r)}):f?(h=function(e,t,n){if(!e)return;var o=i(e);r(o,e),l[o]||(l[o]={}),l[o][t]||(l[o][t]=[]);var u=s(o,n);l[o][t].push(u),e.attachEvent("on"+t,u.wrappedHandler)},p=function(e,t,n){if(!e)return;var r=i(e),s;if(l[r]&&l[r][t])for(var o=0,u=l[r][t].length;o<u;o++)s=l[r][t][o],s&&s.handler===n&&(e.detachEvent("on"+t,s.wrappedHandler),l[r][t][o]=null)}):(h=function(e,t,n){if(!e)return;var r=i(e);c[r]||(c[r]={});if(!c[r][t]){c[r][t]=[];var s=e["on"+t];s&&c[r][t].push(s),e["on"+t]=u(r,t)}c[r][t].push(n)},p=function(e,t,n){if(!e)return;var r=i(e);if(c[r]&&c[r][t]){var s=c[r][t];for(var o=0,u=s.length;o<u;o++)s[o]===n&&s.splice(o,1)}}),fabric.util.addListener=h,fabric.util.removeListener=p;var v=function(e){return e.clientX},m=function(e){return e.clientY};fabric.isTouchSupported&&(v=function(e){return g(e,"pageX","clientX")},m=function(e){return g(e,"pageY","clientY")}),fabric.util.getPointer=d}(),function(){function e(e,t){var n=e.style;if(!n)return e;if(typeof t=="string")return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?s(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var r in t)if(r==="opacity")s(e,t[r]);else{var i=r==="float"||r==="cssFloat"?typeof n.styleFloat=="undefined"?"cssFloat":"styleFloat":r;n[i]=t[r]}return e}var t=fabric.document.createElement("div"),n=typeof t.style.opacity=="string",r=typeof t.style.filter=="string",i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e};n?s=function(e,t){return e.style.opacity=t,e}:r&&(s=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),i.test(n.filter)?(t=t>=.9999?"":"alpha(opacity="+t*100+")",n.filter=n.filter.replace(i,t)):n.filter+=" alpha(opacity="+t*100+")",e}),fabric.util.setStyle=e}(),function(){function t(e){return typeof e=="string"?fabric.document.getElementById(e):e}function s(e,t){var n=fabric.document.createElement(e);for(var r in t)r==="class"?n.className=t[r]:r==="for"?n.htmlFor=t[r]:n.setAttribute(r,t[r]);return n}function o(e,t){e&&(" "+e.className+" ").indexOf(" "+t+" ")===-1&&(e.className+=(e.className?" ":"")+t)}function u(e,t,n){return typeof t=="string"&&(t=s(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t}function a(e){var t=0,n=0,r=fabric.document.documentElement,i=fabric.document.body||{scrollLeft:0,scrollTop:0};while(e&&(e.parentNode||e.host)){e=e.parentNode||e.host,e===fabric.document?(t=i.scrollLeft||r.scrollLeft||0,n=i.scrollTop||r.scrollTop||0):(t+=e.scrollLeft||0,n+=e.scrollTop||0);if(e.nodeType===1&&e.style.position==="fixed")break}return{left:t,top:n}}function f(e){var t,n=e&&e.ownerDocument,r={left:0,top:0},i={left:0,top:0},s,o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return i;for(var u in o)i[o[u]]+=parseInt(l(e,u),10)||0;return t=n.documentElement,typeof e.getBoundingClientRect!="undefined"&&(r=e.getBoundingClientRect()),s=a(e),{left:r.left+s.left-(t.clientLeft||0)+i.left,top:r.top+s.top-(t.clientTop||0)+i.top}}function c(e){var t=fabric.jsdomImplForWrapper(e);return t._canvas||t._image}function h(e){if(!fabric.isLikelyNode)return;var t=fabric.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}var e=Array.prototype.slice,n,r=function(t){return e.call(t,0)};try{n=r(fabric.document.childNodes)instanceof Array}catch(i){}n||(r=function(e){var t=new Array(e.length),n=e.length;while(n--)t[n]=e[n];return t});var l;fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?l=function(e,t){var n=fabric.document.defaultView.getComputedStyle(e,null);return n?n[t]:undefined}:l=function(e,t){var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),n},function(){function n(e){return typeof e.onselectstart!="undefined"&&(e.onselectstart=fabric.util.falseFunction),t?e.style[t]="none":typeof e.unselectable=="string"&&(e.unselectable="on"),e}function r(e){return typeof e.onselectstart!="undefined"&&(e.onselectstart=null),t?e.style[t]="":typeof e.unselectable=="string"&&(e.unselectable=""),e}var e=fabric.document.documentElement.style,t="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=n,fabric.util.makeElementSelectable=r}(),function(){function e(e,t){var n=fabric.document.getElementsByTagName("head")[0],r=fabric.document.createElement("script"),i=!0;r.onload=r.onreadystatechange=function(e){if(i){if(typeof this.readyState=="string"&&this.readyState!=="loaded"&&this.readyState!=="complete")return;i=!1,t(e||fabric.window.event),r=r.onload=r.onreadystatechange=null}},r.src=e,n.appendChild(r)}fabric.util.getScript=e}(),fabric.util.getById=t,fabric.util.toArray=r,fabric.util.makeElement=s,fabric.util.addClass=o,fabric.util.wrapElement=u,fabric.util.getScrollLeftTop=a,fabric.util.getElementOffset=f,fabric.util.getElementStyle=l,fabric.util.getNodeCanvas=c,fabric.util.cleanUpJsdomNode=h}(),fabric.log=function(){},fabric.warn=function(){},typeof console!="undefined"&&["log","warn"].forEach(function(e){typeof console[e]!="undefined"&&typeof console[e].apply=="function"&&(fabric[e]=function(){return console[e].apply(console,arguments)})}),function(){function e(){return!1}function t(t){i(function(n){t||(t={});var r=n||+(new Date),s=t.duration||500,o=r+s,u,a=t.onChange||e,f=t.abort||e,l=t.onComplete||e,c=t.easing||function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},h="startValue"in t?t.startValue:0,p="endValue"in t?t.endValue:100,d=t.byValue||p-h;t.onStart&&t.onStart(),function v(e){if(f()){l(p,1,1);return}u=e||+(new Date);var n=u>o?s:u-r,m=n/s,g=c(n,h,d,s),y=Math.abs((g-h)/d);a(g,y,m);if(u>o){t.onComplete&&t.onComplete();return}i(v)}(r)})}function i(){return n.apply(fabric.window,arguments)}function s(){return r.apply(fabric.window,arguments)}var n=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(e){return fabric.window.setTimeout(e,1e3/60)},r=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;fabric.util.animate=t,fabric.util.requestAnimFrame=i,fabric.util.cancelAnimFrame=s}(),function(e){function n(e,t){this.x=e,this.y=t}var t=e.fabric||(e.fabric={});if(t.Point){t.warn("fabric.Point is already defined");return}t.Point=n,n.prototype={type:"point",constructor:n,add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return typeof t=="undefined"&&(t=.5),t=Math.max(Math.min(1,t),0),new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n},clone:function(){return new n(this.x,this.y)}}}(typeof exports!="undefined"?exports:this),function(e){function n(e){this.status=e,this.points=[]}var t=e.fabric||(e.fabric={});if(t.Intersection){t.warn("fabric.Intersection is already defined");return}t.Intersection=n,t.Intersection.prototype={appendPoint:function(e){this.points.push(e)},appendPoints:function(e){this.points=this.points.concat(e)}},t.Intersection.intersectLineLine=function(e,r,i,s){var o,u=(s.x-i.x)*(e.y-i.y)-(s.y-i.y)*(e.x-i.x),a=(r.x-e.x)*(e.y-i.y)-(r.y-e.y)*(e.x-i.x),f=(s.y-i.y)*(r.x-e.x)-(s.x-i.x)*(r.y-e.y);if(f!==0){var l=u/f,c=a/f;0<=l&&l<=1&&0<=c&&c<=1?(o=new n("Intersection"),o.points.push(new t.Point(e.x+l*(r.x-e.x),e.y+l*(r.y-e.y)))):o=new n}else u===0||a===0?o=new n("Coincident"):o=new n("Parallel");return o},t.Intersection.intersectLinePolygon=function(e,t,r){var i=new n,s=r.length;for(var o=0;o<s;o++){var u=r[o],a=r[(o+1)%s],f=n.intersectLineLine(e,t,u,a);i.appendPoints(f.points)}return i.points.length>0&&(i.status="Intersection"),i},t.Intersection.intersectPolygonPolygon=function(e,t){var r=new n,i=e.length;for(var s=0;s<i;s++){var o=e[s],u=e[(s+1)%i],a=n.intersectLinePolygon(o,u,t);r.appendPoints(a.points)}return r.points.length>0&&(r.status="Intersection"),r},t.Intersection.intersectPolygonRectangle=function(e,r,i){var s=r.min(i),o=r.max(i),u=new t.Point(o.x,s.y),a=new t.Point(s.x,o.y),f=n.intersectLinePolygon(s,u,e),l=n.intersectLinePolygon(u,o,e),c=n.intersectLinePolygon(o,a,e),h=n.intersectLinePolygon(a,s,e),p=new n;return p.appendPoints(f.points),p.appendPoints(l.points),p.appendPoints(c.points),p.appendPoints(h.points),p.points.length>0&&(p.status="Intersection"),p}}(typeof exports!="undefined"?exports:this),function(){if(fabric.StaticCanvas){fabric.warn("fabric.StaticCanvas is already defined.");return}var e=fabric.util.object.extend,t=fabric.util.getElementOffset,n=fabric.util.removeFromArray,r=fabric.util.toFixed,i=fabric.util.transformPoint,s=fabric.util.invertTransform,o=fabric.util.getNodeCanvas,u=fabric.util.createCanvasElement,a=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:undefined,_initStatic:function(e,t){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,n),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,n),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,n),t.overlayColor&&this.setOverlayColor(t.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return fabric.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?fabric.devicePixelRatio:1},_initRetinaScaling:function(){if(!this._isRetinaScaling())return;this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return this.__setBgOverlayImage("overlayImage",e,t,n)},setBackgroundImage:function(e,t,n){return this.__setBgOverlayImage("backgroundImage",e,t,n)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},_setImageSmoothing:function(){var e=this.getContext();e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,t,n,r){return typeof t=="string"?fabric.util.loadImage(t,function(t){if(t){var i=new fabric.Image(t,r);this[e]=i,i.canvas=this}n&&n(t)},this,r&&r.crossOrigin):(r&&t.setOptions(r),this[e]=t,t&&(t.canvas=this),n&&n(t)),this},__setBgOverlayColor:function(e,t,n){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,n),this},_createCanvasElement:function(){var e=u();if(!e)throw a;e.style||(e.style={});if(typeof e.getContext=="undefined")throw a;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0;if(!this.lowerCanvasEl.style)return;t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice()},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=fabric.util.getById(e)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var n;t=t||{};for(var r in e)n=e[r],t.cssOnly||(this._setBackstoreDimension(r,e[r]),n+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(r,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t=this._activeObject,n,r=!1,i=!0,s,o;this.viewportTransform=e;for(s=0,o=this._objects.length;s<o;s++)n=this._objects[s],n.group||n.setCoords(r,i);return t&&t.type==="activeSelection"&&t.setCoords(r,i),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var n=e,r=this.viewportTransform.slice(0);e=i(e,s(this.viewportTransform)),r[0]=t,r[3]=t;var o=i(e,r);return r[4]+=n.x-o.x,r[5]+=n.y-o.y,this.setViewportTransform(r)},setZoom:function(e){return this.zoomToPoint(new fabric.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new fabric.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,n=this.height,r=s(this.viewportTransform);return e.tl=i({x:0,y:0},r),e.br=i({x:t,y:n},r),e.tr=new fabric.Point(e.br.x,e.tl.y),e.bl=new fabric.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),this.fire("before:render",{ctx:e}),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.clipTo&&e.restore(),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,n=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var n,r;for(n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)},_renderBackgroundOrOverlay:function(e,t){var n=this[t+"Color"],r;n&&(e.fillStyle=n.toLive?n.toLive(e,this):n,e.fillRect(n.offsetX||0,n.offsetY||0,this.width,this.height)),n=this[t+"Image"],n&&(this[t+"Vpt"]&&(r=this.viewportTransform,e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5])),n.render(e),this[t+"Vpt"]&&e.restore())},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(e){return this._centerObject(e,new fabric.Point(this.getCenter().left,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new fabric.Point(e.getCenterPoint().x,this.getCenter().top))},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new fabric.Point(t.left,t.top))},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new fabric.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new fabric.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenter(),t=s(this.viewportTransform);return i({x:e.left,y:e.top},t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var r=this.clipPath,i={version:fabric.version,objects:this._toObjects(t,n)};return r&&(r=r.toObject(n)),e(i,this.__serializeBgOverlay(t,n)),fabric.util.populateWithProperties(this,i,n),i},_toObjects:function(e,t){return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(n){return this._toObject(n,e,t)},this)},_toObject:function(e,t,n){var r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);var i=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=r),i},__serializeBgOverlay:function(e,t){var n={},r=this.backgroundImage,i=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(t):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(t):this.overlayColor),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n},sendToBack:function(e){if(!e)return this;var t=this._activeObject,r,i,s;if(e===t&&e.type==="activeSelection"){s=t._objects;for(r=s.length;r--;)i=s[r],n(this._objects,i),this._objects.unshift(i)}else n(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t=this._activeObject,r,i,s;if(e===t&&e.type==="activeSelection"){s=t._objects;for(r=0;r<s.length;r++)i=s[r],n(this._objects,i),this._objects.push(i)}else n(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var r=this._activeObject,i,s,o,u,a,f=0;if(e===r&&e.type==="activeSelection"){a=r._objects;for(i=0;i<a.length;i++)s=a[i],o=this._objects.indexOf(s),o>0+f&&(u=o-1,n(this._objects,s),this._objects.splice(u,0,s)),f++}else o=this._objects.indexOf(e),o!==0&&(u=this._findNewLowerIndex(e,o,t),n(this._objects,e),this._objects.splice(u,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,n){var r,i;if(n){r=t;for(i=t-1;i>=0;--i){var s=e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e);if(s){r=i;break}}}else r=t-1;return r},bringForward:function(e,t){if(!e)return this;var r=this._activeObject,i,s,o,u,a,f=0;if(e===r&&e.type==="activeSelection"){a=r._objects;for(i=a.length;i--;)s=a[i],o=this._objects.indexOf(s),o<this._objects.length-1-f&&(u=o+1,n(this._objects,s),this._objects.splice(u,0,s)),f++}else o=this._objects.indexOf(e),o!==this._objects.length-1&&(u=this._findNewUpperIndex(e,o,t),n(this._objects,e),this._objects.splice(u,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,n){var r,i,s;if(n){r=t;for(i=t+1,s=this._objects.length;i<s;++i){var o=e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e);if(o){r=i;break}}}else r=t+1;return r},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(e){e.dispose&&e.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=undefined,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): "+"{ objects: "+this._objects.length+" }>"}}),e(fabric.StaticCanvas.prototype,fabric.Observable),e(fabric.StaticCanvas.prototype,fabric.Collection),e(fabric.StaticCanvas.prototype,fabric.DataURLExporter),e(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=u();if(!t||!t.getContext)return null;var n=t.getContext("2d");if(!n)return null;switch(e){case"getImageData":return typeof n.getImageData!="undefined";case"setLineDash":return typeof n.setLineDash!="undefined";case"toDataURL":return typeof t.toDataURL!="undefined";case"toDataURLWithQuality":try{return t.toDataURL("image/jpeg",0),!0}catch(r){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var e=o(this.lowerCanvasEl);return e&&e.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(e){var t=o(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}(),function(){var e=fabric.util.getPointer,t=fabric.util.degreesToRadians,n=fabric.util.radiansToDegrees,r=Math.atan2,i=Math.abs,s=fabric.StaticCanvas.supports("setLineDash"),o=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e=this.getActiveObjects(),t,n,r;if(e.length>0&&!this.preserveObjectStacking){n=[],r=[];for(var i=0,s=this._objects.length;i<s;i++)t=this._objects[i],e.indexOf(t)===-1?n.push(t):r.push(t);e.length>1&&(this._activeObject._objects=r),n.push.apply(n,r)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0)},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_resetCurrentTransform:function(){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,skewX:e.original.skewX,skewY:e.original.skewY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(e.target)?(e.originX!=="center"&&(e.originX==="right"?e.mouseXSign=-1:e.mouseXSign=1),e.originY!=="center"&&(e.originY==="bottom"?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(e,t,n){var r=!0,i=n||this.getPointer(e,r),s;return t.group&&t.group===this._activeObject&&t.group.type==="activeSelection"?s=this._normalizePointer(t.group,i):s={x:i.x,y:i.y},t.containsPoint(s)||t._findTargetCorner(i)},_normalizePointer:function(e,t){var n=e.calcTransformMatrix(),r=fabric.util.invertTransform(n),i=this.restorePointerVpt(t);return fabric.util.transformPoint(i,r)},isTargetTransparent:function(e,t,n){if(e.shouldCache()&&e._cacheCanvas){var r=this._normalizePointer(e,{x:t,y:n}),i=e.cacheTranslationX+r.x*e.zoomX,s=e.cacheTranslationY+r.y*e.zoomY,o=fabric.util.isTransparent(e._cacheContext,i,s,this.targetFindTolerance);return o}var u=this.contextCache,a=e.selectionBackgroundColor,f=this.viewportTransform;e.selectionBackgroundColor="",this.clearContext(u),u.save(),u.transform(f[0],f[1],f[2],f[3],f[4],f[5]),e.render(u),u.restore(),e===this._activeObject&&e._renderControls(u,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),e.selectionBackgroundColor=a;var o=fabric.util.isTransparent(u,t,n,this.targetFindTolerance);return o},_isSelectionKeyPressed:function(e){var t=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?t=!!this.selectionKey.find(function(t){return e[t]===!0}):t=e[this.selectionKey],t},_shouldClearSelection:function(e,t){var n=this.getActiveObjects(),r=this._activeObject;return!t||t&&r&&n.length>1&&n.indexOf(t)===-1&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t},_shouldCenterTransform:function(e){if(!e)return;var t=this._currentTransform,n;return t.action==="scale"||t.action==="scaleX"||t.action==="scaleY"?n=this.centeredScaling||e.centeredScaling:t.action==="rotate"&&(n=this.centeredRotation||e.centeredRotation),n?!t.altKey:t.altKey},_getOriginFromCorner:function(e,t){var n={x:e.originX,y:e.originY};if(t==="ml"||t==="tl"||t==="bl")n.x="right";else if(t==="mr"||t==="tr"||t==="br")n.x="left";if(t==="tl"||t==="mt"||t==="tr")n.y="bottom";else if(t==="bl"||t==="mb"||t==="br")n.y="top";return n},_getActionFromCorner:function(e,t,n){if(!t)return"drag";switch(t){case"mtr":return"rotate";case"ml":case"mr":return n[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return n[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(e,n){if(!n)return;var r=this.getPointer(e),i=n._findTargetCorner(this.getPointer(e,!0)),s=this._getActionFromCorner(n,i,e),o=this._getOriginFromCorner(n,i);this._currentTransform={target:n,action:s,corner:i,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:r.x-n.left,offsetY:r.y-n.top,originX:o.x,originY:o.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:t(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:e.shiftKey,altKey:e[this.centeredKey],original:fabric.util.saveObjectTransform(n)},this._currentTransform.original.originX=o.x,this._currentTransform.original.originY=o.y,this._resetCurrentTransform(),this._beforeTransform(e)},_translateObject:function(e,t){var n=this._currentTransform,r=n.target,i=e-n.offsetX,s=t-n.offsetY,o=!r.get("lockMovementX")&&r.left!==i,u=!r.get("lockMovementY")&&r.top!==s;return o&&r.set("left",i),u&&r.set("top",s),o||u},_changeSkewTransformOrigin:function(e,t,n){var r="originX",i={0:"center"},s=t.target.skewX,o="left",u="right",a=t.corner==="mt"||t.corner==="ml"?1:-1,f=1;e=e>0?1:-1,n==="y"&&(s=t.target.skewY,o="top",u="bottom",r="originY"),i[-1]=o,i[1]=u,t.target.flipX&&(f*=-1),t.target.flipY&&(f*=-1),s===0?(t.skewSign=-a*e*f,t[r]=i[-e]):(s=s>0?1:-1,t.skewSign=s,t[r]=i[s*a*f])},_skewObject:function(e,t,n){var r=this._currentTransform,i=r.target,s=!1,o=i.get("lockSkewingX"),u=i.get("lockSkewingY");if(o&&n==="x"||u&&n==="y")return!1;var a=i.getCenterPoint(),f=i.toLocalPoint(new fabric.Point(e,t),"center","center")[n],l=i.toLocalPoint(new fabric.Point(r.lastX,r.lastY),"center","center")[n],c,h,p=i._getTransformedDimensions();return this._changeSkewTransformOrigin(f-l,r,n),c=i.toLocalPoint(new fabric.Point(e,t),r.originX,r.originY)[n],h=i.translateToOriginPoint(a,r.originX,r.originY),s=this._setObjectSkew(c,r,n,p),r.lastX=e,r.lastY=t,i.setPositionByOrigin(h,r.originX,r.originY),s},_setObjectSkew:function(e,t,n,r){var i=t.target,s,o=!1,u=t.skewSign,a,f,l,c,h,p,d,v;return n==="x"?(l="y",c="Y",h="X",d=0,v=i.skewY):(l="x",c="X",h="Y",d=i.skewX,v=0),f=i._getTransformedDimensions(d,v),p=2*Math.abs(e)-f[n],p<=2?s=0:(s=u*Math.atan(p/i["scale"+h]/(f[l]/i["scale"+c])),s=fabric.util.radiansToDegrees(s)),o=i["skew"+h]!==s,i.set("skew"+h,s),i["skew"+c]!==0&&(a=i._getTransformedDimensions(),s=r[l]/a[l]*i["scale"+c],i.set("scale"+c,s)),o},_scaleObject:function(e,t,n){var r=this._currentTransform,i=r.target,s=i.lockScalingX,o=i.lockScalingY,u=i.lockScalingFlip;if(s&&o)return!1;var a=i.translateToOriginPoint(i.getCenterPoint(),r.originX,r.originY),f=i.toLocalPoint(new fabric.Point(e,t),r.originX,r.originY),l=i._getTransformedDimensions(),c=!1;return this._setLocalMouse(f,r),c=this._setObjectScale(f,r,s,o,n,u,l),i.setPositionByOrigin(a,r.originX,r.originY),c},_setObjectScale:function(e,t,n,r,i,s,o){var u=t.target,a=!1,f=!1,l=!1,c,h,p,d;return p=e.x*u.scaleX/o.x,d=e.y*u.scaleY/o.y,c=u.scaleX!==p,h=u.scaleY!==d,s&&p<=0&&p<u.scaleX&&(a=!0,e.x=0),s&&d<=0&&d<u.scaleY&&(f=!0,e.y=0),i==="equally"&&!n&&!r?l=this._scaleObjectEqually(e,u,t,o):i?i==="x"&&!u.get("lockUniScaling")?a||n||u.set("scaleX",p)&&(l=l||c):i==="y"&&!u.get("lockUniScaling")&&(f||r||u.set("scaleY",d)&&(l=l||h)):(a||n||u.set("scaleX",p)&&(l=l||c),f||r||u.set("scaleY",d)&&(l=l||h)),t.newScaleX=p,t.newScaleY=d,a||f||this._flipObject(t,i),l},_scaleObjectEqually:function(e,t,n,r){var i=e.y+e.x,s=r.y*n.original.scaleY/t.scaleY+r.x*n.original.scaleX/t.scaleX,o,u=e.x<0?-1:1,a=e.y<0?-1:1;return n.newScaleX=u*Math.abs(n.original.scaleX*i/s),n.newScaleY=a*Math.abs(n.original.scaleY*i/s),o=n.newScaleX!==t.scaleX||n.newScaleY!==t.scaleY,t.set("scaleX",n.newScaleX),t.set("scaleY",n.newScaleY),o},_flipObject:function(e,t){e.newScaleX<0&&t!=="y"&&(e.originX==="left"?e.originX="right":e.originX==="right"&&(e.originX="left")),e.newScaleY<0&&t!=="x"&&(e.originY==="top"?e.originY="bottom":e.originY==="bottom"&&(e.originY="top"))},_setLocalMouse:function(e,t){var n=t.target,r=this.getZoom(),s=n.padding/r;t.originX==="right"?e.x*=-1:t.originX==="center"&&(e.x*=t.mouseXSign*2,e.x<0&&(t.mouseXSign=-t.mouseXSign)),t.originY==="bottom"?e.y*=-1:t.originY==="center"&&(e.y*=t.mouseYSign*2,e.y<0&&(t.mouseYSign=-t.mouseYSign)),i(e.x)>s?e.x<0?e.x+=s:e.x-=s:e.x=0,i(e.y)>s?e.y<0?e.y+=s:e.y-=s:e.y=0},_rotateObject:function(e,t){var i=this._currentTransform,s=i.target,o,o=s.translateToOriginPoint(s.getCenterPoint(),i.originX,i.originY);if(s.lockRotation)return!1;var u=r(i.ey-o.y,i.ex-o.x),a=r(t-o.y,e-o.x),f=n(a-u+i.theta),l=!0;if(s.snapAngle>0){var c=s.snapAngle,h=s.snapThreshold||c,p=Math.ceil(f/c)*c,d=Math.floor(f/c)*c;Math.abs(f-d)<h?f=d:Math.abs(f-p)<h&&(f=p)}return f<0&&(f=360+f),f%=360,s.angle===f?l=!1:(s.angle=f,s.setPositionByOrigin(o,i.originX,i.originY)),l},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,n=t.left,r=t.top,u=i(n),a=i(r);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(t.ex-(n>0?0:-n),t.ey-(r>0?0:-r),u,a));if(!this.selectionLineWidth||!this.selectionBorderColor)return;e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor;if(this.selectionDashArray.length>1&&!s){var f=t.ex+o-(n>0?0:u),l=t.ey+o-(r>0?0:a);e.beginPath(),fabric.util.drawDashedLine(e,f,l,f+u,l,this.selectionDashArray),fabric.util.drawDashedLine(e,f,l+a-1,f+u,l+a-1,this.selectionDashArray),fabric.util.drawDashedLine(e,f,l,f,l+a,this.selectionDashArray),fabric.util.drawDashedLine(e,f+u-1,l,f+u-1,l+a,this.selectionDashArray),e.closePath(),e.stroke()}else fabric.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(t.ex+o-(n>0?0:u),t.ey+o-(r>0?0:a),u,a)},findTarget:function(e,t){if(this.skipTargetFind)return;var n=!0,r=this.getPointer(e,n),i=this._activeObject,s=this.getActiveObjects(),o,u;this.targets=[];if(s.length>1&&!t&&i===this._searchPossibleTargets([i],r))return i;if(s.length===1&&i._findTargetCorner(r))return i;if(s.length===1&&i===this._searchPossibleTargets([i],r)){if(!this.preserveObjectStacking)return i;o=i,u=this.targets,this.targets=[]}var a=this._searchPossibleTargets(this._objects,r);return e[this.altSelectionKey]&&a&&o&&a!==o&&(a=o,this.targets=u),a},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&this.containsPoint(null,t,e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||!!t.isEditing)return!0;var r=this.isTargetTransparent(t,n.x,n.y);if(!r)return!0}},_searchPossibleTargets:function(e,t){var n,r=e.length,i;while(r--){var s=e[r],o=s.group&&s.group.type!=="activeSelection"?this._normalizePointer(s.group,t):t;if(this._checkTarget(o,s,t)){n=e[r],n.subTargetCheck&&n instanceof fabric.Group&&(i=this._searchPossibleTargets(n._objects,t),i&&this.targets.push(i));break}}return n},restorePointerVpt:function(e){return fabric.util.transformPoint(e,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var r=e(t),i=this.upperCanvasEl,s=i.getBoundingClientRect(),o=s.width||0,u=s.height||0,a;if(!o||!u)"top"in s&&"bottom"in s&&(u=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(o=Math.abs(s.right-s.left));return this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r)),o===0||u===0?a={width:1,height:1}:a={width:i.width/o,height:i.height/u},{x:r.x*a.width,y:r.y*a.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl?this.upperCanvasEl.className="":this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+e),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,n=this.height||e.height;fabric.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=n,fabric.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?e.type==="activeSelection"&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),this._hoveredTarget===e&&(this._hoveredTarget=null),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var n=!1,r=this.getActiveObjects(),i=[],s=[],o={e:t};e.forEach(function(e){r.indexOf(e)===-1&&(n=!0,e.fire("deselected",o),s.push(e))}),r.forEach(function(t){e.indexOf(t)===-1&&(n=!0,t.fire("selected",o),i.push(t))}),e.length>0&&r.length>0?(o.selected=i,o.deselected=s,o.updated=i[0]||s[0],o.target=this._activeObject,n&&this.fire("selection:updated",o)):r.length>0?(r.length===1&&(o.target=i[0],this.fire("object:selected",o)),o.selected=i,o.target=this._activeObject,this.fire("selection:created",o)):e.length>0&&(o.deselected=s,this.fire("selection:cleared",o))},setActiveObject:function(e,t){var n=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(n,t),this},_setActiveObject:function(e,t){return this._activeObject===e?!1:this._discardActiveObject(t,e)?e.onSelect({e:t})?!1:(this._activeObject=e,!0):!1},_discardActiveObject:function(e,t){var n=this._activeObject;if(n){if(n.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects();return t.length&&this.fire("before:selection:cleared",{target:t[0],e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=undefined}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(e),i=this.callSuper("_toObject",e,t,n);return this._unwindGroupTransformOnObject(e,r),i},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group.type==="activeSelection"&&this._activeObject===e.group){var t=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return t.forEach(function(t){n[t]=e[t]}),this._activeObject.realizeTransform(e),n}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,n){var r=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,n),this._unwindGroupTransformOnObject(t,r)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,e)}});for(var u in fabric.StaticCanvas)u!=="prototype"&&(fabric.Canvas[u]=fabric.StaticCanvas[u]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){})}(),function(){function u(e,t){return"which"in e?e.which===t:e.button===t-1}var e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},t=fabric.util.addListener,n=fabric.util.removeListener,r=3,i=2,s=1,o={passive:!1};fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},addOrRemove:function(e,t){e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove,o),e(this.upperCanvasEl,"mouseout",this._onMouseOut),e(this.upperCanvasEl,"mouseenter",this._onMouseEnter),e(this.upperCanvasEl,"wheel",this._onMouseWheel),e(this.upperCanvasEl,"contextmenu",this._onContextMenu),e(this.upperCanvasEl,"dblclick",this._onDoubleClick),e(this.upperCanvasEl,"touchstart",this._onMouseDown,o),e(this.upperCanvasEl,"touchmove",this._onMouseMove,o),e(this.upperCanvasEl,"dragover",this._onDragOver),e(this.upperCanvasEl,"dragenter",this._onDragEnter),e(this.upperCanvasEl,"dragleave",this._onDragLeave),e(this.upperCanvasEl,"drop",this._onDrop),typeof eventjs!="undefined"&&t in eventjs&&(eventjs[t](this.upperCanvasEl,"gesture",this._onGesture),eventjs[t](this.upperCanvasEl,"drag",this._onDrag),eventjs[t](this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs[t](this.upperCanvasEl,"shake",this._onShake),eventjs[t](this.upperCanvasEl,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,"remove"),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp,o),n(fabric.document,"mousemove",this._onMouseMove,o),n(fabric.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){if(this.eventsBound)return;this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e}),this._iTextInstances&&this._iTextInstances.forEach(function(e){e.isEditing&&e.hiddenTextarea.focus()})},_onMouseEnter:function(e){this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null)},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},_onMouseDown:function(e){this.__onMouseDown(e),this._resetTransformEventData(),t(fabric.document,"touchend",this._onMouseUp,o),t(fabric.document,"touchmove",this._onMouseMove,o),n(this.upperCanvasEl,"mousemove",this._onMouseMove,o),n(this.upperCanvasEl,"touchmove",this._onMouseMove,o),e.type==="touchstart"?n(this.upperCanvasEl,"mousedown",this._onMouseDown):(t(fabric.document,"mouseup",this._onMouseUp),t(fabric.document,"mousemove",this._onMouseMove,o))},_onMouseUp:function(e){this.__onMouseUp(e),this._resetTransformEventData(),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp,o),n(fabric.document,"mousemove",this._onMouseMove,o),n(fabric.document,"touchmove",this._onMouseMove,o),t(this.upperCanvasEl,"mousemove",this._onMouseMove,o),t(this.upperCanvasEl,"touchmove",this._onMouseMove,o);if(e.type==="touchend"){var r=this;setTimeout(function(){t(r.upperCanvasEl,"mousedown",r._onMouseDown)},400)}},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!t!=!!e||t&&e&&t!==e?!0:t&&t.isEditing?!1:!1},__onMouseUp:function(e){var t,n=this._currentTransform,o=this._groupSelector,a=!1,f=!o||o.left===0&&o.top===0;this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before");if(u(e,r)){this.fireRightClick&&this._handleEvent(e,"up",r,f);return}if(u(e,i)){this.fireMiddleClick&&this._handleEvent(e,"up",i,f),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(e);return}n&&(this._finalizeCurrentTransform(e),a=n.actionPerformed),f||(this._maybeGroupObjects(e),a||(a=this._shouldRender(t))),t&&(t.isMoving=!1),this._setCursorFromEvent(e,t),this._handleEvent(e,"up",s,f),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),a?this.requestRenderAll():f||this.renderTop()},_simpleEventHandler:function(e,t){var n=this.findTarget(t),r=this.targets,i={e:t,target:n,subTargets:r};this.fire(e,i),n&&n.fire(e,i);if(!r)return n;for(var s=0;s<r.length;s++)r[s].fire(e,i);return n},_handleEvent:function(e,t,n,r){var i=this._target,o=this.targets||[],u={e:e,target:i,subTargets:o,button:n||s,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+t,u),i&&i.fire("mouse"+t,u);for(var a=0;a<o.length;a++)o[a].fire("mouse"+t,u)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,n=t.target,r,i={e:e,target:n,transform:t};n._scaling&&(n._scaling=!1),n.setCoords();if(t.actionPerformed||this.stateful&&n.hasStateChanged())t.actionPerformed&&(r=this._addEventOptions(i,t),this._fire(r,i)),this._fire("modified",i)},_addEventOptions:function(e,t){var n,r;switch(t.action){case"scaleX":n="scaled",r="x";break;case"scaleY":n="scaled",r="y";break;case"skewX":n="skewed",r="x";break;case"skewY":n="skewed",r="y";break;case"scale":n="scaled",r="equally";break;case"rotate":n="rotated";break;case"drag":n="moved"}return e.by=r,n},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t)}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(u(e,r)){this.fireRightClick&&this._handleEvent(e,"down",r);return}if(u(e,i)){this.fireMiddleClick&&this._handleEvent(e,"down",i);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(e);return}if(this._currentTransform)return;var n=this._pointer;this._previousPointer=n;var s=this._shouldRender(t),o=this._shouldGroup(e,t);this._shouldClearSelection(e,t)?this.discardActiveObject(e):o&&(this._handleGrouping(e,t),t=this._activeObject),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)&&(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0}),t&&(t.selectable&&this.setActiveObject(t,e),t===this._activeObject&&(t.__corner||!o)&&this._setupCurrentTransform(e,t)),this._handleEvent(e,"down"),(s||o)&&this.requestRenderAll()},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t}),t.corner&&this.onBeforeScaleRotate(t.target)},__onMouseMove:function(e){this._handleEvent(e,"move:before"),this._cacheTransformEventData(e);var t,n;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(e);return}if(typeof e.touches!="undefined"&&e.touches.length>1)return;var r=this._groupSelector;r?(n=this._pointer,r.left=n.x-r.ex,r.top=n.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()},_fireOverOutEvents:function(e,t){this.fireSynteticInOutEvents(e,t,{targetName:"_hoveredTarget",canvasEvtOut:"mouse:out",evtOut:"mouseout",canvasEvtIn:"mouse:over",evtIn:"mouseover"})},_fireEnterLeaveEvents:function(e,t){this.fireSynteticInOutEvents(e,t,{targetName:"_draggedoverTarget",evtOut:"dragleave",evtIn:"dragenter"})},fireSynteticInOutEvents:function(e,t,n){var r,i,s=this[n.targetName],o,u,a=s!==e,f=n.canvasEvtIn,l=n.canvasEvtOut;a&&(r={e:t,target:e,previousTarget:s},i={e:t,target:s,nextTarget:e},this[n.targetName]=e),u=e&&a,o=s&&a,o&&(l&&this.fire(l,i),s.fire(n.evtOut,i)),u&&(f&&this.fire(f,r),e.fire(n.evtIn,r))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,n.shiftKey=e.shiftKey,n.altKey=e[this.centeredKey],this._beforeScaleTransform(e,n),this._performTransformAction(e,n,t),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,n){var r=n.x,i=n.y,s=t.action,o=!1,u={target:t.target,e:e,transform:t,pointer:n};s==="rotate"?(o=this._rotateObject(r,i))&&this._fire("rotating",u):s==="scale"?(o=this._onScale(e,t,r,i))&&this._fire("scaling",u):s==="scaleX"?(o=this._scaleObject(r,i,"x"))&&this._fire("scaling",u):s==="scaleY"?(o=this._scaleObject(r,i,"y"))&&this._fire("scaling",u):s==="skewX"?(o=this._skewObject(r,i,"x"))&&this._fire("skewing",u):s==="skewY"?(o=this._skewObject(r,i,"y"))&&this._fire("skewing",u):(o=this._translateObject(r,i),o&&(this._fire("moving",u),this.setCursor(u.target.moveCursor||this.moveCursor))),t.actionPerformed=t.actionPerformed||o},_fire:function(e,t){this.fire("object:"+e,t),t.target.fire(e,t)},_beforeScaleTransform:function(e,t){if(t.action==="scale"||t.action==="scaleX"||t.action==="scaleY"){var n=this._shouldCenterTransform(t.target);if(n&&(t.originX!=="center"||t.originY!=="center")||!n&&t.originX==="center"&&t.originY==="center")this._resetCurrentTransform(),t.reset=!0}},_onScale:function(e,t,n,r){return this._isUniscalePossible(e,t.target)?(t.currentAction="scale",this._scaleObject(n,r)):(!t.reset&&t.currentAction==="scale"&&this._resetCurrentTransform(),t.currentAction="scaleEqually",this._scaleObject(n,r,"equally"))},_isUniscalePossible:function(e,t){return(e[this.uniScaleKey]||this.uniScaleTransform)&&!t.get("lockUniScaling")},_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var n=t.hoverCursor||this.hoverCursor,r=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,i=(!r||!r.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));i?this.setCursor(this.getCornerCursor(i,t,e)):this.setCursor(n)},getCornerCursor:function(t,n,r){return this.actionIsDisabled(t,n,r)?this.notAllowedCursor:t in e?this._getRotatedCornerCursor(t,n,r):t==="mtr"&&n.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(e,t,n){return e==="mt"||e==="mb"?n[this.altActionKey]?t.lockSkewingX:t.lockScalingY:e==="ml"||e==="mr"?n[this.altActionKey]?t.lockSkewingY:t.lockScalingX:e==="mtr"?t.lockRotation:this._isUniscalePossible(n,t)?t.lockScalingX&&t.lockScalingY:t.lockScalingX||t.lockScalingY},_getRotatedCornerCursor:function(t,n,r){var i=Math.round(n.angle%360/45);return i<0&&(i+=8),i+=e[t],r[this.altActionKey]&&e[t]%2===0&&(i+=2),i%=8,this.cursorMap[i]}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(e,t,n){if(!e)return;var r=typeof e=="string"?JSON.parse(e):fabric.util.object.clone(e),i=this,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,this._enlivenObjects(r.objects,function(e){i.clear(),i._setBgOverlay(r,function(){e.forEach(function(e,t){i.insertAt(e,t)}),i.renderOnAddRemove=s,delete r.objects,delete r.backgroundImage,delete r.overlayImage,delete r.background,delete r.overlay,i._setOptions(r),i.renderAll(),t&&t()})},n),this},_setBgOverlay:function(e,t){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!e.backgroundImage&&!e.overlayImage&&!e.background&&!e.overlay){t&&t();return}var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,n,r),this.__setBgOverlay("overlayImage",e.overlayImage,n,r),this.__setBgOverlay("backgroundColor",e.background,n,r),this.__setBgOverlay("overlayColor",e.overlay,n,r)},__setBgOverlay:function(e,t,n,r){var i=this;if(!t){n[e]=!0,r&&r();return}e==="backgroundImage"||e==="overlayImage"?fabric.util.enlivenObjects([t],function(t){i[e]=t[0],n[e]=!0,r&&r()}):this["set"+fabric.util.string.capitalize(e,!0)](t,function(){n[e]=!0,r&&r()})},_enlivenObjects:function(e,t,n){if(!e||e.length===0){t&&t([]);return}fabric.util.enlivenObjects(e,function(e){t&&t(e)},null,n)},_toDataURL:function(e,t){this.clone(function(n){t(n.toDataURL(e))})},_toDataURLWithMultiplier:function(e,t,n){this.clone(function(r){n(r.toDataURLWithMultiplier(e,t))})}}),function(e){var t=e.fabric||(e.fabric={}),n=t.util.object.extend,r=t.util.object.clone,i=t.util.toFixed,s=t.util.string.capitalize,o=t.util.degreesToRadians,u=t.StaticCanvas.supports("setLineDash"),a=!t.isLikelyNode,f=2;if(t.Object)return;t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeLineCap strokeLineJoin strokeMiterLimit backgroundColor".split(" "),clipPath:undefined,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var n=t.perfLimitSizeTotal,r=e.width,i=e.height,s=t.maxCacheSideLimit,o=t.minCacheSideLimit;if(r<=s&&i<=s&&r*i<=n)return r<o&&(e.width=o),i<o&&(e.height=o),e;var u=r/i,a=t.util.limitDimsByArea(u,n),f=t.util.capValue,l=f(o,a.x,s),c=f(o,a.y,s);return r>l&&(e.zoomX/=r/l,e.width=l,e.capped=!0),i>c&&(e.zoomY/=i/c,e.height=c,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getNonTransformedDimensions(),n=e.scaleX,r=e.scaleY,i=t.x*n,s=t.y*r;return{width:i+f,height:s+f,zoomX:n,zoomY:r,x:t.x,y:t.y}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var n=e._currentTransform.target,r=e._currentTransform.action;if(this===n&&r.slice&&r.slice(0,5)==="scale")return!1}var i=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),o=t.minCacheSideLimit,u=s.width,a=s.height,f,l,c=s.zoomX,h=s.zoomY,p=u!==this.cacheWidth||a!==this.cacheHeight,d=this.zoomX!==c||this.zoomY!==h,v=p||d,m=0,g=0,y=!1;if(p){var b=this._cacheCanvas.width,w=this._cacheCanvas.height,E=u>b||a>w,S=(u<b*.9||a<w*.9)&&b>o&&w>o;y=E||S,E&&!s.capped&&(u>o||a>o)&&(m=u*.1,g=a*.1)}return v?(y?(i.width=Math.ceil(u+m),i.height=Math.ceil(a+g)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,i.width,i.height)),f=s.x*c/2,l=s.y*h/2,this.cacheTranslationX=Math.round(i.width/2-f)+f,this.cacheTranslationY=Math.round(i.height/2-l)+l,this.cacheWidth=u,this.cacheHeight=a,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(c,h),this.zoomX=c,this.zoomY=h,!0):!1},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initClipping(e),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t;this.group&&!this.group._transformDone?t=this.calcTransformMatrix():t=this.calcOwnMatrix(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:i(this.left,n),top:i(this.top,n),width:i(this.width,n),height:i(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:i(this.strokeMiterLimit,n),scaleX:i(this.scaleX,n),scaleY:i(this.scaleY,n),angle:i(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:i(this.skewX,n),skewY:i(this.skewY,n)};return this.clipPath&&(r.clipPath=this.clipPath.toObject(e),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,r,e),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var n=t.util.getKlass(e.type).prototype,r=n.stateProperties;return r.forEach(function(t){e[t]===n[t]&&delete e[t];var r=Object.prototype.toString.call(e[t])==="[object Array]"&&Object.prototype.toString.call(n[t])==="[object Array]";r&&e[t].length===0&&n[t].length===0&&delete e[t]}),e},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){var e=this.scaleX,t=this.scaleY;if(this.group){var n=this.group.getObjectScaling();e*=n.scaleX,t*=n.scaleY}return{scaleX:e,scaleY:t}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,n=e.scaleY;if(this.canvas){var r=this.canvas.getZoom(),i=this.canvas.getRetinaScaling();t*=r*i,n*=r*i}return{scaleX:t,scaleY:n}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,n){var r=e==="scaleX"||e==="scaleY",i=this[e]!==n,s=!1;return r&&(n=this._constrainScale(n)),e==="scaleX"&&n<0?(this.flipX=!this.flipX,n*=-1):e==="scaleY"&&n<0?(this.flipY=!this.flipY,n*=-1):e!=="shadow"||!n||n instanceof t.Shadow?e==="dirty"&&this.group&&this.group.set("dirty",n):n=new t.Shadow(n),this[e]=n,i&&(s=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,s&&this.group.set("dirty",!0)):s&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||this.width===0&&this.height===0||!this.visible},render:function(e){if(this.isNotVisible())return;if(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen())return;e.save(),this._setupCompositeOperation(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this.clipTo&&t.util.clipContext(this,e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&e.restore(),e.restore()},renderCache:function(e){e=e||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},needsItsOwnCache:function(){return this.paintFirst==="stroke"&&typeof this.shadow=="object"?!0:this.clipPath?!0:!1},shouldCache:function(){return this.ownCaching=this.objectCaching&&(!this.group||this.needsItsOwnCache()||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(e){var n=this.clipPath;e.save(),n.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in";if(n.absolutePositioned){var r=t.util.invertTransform(this.calcTransformMatrix());e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},drawObject:function(e,t){t?this._setClippingProperties(e):(this._renderBackground(e),this._setStrokeStyles(e,this),this._setFillStyles(e,this)),this._render(e),this._drawClipPath(e)},_drawClipPath:function(e){var t=this.clipPath;if(!t)return;t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e)},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!e){var t=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-n/2,t,n)}return!0}return!1},_renderBackground:function(e){if(!this.backgroundColor)return;var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){t.stroke&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,e.strokeStyle=t.stroke.toLive?t.stroke.toLive(e,this):t.stroke)},_setFillStyles:function(e,t){t.fill&&(e.fillStyle=t.fill.toLive?t.fill.toLive(e,this):t.fill)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t,n){if(!t)return;1&t.length&&t.push.apply(t,t),u?e.setLineDash(t):n&&n(e)},_renderControls:function(e,n){var r=this.getViewportTransform(),i=this.calcTransformMatrix(),s,u,a;n=n||{},u=typeof n.hasBorders!="undefined"?n.hasBorders:this.hasBorders,a=typeof n.hasControls!="undefined"?n.hasControls:this.hasControls,i=t.util.multiplyTransformMatrices(r,i),s=t.util.qrDecompose(i),e.save(),e.translate(s.translateX,s.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),n.forActiveSelection?(e.rotate(o(s.angle)),u&&this.drawBordersInGroup(e,s,n)):(e.rotate(o(this.angle)),u&&this.drawBorders(e,n)),a&&this.drawControls(e,n),e.restore()},_setShadow:function(e){if(!this.shadow)return;var n=this.canvas&&this.canvas.viewportTransform[0]||1,r=this.canvas&&this.canvas.viewportTransform[3]||1,i=this.getObjectScaling();this.canvas&&this.canvas._isRetinaScaling()&&(n*=t.devicePixelRatio,r*=t.devicePixelRatio),e.shadowColor=this.shadow.color,e.shadowBlur=this.shadow.blur*t.browserShadowBlurConstant*(n+r)*(i.scaleX+i.scaleY)/4,e.shadowOffsetX=this.shadow.offsetX*n*i.scaleX,e.shadowOffsetY=this.shadow.offsetY*r*i.scaleY},_removeShadow:function(e){if(!this.shadow)return;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return e.translate(r,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:i}},_renderPaintInOrder:function(e){this.paintFirst==="stroke"?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_renderFill:function(e){if(!this.fill)return;e.save(),this._applyPatternGradientTransform(e,this.fill),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore()},_renderStroke:function(e){if(!this.stroke||this.strokeWidth===0)return;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray,this._renderDashedStroke),this._applyPatternGradientTransform(e,this.stroke),e.stroke(),e.restore()},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=t.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,n.x+=e.offsetLeft,n.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(n,"center","center")},clone:function(e,n){var r=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(r,e):t.Object._fromObject("Object",r,e)},cloneAsImage:function(e,n){var r=this.toDataURL(n);return t.util.loadImage(r,function(n){e&&e(new t.Image(n))}),this},toDataURL:function(e){e||(e={});var n=t.util,r=n.saveObjectTransform(this),i=this.shadow,s=Math.abs;e.withoutTransform&&n.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var o=t.util.createCanvasElement(),u=this.getBoundingRect(!0,!0),a=this.shadow,f,l={x:0,y:0},c;a&&(c=a.blur,f=this.getObjectScaling(),l.x=2*Math.round((s(a.offsetX)+c)*s(f.scaleX)),l.y=2*Math.round((s(a.offsetY)+c)*s(f.scaleY))),o.width=u.width+l.x,o.height=u.height+l.y,o.width+=o.width%2?2-o.width%2:0,o.height+=o.height%2?2-o.height%2:0;var h=new t.StaticCanvas(o,{enableRetinaScaling:e.enableRetinaScaling,renderOnAddRemove:!1,skipOffscreen:!1});e.format==="jpeg"&&(h.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(h.width/2,h.height/2),"center","center");var p=this.canvas;h.add(this);var d=h.toDataURL(e);return this.shadow=i,this.set(r).setCoords(),this.canvas=p,h._objects=[],h.dispose(),h=null,d},isType:function(e){return this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},setGradient:function(e,n){n||(n={});var r={colorStops:[]};r.type=n.type||(n.r1||n.r2?"radial":"linear"),r.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2};if(n.r1||n.r2)r.coords.r1=n.r1,r.coords.r2=n.r2;return r.gradientTransform=n.gradientTransform,t.Gradient.prototype.addColorStop.call(r,n.colorStops),this.set(e,t.Gradient.forObject(this,r))},setPatternFill:function(e,n){return this.set("fill",new t.Pattern(e,n))},setShadow:function(e){return this.set("shadow",e?new t.Shadow(e):null)},setColor:function(e){return this.set("fill",e),this},rotate:function(e){var t=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,n){n=n||this.canvas.getPointer(e);var r=new t.Point(n.x,n.y),i=this._getLeftTopCoords();return this.angle&&(r=t.util.rotatePoint(r,i,o(-this.angle))),{x:r.x-i.x,y:r.y-i.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object._fromObject=function(e,n,i,s){var o=t[e];n=r(n,!0),t.util.enlivenPatterns([n.fill,n.stroke],function(e){typeof e[0]!="undefined"&&(n.fill=e[0]),typeof e[1]!="undefined"&&(n.stroke=e[1]),t.util.enlivenObjects([n.clipPath],function(e){n.clipPath=e[0];var t=s?new o(n[s],n):new o(n);i&&i(t)})})},t.Object.__uid=0}(typeof exports!="undefined"?exports:this),function(){var e=fabric.util.degreesToRadians,t={left:-0.5,center:0,right:.5},n={top:-0.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(e,r,i,s,o){var u=e.x,a=e.y,f,l,c;typeof r=="string"?r=t[r]:r-=.5,typeof s=="string"?s=t[s]:s-=.5,f=s-r,typeof i=="string"?i=n[i]:i-=.5,typeof o=="string"?o=n[o]:o-=.5,l=o-i;if(f||l)c=this._getTransformedDimensions(),u=e.x+f*c.x,a=e.y+l*c.y;return new fabric.Point(u,a)},translateToCenterPoint:function(t,n,r){var i=this.translateToGivenOrigin(t,n,r,"center","center");return this.angle?fabric.util.rotatePoint(i,t,e(this.angle)):i},translateToOriginPoint:function(t,n,r){var i=this.translateToGivenOrigin(t,"center","center",n,r);return this.angle?fabric.util.rotatePoint(i,t,e(this.angle)):i},getCenterPoint:function(){var e=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(t,n,r){var i=this.getCenterPoint(),s,o;return typeof n!="undefined"&&typeof r!="undefined"?s=this.translateToGivenOrigin(i,"center","center",n,r):s=new fabric.Point(this.left,this.top),o=new fabric.Point(t.x,t.y),this.angle&&(o=fabric.util.rotatePoint(o,i,-e(this.angle))),o.subtractEquals(s)},setPositionByOrigin:function(e,t,n){var r=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",i.x),this.set("top",i.y)},adjustPosition:function(n){var r=e(this.angle),i=this.getScaledWidth(),s=fabric.util.cos(r)*i,o=fabric.util.sin(r)*i,u,a;typeof this.originX=="string"?u=t[this.originX]:u=this.originX-.5,typeof n=="string"?a=t[n]:a=n-.5,this.left+=s*(a-u),this.top+=o*(a-u),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function e(e){return[new fabric.Point(e.tl.x,e.tl.y),new fabric.Point(e.tr.x,e.tr.y),new fabric.Point(e.br.x,e.br.y),new fabric.Point(e.bl.x,e.bl.y)]}var t=fabric.util.degreesToRadians,n=fabric.util.multiplyTransformMatrices,r=fabric.util.transformPoint;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(t,n){this.oCoords||this.setCoords();var r=t?this.aCoords:this.oCoords;return e(n?this.calcCoords(t):r)},intersectsWithRect:function(e,t,n,r){var i=this.getCoords(n,r),s=fabric.Intersection.intersectPolygonRectangle(i,e,t);return s.status==="Intersection"},intersectsWithObject:function(e,t,n){var r=fabric.Intersection.intersectPolygonPolygon(this.getCoords(t,n),e.getCoords(t,n));return r.status==="Intersection"||e.isContainedWithinObject(this,t,n)||this.isContainedWithinObject(e,t,n)},isContainedWithinObject:function(e,t,n){var r=this.getCoords(t,n),i=0,s=e._getImageLines(n?e.calcCoords(t):t?e.aCoords:e.oCoords);for(;i<4;i++)if(!e.containsPoint(r[i],s))return!1;return!0},isContainedWithinRect:function(e,t,n,r){var i=this.getBoundingRect(n,r);return i.left>=e.x&&i.left+i.width<=t.x&&i.top>=e.y&&i.top+i.height<=t.y},containsPoint:function(e,t,n,r){var t=t||this._getImageLines(r?this.calcCoords(n):n?this.aCoords:this.oCoords),i=this._findCrossPoints(e,t);return i!==0&&i%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,r=this.getCoords(!0,e),i;for(var s=0;s<4;s++){i=r[s];if(i.x<=n.x&&i.x>=t.x&&i.y<=n.y&&i.y>=t.y)return!0}return this.intersectsWithRect(t,n,!0,e)?!0:this._containsCenterOfCanvas(t,n,e)},_containsCenterOfCanvas:function(e,t,n){var r={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return this.containsPoint(r,null,!0,n)?!0:!1},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return this.intersectsWithRect(t,n,!0,e)?!0:this._containsCenterOfCanvas(t,n,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,r,i,s,o,u=0,a;for(var f in t){a=t[f];if(a.o.y<e.y&&a.d.y<e.y)continue;if(a.o.y>=e.y&&a.d.y>=e.y)continue;a.o.x===a.d.x&&a.o.x>=e.x?o=a.o.x:(n=0,r=(a.d.y-a.o.y)/(a.d.x-a.o.x),i=e.y-n*e.x,s=a.o.y-r*a.o.x,o=-(i-s)/(n-r)),o>=e.x&&(u+=1);if(u===2)break}return u},getBoundingRect:function(e,t){var n=this.getCoords(e,t);return fabric.util.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var n=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/n)},scaleToHeight:function(e,t){var n=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/n)},calcCoords:function(e){var i=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),o=n(s,i),u=this.getViewportTransform(),a=e?o:n(u,o),f=this._getTransformedDimensions(),l=f.x/2,c=f.y/2,h=r({x:-l,y:-c},a),p=r({x:l,y:-c},a),d=r({x:-l,y:c},a),v=r({x:l,y:c},a);if(!e){var m=this.padding,g=t(this.angle),y=fabric.util.cos(g),b=fabric.util.sin(g),w=y*m,E=b*m,S=w+E,x=w-E;m&&(h.x-=x,h.y-=S,p.x+=S,p.y-=x,d.x-=S,d.y+=x,v.x+=x,v.y+=S);var T=new fabric.Point((h.x+d.x)/2,(h.y+d.y)/2),N=new fabric.Point((p.x+h.x)/2,(p.y+h.y)/2),C=new fabric.Point((v.x+p.x)/2,(v.y+p.y)/2),k=new fabric.Point((v.x+d.x)/2,(v.y+d.y)/2),L=new fabric.Point(N.x+b*this.rotatingPointOffset,N.y-y*this.rotatingPointOffset)}var A={tl:h,tr:p,br:v,bl:d};return e||(A.ml=T,A.mt=N,A.mr=C,A.mb=k,A.mtr=L),A},setCoords:function(e,t){return this.oCoords=this.calcCoords(e),t||(this.aCoords=this.calcCoords(!0)),e||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var e=t(this.angle),n=fabric.util.cos(e),r=fabric.util.sin(e);return[n,r,-r,n,0,0]}return fabric.iMatrix.concat()},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",n="";return!e&&this.group&&(n=this.group.transformMatrixKey(e)+t),n+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){if(e)return this.calcOwnMatrix();var t=this.transformMatrixKey(),r=this.matrixCache||(this.matrixCache={});if(r.key===t)return r.value;var i=this.calcOwnMatrix();return this.group&&(i=n(this.group.calcTransformMatrix(),i)),r.key=t,r.value=i,i},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===e)return t.value;var r=this._calcTranslateMatrix(),i,s=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0);return this.angle&&(i=this._calcRotateMatrix(),r=n(r,i)),r=n(r,s),t.key=e,t.value=r,r},_calcDimensionsTransformMatrix:function(e,r,i){var s,o=this.scaleX*(i&&this.flipX?-1:1),u=this.scaleY*(i&&this.flipY?-1:1),a=[o,0,0,u,0,0];return e&&(s=[1,0,Math.tan(t(e)),1],a=n(a,s,!0)),r&&(s=[1,Math.tan(t(r)),0,1],a=n(a,s,!0)),a},_getNonTransformedDimensions:function(){var e=this.strokeWidth,t=this.width+e,n=this.height+e;return{x:t,y:n}},_getTransformedDimensions:function(e,t){typeof e=="undefined"&&(e=this.skewX),typeof t=="undefined"&&(t=this.skewY);var n=this._getNonTransformedDimensions();if(e===0&&t===0)return{x:n.x*this.scaleX,y:n.y*this.scaleY};var r=n.x/2,i=n.y/2,s=[{x:-r,y:-i},{x:r,y:-i},{x:-r,y:i},{x:r,y:i}],o,u=this._calcDimensionsTransformMatrix(e,t,!1),a;for(o=0;o<s.length;o++)s[o]=fabric.util.transformPoint(s[o],u);return a=fabric.util.makeBoundingBoxFromPoints(s),{x:a.width,y:a.height}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions(),n=fabric.util.transformPoint(t,e,!0);return n.scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),s.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxCenterObjectV:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),s.requestRenderAll(),i()},onComplete:function(){e.setCoords(),r()}}),this},fxRemove:function(e,t){t=t||{};var n=function(){},r=t.onComplete||n,i=t.onChange||n,s=this;return fabric.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),s.requestRenderAll(),i()},onComplete:function(){s.remove(e),r()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var e=[],t,n;for(t in arguments[0])e.push(t);for(var r=0,i=e.length;r<i;r++)t=e[r],n=r!==i-1,this._animate(t,arguments[0][t],arguments[1],n)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,n,r){var i=this,s;t=t.toString(),n?n=fabric.util.object.clone(n):n={},~e.indexOf(".")&&(s=e.split("."));var o=s?this.get(s[0])[s[1]]:this.get(e);"from"in n||(n.from=o),~t.indexOf("=")?t=o+parseFloat(t.replace("=","")):t=parseFloat(t),fabric.util.animate({startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(i)},onChange:function(t,o,u){s?i[s[0]][s[1]]=t:i.set(e,t);if(r)return;n.onChange&&n.onChange(t,o,u)},onComplete:function(e,t,s){if(r)return;i.setCoords(),n.onComplete&&n.onComplete(e,t,s)}})}}),function(e){var t=fabric.util.object.extend;e.fabric||(e.fabric={});if(e.fabric.Image){fabric.warn("fabric.Image is already defined.");return}fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+fabric.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=fabric.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=undefined,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){fabric.util.cleanUpJsdomNode(this[e]),this[e]=undefined}.bind(this))},setCrossOrigin:function(e){return this.crossOrigin=e,this._element.crossOrigin=e,this},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(!this.stroke||this.strokeWidth===0)return;var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()},_renderDashedStroke:function(e){var t=-this.width/2,n=-this.height/2,r=this.width,i=this.height;e.save(),this._setStrokeStyles(e,this),e.beginPath(),fabric.util.drawDashedLine(e,t,n,t+r,n,this.strokeDashArray),fabric.util.drawDashedLine(e,t+r,n,t+r,n+i,this.strokeDashArray),fabric.util.drawDashedLine(e,t+r,n+i,t,n+i,this.strokeDashArray),fabric.util.drawDashedLine(e,t,n+i,t,n,this.strokeDashArray),e.closePath(),e.restore()},toObject:function(e){var n=[];this.filters.forEach(function(e){e&&n.push(e.toObject())});var r=t(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(e)),{src:this.getSrc(),filters:n});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():t.src:this.src||""},setSrc:function(e,t,n){return fabric.util.loadImage(e,function(e){this.setElement(e,n),this._setWidthHeight(),t(this)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,i=n.scaleY,s=this._filteredEl||this._originalElement;this.group&&this.set("dirty",!0);if(!e||r>t&&i>t){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,this._lastScaleY=i;return}fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var o=fabric.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,a=s.width,f=s.height;o.width=a,o.height=f,this._element=o,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=i,fabric.filterBackend.applyFilters([e],s,a,f,this._element,u),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(e){e=e||this.filters||[],e=e.filter(function(e){return e&&!e.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered");if(e.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){var i=fabric.util.createCanvasElement();i.width=n,i.height=r,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey);if(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height;return this},_render:function(e){this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},shouldCache:function(){return this.ownCaching=this.objectCaching&&this.needsItsOwnCache(),this.ownCaching},_renderFill:function(e){var t=this.width,n=this.height,r=t*this._filterScalingX,i=n*this._filterScalingY,s=-t/2,o=-n/2,u=this._element;u&&e.drawImage(u,s,o,t,n)},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(fabric.util.getById(e),t),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(e,t){e&&e.length?fabric.util.enlivenObjects(e,function(e){t&&t(e)},"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),t=this._element.width,n=this._element.height,r=1,i=1,s=0,o=0,u=0,a=0,f,l=this.width,c=this.height,h={width:l,height:c};return!e||e.alignX==="none"&&e.alignY==="none"?(r=l/t,i=c/n):(e.meetOrSlice==="meet"&&(r=i=fabric.util.findScaleToFit(this._element,h),f=(l-t*r)/2,e.alignX==="Min"&&(s=-f),e.alignX==="Max"&&(s=f),f=(c-n*i)/2,e.alignY==="Min"&&(o=-f),e.alignY==="Max"&&(o=f)),e.meetOrSlice==="slice"&&(r=i=fabric.util.findScaleToCover(this._element,h),f=t-l/r,e.alignX==="Mid"&&(u=f/2),e.alignX==="Max"&&(u=f),f=n-c/i,e.alignY==="Mid"&&(a=f/2),e.alignY==="Max"&&(a=f),t=l/r,n=c/i)),{width:t,height:n,scaleX:r,scaleY:i,offsetLeft:s,offsetTop:o,cropX:u,cropY:a}}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(e,t){var n=fabric.util.object.clone(e);fabric.util.loadImage(n.src,function(e,r){if(r){t&&t(null,r);return}fabric.Image.prototype._initFilters.call(n,n.filters,function(r){n.filters=r||[],fabric.Image.prototype._initFilters.call(n,[n.resizeFilter],function(r){n.resizeFilter=r[0],fabric.util.enlivenObjects([n.clipPath],function(r){n.clipPath=r[0];var i=new fabric.Image(e,n);t(i)})})})},null,n.crossOrigin)},fabric.Image.fromURL=function(e,t,n){fabric.util.loadImage(e,function(e){t&&t(new fabric.Image(e,n))},null,n&&n.crossOrigin)}}(typeof exports!="undefined"?exports:this),define("view/GlazeView",["require","jquery","underscore","utils/Logger","utils/Events","backbone","view/ElementView","text!view/GlazeView.html","utils/ConditionChecker","utils/TrackingManager","utils/MiscUtils","mobiledetect","fabric","Settings","AppModel"],function(require){var $=require("jquery"),_=require("underscore"),Logger=require("utils/Logger"),Events=require("utils/Events"),Backbone=require("backbone"),ElementView=require("view/ElementView"),template=require("text!view/GlazeView.html"),ConditionChecker=require("utils/ConditionChecker"),TrackingManager=require("utils/TrackingManager"),MiscUtils=require("utils/MiscUtils"),mobiledetect=require("mobiledetect"),fabric=require("fabric"),Settings=require("Settings"),md=new mobiledetect(window.navigator.userAgent);return Backbone.View.extend({className:"glaze-exclude glaze-layer",attributes:{role:"dialog",tabindex:-1,"aria-labelledby":function(){return"title-trick-"+Date.now()}()},contentIntentDone:null,appData:null,currentScreenSize:null,elements:[],canvas:null,isShown:!1,isReadyToShow:!1,isImpressionTracked:!1,isAbandonTracked:!1,isClickTracked:!1,canvasReady:null,canvasLoading:null,autoscrollStarted:null,autoscrollDone:null,deferredConditions:[],deferredConditionsRunning:!1,rolledElement:null,triggeredOnScroll:0,abHasGlaze:1,transitionRunning:!1,transitionScrollTop:null,waitingForElementInteval:null,savedDimensions:null,initialize:function(e){_.extend(this,e),this.appData=require("AppModel"),this.listenTo(this,"releaseDeferredCondition",_.bind(this._releaseDeferredCondition,this)),this.selectVariant(),Backbone.View.prototype.initialize.apply(this,arguments)},events:{"click button.close":"clickCloseIcon","keydown .glaze-space-press":"handleSpace"},selectVariant:function(){var variants=_.sortBy(this.model.get("variants"),function(e){return!e.screen_size.max||e.screen_size.max==0?1e6:Number(e.screen_size.max)}),variantsByMin=_.sortBy(this.model.get("variants"),function(e){return e.screen_size.min}),defaultVariant=_.find(this.model.get("variants"),function(e){return e.screen_size.is_default==1||!e.screen_size.max||e.screen_size.max==0}),windowWidth=$(window).width(),selectedVariant;selectedVariant=_.find(variants,function(e){var t=e.screen_size.max&&e.screen_size.max!=0?e.screen_size.max:1e6;return Number(t)>=windowWidth}),selectedVariant||(this.model.get("campaign_is_mobile_first")==1&&variantsByMin&&variantsByMin.length?selectedVariant=variantsByMin[0]:selectedVariant=defaultVariant),!selectedVariant&&variantsByMin&&variantsByMin.length&&(selectedVariant=variantsByMin[0]),this.currentScreenSize=selectedVariant.screen_size,Logger.log("Glaze: variant select - "+this.currentScreenSize.title),this.model.set("variant",new(Backbone.Model.extend({parentModel:this.model,getXpath:function(e){var t=this.get("xpath"),n=_.isUndefined(e)?0:e;return t[n]?t[n]:null},getSelector:function(e){var t=this.get("selector"),n=_.isUndefined(e)?0:e,r=this.get("promoted_products")||[],i=null;return t=t[n]?t[n]:null,t?(r=_.sortBy(r,function(e){return Number(e.priority||500)}),_.each(r,_.bind(function(e){if(!i){var n=[{placeholder:"{PROMOTED_PRODUCT.PID}",value:e.pid}],r=t;_.each(n,function(e){r=r.replace(e.placeholder,e.value)}),r=this.prepareSelector(r),$(r).length&&this.get("parent").isBindedElementVisible(r)&&(i=r)}},this)),i=this.prepareSelector(i||t),i||null):null},prepareSelector:function(selector){selector.match(/{DFIELD:[^}]+\}/)&&(selector=selector.replace(/{DFIELD:[^}]+\}/,this.get("page_template_selector_dynamic_field")));if(selector.match(/JS:(.*):ENDJS/))try{selector=selector.replace(/JS:.*:ENDJS/,eval(selector.match(/JS:(.*):ENDJS/)[1]))}catch(e){console.warn("Glaze: error evaluating glaze selector "+selector)}return selector=selector.replace("{","").replace("}",""),selector}}))(selectedVariant));var variantJson=selectedVariant.json?JSON.parse(selectedVariant.json):{};variantJson.settings=selectedVariant.settings?JSON.parse(selectedVariant.settings):{},this.model.get("variant").set(_.omit(variantJson,"shape_id")),this.model.get("variant").set("promoted_products",this.model.get("promoted_products")),this.model.get("variant").set("parent",this),this.model.get("variant").set("page_template_selector_dynamic_field",this.model.get("page_template_selector_dynamic_field"));if(this.model.get("selector")){var selectorVariant=this.selectSelectorVariant(this.model.get("selector").variants);if(selectorVariant){this.model.get("variant").set("selector",{0:selectorVariant.code}),this.model.get("variant").set("selectorVariant",selectorVariant);var selectorSizeTitle=selectorVariant.screen_size_id?this.appData.getScreenSizeById(selectorVariant.screen_size_id).title:"ALL";Logger.log("Glaze: selector applied - "+this.model.get("selector").name+" ("+selectorSizeTitle+")")}}(_.isString(variantJson.xpath)||!variantJson.xpath)&&this.model.get("variant").set("xpath",{0:variantJson.xpath}),(_.isString(variantJson.selector)||!variantJson.selector)&&this.model.get("variant").set("selector",{0:variantJson.selector})},selectSelectorVariant:function(e){var t=_.find(e,function(e){return!e.screen_size_id});e=_.filter(e||[],function(e){return!!e.screen_size_id}),e=_.sortBy(e,_.bind(function(e){var t=this.appData.getScreenSizeById(e.screen_size_id);return!t.max||t.max===0?1e6:Number(t.max)},this));var n=_.find(e,_.bind(function(e){var t=this.appData.getScreenSizeById(e.screen_size_id);return t.is_default===1||!t.max||t.max===0},this)),r=$(window).width(),i;return i=_.find(e,_.bind(function(e){var t=this.appData.getScreenSizeById(e.screen_size_id),n=t.max&&t.max!==0?t.max:1e6;return Number(n)>=r},this)),!i&&n&&(i=n),!i&&!n&&(i=t),i},render:function(){return this.$el.html(_.template(template)({data:this,settings:this._getSettings()})),this.renderElements(),this},renderElements:function(){_.each(this.model.get("variant").get("elements"),_.bind(function(e){var t=(new ElementView({model:new Backbone.Model(e),parent:this})).render();this.$(".glaze-elements").append(t.$el),t.initControls(),this.elements.push(t)},this))},initCanvas:function(){this.canvasReady=null;if(this.canvasLoading)return;this.canvasLoading=!0,this.canvas=new fabric.Canvas("canvas-shape-"+this.cid);var e=this.model.get("variant").get("canvasJSON");if(e&&e.objects&&e.objects.length){var t=_.find(this.appData.get("shapes"),_.bind(function(e){return Number(e.id)===Number(this.model.get("variant").get("shape_id"))},this));e.objects[0].src=t.base64src}e?this.canvas.loadFromJSON(e,_.bind(function(){this.canvas.renderAll.bind(this.canvas),e.objects.length||(this.updateGlazePosition(),this.canvasReady=!0)},this),_.bind(function(e,t){t.on("added",_.bind(function(){this.updateGlazePosition(),this.canvasReady=!0},this))},this)):Logger.log("Glaze: Canvas JSON not found"),this.$(".glaze-wrapper").css("opacity",this.model.get("variant").get("background_opacity"))},updateGlazeDimensions:function(e,t){this.canvas||this.initCanvas(),this.canvas.setDimensions({width:e,height:t}),this.canvas.calcOffset()},clickVoid:function(e){e&&e.preventDefault();var t=this.model.get("variant").getSelector(0),n=this._getSettings();if(n.a11y_shape_btn_active_element)$(n.a11y_shape_btn_active_element)[0].click(),this.clickShape(e,{clickInVoid:!0});else if(t&&$(t).length)$(t)[0].click(),this.clickShape(e,{clickInVoid:!0});else{var r=this.$(".glaze-shape-button").position(),i=r.left+this.$(".glaze-shape-button").outerWidth()/2,s=r.top+this.$(".glaze-shape-button").outerHeight()/2;document.elementFromPoint(i,s).click()}},handleSpace:function(e){e.keyCode===32&&(e.preventDefault(),window.location=$(e.currentTarget).attr("href"))},updateGlazePosition:function(){var e=this.model.get("variant").get("shapeOffset"),t=this.model.get("variant").get("scaleOffset"),n=this.canvas&&this.canvas.getObjects().length,r,i,s;_.times(n,_.bind(function(n){r=this.canvas.item(n),i=this.model.get("variant").getXpath(n),s=this.model.get("variant").getSelector(n);if(r)if(i!=""||s!=""||this.rolledElement){var o=this.rolledElement||$(s).get(0),u=$(o);if(!u.length)return;var a=this.calculateSpotlightArea(u),f=a.width/r.get("width")+(t.scaleX?t.scaleX:0),l=a.height/r.get("height")+(t.scaleY?t.scaleY:0);r.set({left:a.left+(e.left?e.left:0),top:a.top+(e.top?e.top:0),scaleX:f,scaleY:l}),this.$el.find(".glaze-shape-button").css({left:a.left+(e.left?e.left:0),top:a.top+(e.top?e.top:0),width:r.get("width")*f+"px",height:r.get("height")*l+"px"}),r.setCoords(),this.canvas.renderAll()}},this)),this.updateXIconPosition(),this.updateGlazeElementsPosition()},updateXIconPosition:function(){if(!this.canvas)return;var e=this.model.get("variant").getXpath(0),t=this.model.get("variant").getSelector(0),n=this._getSettings(),r=this.canvas.item(0),i=this.$("span.close");if(r)if(e!=""||t!=""||this.rolledElement){var s=this.rolledElement||$(t).get(0),o=$(s);if(!o.length)return;var u=this.calculateSpotlightArea(o);n.x_image_position&&n.x_image_position=="void_tr"?i.css({top:u.top+5+"px",left:u.left+u.width-5+"px",position:"absolute"}):i.css({top:"15px",right:"20px",left:"auto",position:"fixed"})}},hideXIcon:function(){this.$("span.close").hide()},showXIcon:function(){var e=this._getSettings();e.close_click_x&&this.$("span.close").show()},calculateSpotlightArea:function(e){var t=this._getSettings(),n={left:99999999999,top:99999999999,bottom:0,right:0},r=t.spotlight_areas?$(t.spotlight_areas).add(e):e;return r.each(function(){var e=$(this),t=e[0].getBoundingClientRect(),r=!1;t.height=t.bottom-t.top,e.parents().each(function(){$(this).css("position")==="fixed"&&(r=!0)}),e.is(":visible")&&t.width>0&&t.height>0&&(n.left=_.min([n.left,e.offset().left]),n.top=_.min([n.top,e.offset().top]),r&&(n.top+=$("body").scrollTop()),n.right=_.max([n.right,e.offset().left+t.width]),n.bottom=_.max([n.bottom,e.offset().top+t.height]))}),n.width=n.right-n.left,n.height=n.bottom-n.top,delete n.bottom,delete n.right,n},updateGlazeElementsPosition:function(){_.each(this.elements,function(e){e.updatePosition()})},applySettings:function(e){e=e||!1;var t=this._getSettings();if(!e){if(!t.advanced_settings||JSON.stringify(t.advanced_settings)==="{}")t.advanced_settings=[];t.advanced_settings=t.advanced_settings.concat(this.model.get("variant").get("conditions")||[]),this._setDeferredConditions(t.advanced_settings)}e?this.isShown||this.showGlaze(e):!t.exit_intent&&!t.content_intent&&!t.roll_on?setTimeout(_.bind(this.showGlaze,this),t.trigger_timer&&t.timer_in?t.timer_in:0):(t.exit_intent||t.content_intent)&&t.trigger_timer&&t.timer_in&&setTimeout(_.bind(function(){this.isShown||this.showGlaze()},this),t.timer_in)},showGlaze:function(e){e=e||!1;var t=this._getSettings(),n=!1;if(!this.canvasReady){this.initCanvas(),setTimeout(_.bind(function(){this.showGlaze(e)},this),300);return}if(this.parent.activeGlaze){this.isReadyToShow=!0;return}var r=this._getSettings(),i=JSON.parse(this.model.get("campaign_settings")||"{}");if(!e)if(!this.parent.passAdditionalSettings(r.advanced_settings)||!this.parent.passAdditionalSettings(i.advanced_settings||[])||!this.parent.passCampaignSettings(this.model.toJSON()))return Logger.log("Glaze: glaze "+this.model.get("title")+" did not pass conditions on glaze show"),!1;if(this.deferredConditions.length){this.deferredConditionsRunning||this._startCheckingDeferredConditions(),Logger.log("Glaze: ready to show, waiting for deferred conditions to complete");return}if(!this.isElementCreated()){if(!this.waitingForElementInteval){Logger.log("Glaze: ready to show, binded element not found or not created yet"),TrackingManager.notifyNoElement(this.model.get("id"),this.model.get("variant").getXpath(0)||this.model.get("variant").getSelector(0));if(t.out_viewport_action_type==="glaze"&&t.out_viewport_action_glaze){Logger.log("Glaze: open glaze by action if binded element is not found"),this.undelegateResizeListener(),this.isShown=!1,$("html,body").stop(),$("body").removeClass("glaze-effect"),this.removeAdditionalCss(),this.remove(),this.parent.openGlazeById(t.out_viewport_action_glaze,!1);return}this.isReadyToShow=!0,this.waitingForElementInteval=setInterval(_.bind(this.showGlaze,this),400)}else Logger.log("Glaze: Waiting for element to be created");return}clearInterval(this.waitingForElementInteval),this.waitingForElementInteval=null,this.parent.restartingGlaze==this.model.get("id")&&(t.autoscroll=!0,n=!0,this.parent.restartingGlaze=null);if(!this.isShapeVisible()){Logger.log("Glaze: ready to show, shape is out of the viewport"),this.isReadyToShow=!0,t.autoscroll||t.exit_intent?this.autoscroll(undefined,n):this.waitingForViewportElementInteval||(this.waitingForViewportElementInteval=setInterval(_.bind(this.showGlaze,this),400));return}this.waitingForViewportElementInteval&&(clearInterval(this.waitingForViewportElementInteval),this.waitingForViewportElementInteval=null),this.selectABVersion(),this.isReadyToShow=!1,(t.autoscroll||t.exit_intent)&&!this.autoscrollDone&&this.autoscroll(undefined,n),Logger.log("Glaze: show"),this.parent.hideRestart(),this.executePreJS(),this.beforeShow(),this.applyAdditionalCss(),this.parent.updateDimensions(),this.setActiveGlaze(this.model.get("id")),this.animateIn(t.animate_in,function(){setTimeout(_.bind(this.afterShow,this),300),t.close_timer&&t.timer_out&&setTimeout(_.bind(this.hideGlaze,this),t.timer_out)}),this.$el.parent().focus()},setActiveGlaze:function(e){this.parent.activeGlaze=e},applyAdditionalCss:function(){var e=this._getSettings(),t=this.appData.get("website").additional_css;t&&$('<style type="text/css" id="glazeWebsiteStyles">'+t+"</style>").appendTo("head"),e.campaign_css_rules&&$('<style type="text/css" id="glazeCampaignStyles">'+e.campaign_css_rules+"</style>").appendTo("head"),e.css_rules&&$('<style type="text/css" id="glazeStyles">'+e.css_rules+"</style>").appendTo("head")},removeAdditionalCss:function(){$("head").find("#glazeStyles").remove(),$("head").find("#glazeCampaignStyles").remove(),$("head").find("#glazeWebsiteStyles").remove()},selectABVersion:function(){var e=(this._getSettings().show_percent||100)/100,t=this.parent.randomSeedAB,n=this.parent.abHasGlaze;n!=-1?this.abHasGlaze=n:(this.abHasGlaze=e>=t?1:0,Logger.log("Glaze: version without glaze percent: "+this._getSettings().show_percent),TrackingManager.setAB(this.model.get("campaign_id"),this.abHasGlaze),this.parent.abHasGlaze=this.abHasGlaze),this.abHasGlaze==0&&!this.appData.get("previewGlaze")?(Logger.log("Glaze: A/B testing, version without glaze"),this.$el.css({visibility:"hidden",pointerEvents:"none"}),_.each(this.elements,function(e){e.$el.css({visibility:"hidden",pointerEvents:"none"})}),this.parent.renderAllAvailableGlazes(this.model.get("id"))):Logger.log("Glaze: A/B testing, version with glaze")},actionOnGlazeOpen:function(){var settings=this._getSettings(),actionCode=settings.open_action_js;if(actionCode){actionCode=actionCode.replace(/GLAZE_ID/g,"'"+this.model.get("id")+"'"),actionCode=actionCode.replace(/GLAZE_TITLE/g,"'"+this.model.get("title")+"'"),actionCode=actionCode.replace(/CAMPAIGN_ID/g,"'"+this.model.get("campaign_id")+"'"),actionCode=actionCode.replace(/[‘’]+/g,"'"),Logger.log("Glaze: execute action on glaze open "+actionCode);try{eval(actionCode)}catch(err){console.warn("Error in Action on Glaze Open"),console.warn(err)}}var singleTagAction=settings.universal_action_js;if(singleTagAction){singleTagAction=MiscUtils.prepareActionCode(singleTagAction,"GLAZE_OPEN",this.model.get("id"),this.model.get("title"),this.model.get("campaign_id"),this.model.get("campaign_title"),this.abHasGlaze),Logger.log("Glaze: execute single tag action on glaze open "+singleTagAction);try{eval(singleTagAction)}catch(err){console.warn("Error in Single Tag Action on Glaze Open"),console.warn(err)}}Events.dispatch("glazeActivated",{glaze_id:this.model.get("id"),campaign_id:this.model.get("campaign_id"),campaign_title:this.model.get("campaign_title"),glaze_title:this.model.get("title"),glaze_visible:this.abHasGlaze?"yes":"no"})},executePreJS:function(){this.appData.get("website").prejs&&eval(this.appData.get("website").prejs)},executePostJS:function(){this.appData.get("website").postjs&&eval(this.appData.get("website").postjs)},animateIn:function(e,t){var e=e&&e!=="null"?e:"none",n=this._getSettings();n.z_index&&this.parent.$el.css("zIndex",n.z_index),Logger.log("Glaze: animate in - "+e);switch(e){case"Dissolve":this.$el.fadeIn(700,_.bind(t,this));break;case"Move left to right":this.$el.css({left:"-100%",display:"block"}).animate({left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move right to left":this.$el.css({left:"100%",display:"block"}).animate({left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top to bottom":this.$el.css({top:"-100%",display:"block"}).animate({top:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom to top":this.$el.css({top:"100%",display:"block"}).animate({top:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top left to bottom right":this.$el.css({top:"-100%",left:"-100%",display:"block"}).animate({top:0,left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top right to bottom left":this.$el.css({top:"-100%",left:"100%",display:"block"}).animate({top:0,left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom left to top right":this.$el.css({top:"100%",left:"-100%",display:"block"}).animate({top:0,left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom right to top left":this.$el.css({top:"100%",left:"100%",display:"block"}).animate({top:0,left:0},1e3,"easeOutCirc",_.bind(t,this));break;case"none":this.$el.css({display:"block"})&&t.call(this);break;default:this.$el.show(e.toLowerCase(),1e3,_.bind(t,this))}},animateOut:function(e,t){var e=e&&e!=="null"?e:"none";this.parent.$el.css("zIndex",9e3),Logger.log("Glaze: animate out - "+e);switch(e){case"Dissolve":this.$el.fadeOut(700,_.bind(t,this));break;case"Move left to right":this.$el.css({left:0,display:"block"}).animate({left:"100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move right to left":this.$el.css({left:0,display:"block"}).animate({left:"-100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top to bottom":this.$el.css({top:0,display:"block"}).animate({top:"100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom to top":this.$el.css({top:0,display:"block"}).animate({top:"-100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top left to bottom right":this.$el.css({top:0,left:0,display:"block"}).animate({top:"100%",left:"100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move top right to bottom left":this.$el.css({top:0,left:0,display:"block"}).animate({top:"100%",left:"-100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom left to top right":this.$el.css({top:0,left:0,display:"block"}).animate({top:"-100%",left:"100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"Move bottom right to top left":this.$el.css({top:0,left:0,display:"block"}).animate({top:"-100%",left:"-100%"},1e3,"easeOutCirc",_.bind(t,this));break;case"none":this.$el.css({display:"none"})&&t.call(this);break;default:this.$el.hide(e.toLowerCase(),1e3,_.bind(t,this))}},autoscroll:function(e,t){t=t||!1;var n=this._getSettings();if(this.abHasGlaze==0)return;if(t||!this.autoscrollStarted&&!n.roll_on&&(n.autoscroll||n.exit_intent)){var r=this.canvas.item(0),i=null;n.autoscroll_element_enable&&(n.autoscroll_element||n.autoscroll_element_selector)&&(i=$(document).find(n.autoscroll_element_selector));if(r||i){if(!i){var s=r.getBoundingRect();if(s.width>1e7){setTimeout(_.bind(function(){this.autoscroll(e,t)},this),300);return}e=_.isUndefined(e)?s.top:e}else e=_.isUndefined(e)?i.offset().top:e;if(this.model.get("variant").getSelector(0)&&!i){var o=$(this.model.get("variant").getSelector(0));if(!o.length||!o.is(":visible")){Logger.log("Glaze: binded element not created or not visible, autoscroll impossible");return}}var u=Number(n.autoscroll_speed||Settings.glazeAutoScrollSpeed),a=n.autoscroll_offset||Settings.glazeAutoScrollOffset;n.exit_intent&&(a=n.exit_autoscroll_offset);var f=this.appData.get("website").scroll_container||"html,body",l=$(f).offset()&&$(f).offset().top||0,c=parseInt(e-l-parseInt($(window).height()*(a/100)));f&&f!=="html,body"&&(c+=$(f).scrollTop()),c=c>0?c:0;var h=c-$(f).scrollTop();$(f)[0].scrollHeight<=$(window).height()&&(c=0,h=0);if(c>=0)return Logger.log("Glaze: autoscroll to the void: ("+u+"ms)"),this.autoscrollStarted=!0,this.autoscrollDone=!1,$(f).animate({scrollTop:c},u,_.bind(function(){this.autoscrollStarted=!1,this.autoscrollDone=!0,this.updateGlazePosition()},this)),h}}},beforeShow:function(){var e=this.model.get("variant");if(e.get("blur")!=0||e.get("grayscale")!=0){var t=[];e.get("grayscale")&&t.push("grayscale("+e.get("grayscale")+"%)"),e.get("blur")&&t.push("blur("+e.get("blur")+"px)");var n=this.model.get("variant").getSelector(0);if(n){var r=$(n);r.addClass("glaze-exclude").addClass("glaze-bind-element"),r.children().addClass("glaze-exclude"),r.parents().addClass("glaze-exclude");var i='<style type="text/css">body.glaze-effect :not(.glaze-exclude){-webkit-filter: '+t.join(" ")+";"+"-moz-filter: "+t.join(" ")+";"+"filter: "+t.join(" ")+";}"+"</style>";$("head").append(i),$("body").addClass("glaze-effect")}}this.applyPreAccessibility()},afterShow:function(){var e=this._getSettings();if(!this.canvasReady){setTimeout(_.bind(this.afterShow,this),300);return}this.parent.updateDimensions(),e.deactivate_links?this.$el.css("pointerEvents","all"):this.$el.css("pointerEvents","none"),this.isShown=!0,this.applyPostAccessibility(),this.delegateResizeListener(),this.trackImpression(),this.initGlazeElements(),this.actionOnGlazeOpen()},applyPreAccessibility:function(){var e="title-trick-"+Date.now();this.$el.find('[id="'+this.attributes["aria-labelledby"]+'"]').attr("id",e),this.$("#glazeLabel").length?this.$el.attr("aria-labelledby","glazeLabel"):(this.attributes["aria-labelledby"]=e,this.$el.attr("aria-labelledby",e))},applyPostAccessibility:function(){var e=this._getSettings();this.$el.focus(),this.model.get("variant").get("shape_id")!==-1&&(this.$(".glaze-shape-button")[0].onclick=_.bind(this.clickVoid,this)),this.$(".glaze-shape-button span").html(e.a11y_shape_btn_text||"Enregistrer l'offre d'emploi dans MEMO (Ouvre une fenêtre popup)")},initGlazeElements:function(){_.each(this.elements,function(e){e.start()})},delegateResizeListener:function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,this.updateFrame=window.requestAnimationFrame(_.bind(this.checkDimensionChanges,this))},checkDimensionChanges:function(){var e=[];_.each(this.model.get("variant").get("selector"),_.bind(function(t,n){t=this.model.get("variant").getSelector(n);var r=this.calculateSpotlightArea($(t));_.each(r,function(e,t){r[t]=Math.round(e)}),e.push(r)},this)),this.savedDimensions!==JSON.stringify(e)&&(this.savedDimensions=JSON.stringify(e),this.updateGlazePosition()),this.isShown&&(this.updateFrame=window.requestAnimationFrame(_.bind(this.checkDimensionChanges,this)))},undelegateResizeListener:function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;e(this.updateFrame)},hideGlaze:function(cb,converted,options){converted=converted||!1,options=options||{};var settings=this._getSettings();if(!this.isShown)return;this.setActiveGlaze(null);if(settings.close_action_type&&(!settings.close_action_condition||settings.close_action_condition==="not_convert"&&!converted||settings.close_action_condition==="convert"&&converted)){if(settings.close_action_type==="glaze"&&!options.forceClose&&settings.close_action_glaze_transition&&settings.close_action_glaze_transition==="smooth"){this.removeAdditionalCss(),this.smoothTransitionGlaze(settings.close_action_glaze),this.trackAbandon();return}if(settings.close_action_type==="conditional"&&!options.forceClose){this.removeAdditionalCss();var isSuccess=eval(settings.close_action_condition_js);this.trackAbandon();if(isSuccess)return}}Logger.log("Glaze: hide"),TrackingManager.setWaitingVTC(this.model),this.animateOut(settings.animate_out,function(){this.undelegateResizeListener(),this.isShown=!1,$("html,body").stop(),$("body").removeClass("glaze-effect"),this.removeAdditionalCss(),this.executePostJS(),this.parent.onCloseGlaze(this.model,converted),this.trackAbandon(),_.isFunction(cb)&&cb(),this.parent.scrollOrResize()})},smoothTransitionGlaze:function(id){Logger.log("Glaze: smooth hide"),_.each(this.elements,function(e){e.remove(),e=null}),this.removeAdditionalCss(),this.elements=[];var settings=this._getSettings();settings.close_action_js&&(Logger.log("Glaze: execute close javascript action"),eval(settings.close_action_js));var singleTagAction=settings.universal_action_js;if(singleTagAction){singleTagAction=MiscUtils.prepareActionCode(singleTagAction,"GLAZE_CLOSE",this.model.get("id"),this.model.get("title"),this.model.get("campaign_id"),this.model.get("campaign_title"),this.abHasGlaze),Logger.log("Glaze: execute single tag action on glaze close "+singleTagAction);try{eval(singleTagAction)}catch(err){console.warn("Error in Single Tag Action on Glaze Close"),console.warn(err)}}var glaze=_.find(this.parent.appData.get("glazes"),function(e){return+e.id===+id});this.undelegateResizeListener(),this.isImpressionTracked=!1,this.model.set(glaze),this.autoscrollDone=!1,this.selectVariant();var xpath=this.model.get("variant").getXpath(0),selector=this.model.get("variant").getSelector(0);if(!xpath&&!selector)throw new Error("Glaze: Binded element is not selected!");if(!this.canvas)throw new Error("Glaze: Canvas is not initialized!");if(!this.canvas.item||!this.canvas.item.length)throw new Error("Glaze: No shape found!");if(!$(selector).length){var variantSettings=this._getSettings();if(variantSettings.out_viewport_action_type==="glaze"&&variantSettings.out_viewport_action_glaze){this.smoothTransitionGlaze(variantSettings.out_viewport_action_glaze);return}}var element=$(selector)[0],shape=this.canvas.item(0),shapeOffset=this.model.get("variant").get("shapeOffset"),scaleOffset=this.model.get("variant").get("scaleOffset"),size=element.getBoundingClientRect(),position=$(element).offset(),top=position.top+(shapeOffset.top?shapeOffset.top:0),fixedPosition=!1,scrollingContainer=this.appData.get("website").scroll_container,outOfScrollingContainer=!!scrollingContainer;$(element).parents().each(function(){scrollingContainer&&$(this).is(scrollingContainer)&&(outOfScrollingContainer=!1),$(this).css("position")==="fixed"&&(fixedPosition=!0)}),outOfScrollingContainer&&(fixedPosition=!0),size.height=size.bottom-size.top;var scrollDiff=0;fixedPosition||(scrollDiff=this.autoscroll(top,!0)),this.transitionRunning=!0,this.transitionScrollTop=top,this.hideXIcon(),this.beforeShow(),this.applyAdditionalCss(),this.setActiveGlaze(this.model.get("id")),shape.animate({left:position.left+(shapeOffset.left?shapeOffset.left:0),top:top-scrollDiff,scaleX:size.width/shape.get("width")+(scaleOffset.scaleX?scaleOffset.scaleX:0),scaleY:size.height/shape.get("height")+(scaleOffset.scaleY?scaleOffset.scaleY:0)},{duration:1e3,easing:MiscUtils.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:_.bind(function(){this.transitionRunning=!1,this.renderElements(),this.afterShow(),this.updateXIconPosition(),this.showXIcon(),this.updateGlazePosition()},this)})},clickShape:function(e,t){t=t||{};if(this.transitionRunning){e.preventDefault(),this.autoscroll(this.transitionScrollTop,!0);return}if((!e.pageX||!e.pageY)&&!t.clickInVoid)return;var n=this.canvas&&this.canvas.item(0),r=this._getSettings(),i=$(e.target).hasClass("glaze-element")||$(e.target).parents(".glaze-element").length,s;if(!this.isShown)return;if(!r.roll_on){var o=n&&n.getBoundingRect()||{},u=!1;if(!t.clickInVoid)if(!n||!(e.pageX>o.left&&e.pageX<o.left+o.width)||!(e.pageY>o.top&&e.pageY<o.top+o.height)){!i&&this.isShapeVisible()&&(u=TrackingManager.checkEngagementConversion(this.model.get("id"),"glaze_layer")),(r.close_click_overlay||!r.close_click_void&&!r.close_click_x&&!r.close_timer&&!r.close_click_element)&&!i&&(Logger.log("Glaze: click overlay close"),this.hideGlaze(null,u)),r.deactivate_links&&e&&e.preventDefault(),r.close_click_element&&(r.click_element||r.click_element_selector)&&(s=$(r.click_element_selector)[0],s===e.target&&(Logger.log("Glaze: click close element"),this.hideGlaze(null,u)));return}if(r.close_click_element&&(r.click_element||r.click_element_selector)){s=$(r.click_element_selector)[0];if(s===e.target){Logger.log("Glaze: click close element"),this.hideGlaze(null,u);return}}u=TrackingManager.checkEngagementConversion(this.model.get("id"),"void"),r.close_click_void&&(r.close_click_void_url&&r.close_click_void_url.trim()!==""?(Logger.log("Glaze: click void redirect"),window.location.href=r.close_click_void_url):(Logger.log("Glaze: click void close"),this.hideGlaze(null,u)))}},clickCloseIcon:function(e){e&&e.preventDefault(),this.hideGlaze()},exitIntent:function(e){var t=this._getSettings();t.exit_intent&&!t.roll_on&&(this.isShown||this.showGlaze())},contentIntent:function(event){var settings=this._getSettings();if(settings.content_intent&&!this.contentIntentDone&&!settings.roll_on){var selector=settings.content_intent_selector;selector.match(/{DFIELD:[^}]+\}/)&&(selector=selector.replace(/{DFIELD:[^}]+\}/,this.get("page_template_selector_dynamic_field")));if(selector.match(/JS:(.*):ENDJS/))try{selector=selector.replace(/JS:.*:ENDJS/,eval(selector.match(/JS:(.*):ENDJS/)[1]))}catch(e){console.warn("Glaze: error evaluating content intent selector "+selector)}var element=$(selector)[0],eventX=event.clientX,eventY=event.clientY,elementposition=$(element).offset(),elementSize={width:$(element).outerWidth(),height:$(element).outerHeight()};if(elementposition&&eventX>=elementposition.left&&eventX<=elementposition.left+elementSize.width&&eventY>=elementposition.top-$(window).scrollTop()&&eventY<=elementposition.top-$(window).scrollTop()+elementSize.height){Logger.log("Glaze: show content intent"),this.showGlaze(),this.contentIntentDone=!0;if(!!md.phone()||!!md.tablet()){var redirectTimeout=settings.timer_mobile_intent_out||Settings.glazeMobileIntentTimeout,url=settings.url_mobile_intent;url&&setTimeout(function(){window.location.href=url},redirectTimeout)}}}},rollOn:function(e){var t=this,n=this._getSettings();if(n.roll_on&&n.roll_selector){var r=e.clientX,i=e.clientY,s=null,o;o=$(n.roll_selector),o.each(function(){var e=$(this).offset(),t={width:$(this).width(),height:$(this).height()};!s&&r>e.left&&r<e.left+t.width&&i>e.top-$(window).scrollTop()&&i<e.top-$(window).scrollTop()+t.height&&(s=$(this))}),s?(n.roll_encompass&&(this.rolledElement=s[0],this.updateGlazePosition()),this.isShown?this.$el.is(":visible")||(Logger.log("Glaze: show roll on"),this.$el.show(),_.each(this.elements,function(e){e.onGlazeShow()})):(Logger.log("Glaze: show roll on"),this.showGlaze())):this.isShown&&this.$el.is(":visible")&&(Logger.log("Glaze: show roll off"),this.$el.hide(),_.each(this.elements,function(e){e.onGlazeHide()}))}},trackClick:function(e){e=e||"VOID";if(!this.appData.isTrackingAllowed()||this.isClickTracked)return;this.isClickTracked=!0},areElementsVisible:function(){return _.some(this.elements,function(e){return e.isVisible()})},isShapeVisible:function(e){e=e||{};if(!this.canvas)return!1;var t=this._getSettings();if(t.trigger_out_viewport)return Logger.log("Glaze: allowed to trigger if shape is out of viewport"),!0;var n=this.model.get("variant").getSelector(0);return this.isBindedElementVisible(n,e)},isBindedElementVisible:function(e,t){t=t||{};var n=this._getSettings();if(e){var r=$(e),i=r[0],s=r.offset(),o=r.width(),u=r.height(),a=[],f=!1;if(!r.length)return!1;$(i).parents(':not("html,body")').each(function(){$(this).css("position")==="fixed"&&(f=!0);var e=!!~["hidden","auto"].indexOf($(this).css("overflow"));if(e){var t=!!~["absolute","fixed"].indexOf($(this).css("position")),n=$(this).offset(),r=$(this).width(),i=$(this).height(),l=t?i:i+n.top,c=t?r:r+n.left;(s.top<0||s.left<0||s.top<n.top||s.top>l||s.left>c||s.top+u>l||s.left+o>c)&&a.push($(this))}});if(n.check_parents_overflow&&a.length)return!1;if(f){var l=i.getBoundingClientRect(),c=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(l.bottom<0||l.top-c>=0)&&!(l.left<0)&&l.width!==0&&l.height!==0}}if(!i)return!0;var h=i.getBoundingClientRect(),p=$(window).scrollTop(),d=$(window).scrollLeft(),v=$(window).height(),m=$(window).width();return(n.trigger_out_partial||t.forcePartial)&&parseInt(h.top)<v&&parseInt(h.top)+parseInt(h.height)>0&&parseInt(h.left)<m&&parseInt(h.left)+parseInt(h.width)>0?!0:p+v>parseInt(h.height)+parseInt(h.top)&&parseInt(h.top)>=0&&d+m>parseInt(h.width)+parseInt(h.left)&&parseInt(h.left)>=0&&$(i).visible()?!0:!1},isElementCreated:function(){var e=this.model.get("variant").getSelector(0);if(!e)return!0;var t=this.rolledElement||$(e).get(0),n=$(t);return!!n.length},checkBindedElement:function(){this.isElementCreated()&&this.isReadyToShow&&(this.isShown||this.showGlaze())},checkVisibility:function(){var e=this._getSettings();this.trackImpression(),this.isShapeVisible()&&this.isReadyToShow&&(this.isShown?this.$el.hasClass("invisible")&&e.trigger_on_scroll&&(!e.trigger_on_scroll_times||Number(e.trigger_on_scroll_times)>this.triggeredOnScroll)&&(this.triggeredOnScroll++,this.$el.removeClass("invisible"),_.each(this.elements,function(e){e.onGlazeShow()})):this.showGlaze()),(!this.areElementsVisible()||!this.isShapeVisible({forcePartial:!0}))&&this.isShown&&!this.autoscrollStarted&&!this.$el.hasClass("invisible")&&(!e.trigger_on_scroll||e.trigger_on_scroll_times&&Number(e.trigger_on_scroll_times)===this.triggeredOnScroll?this.hideGlaze():(this.$el.addClass("invisible"),this.trackAbandon(),_.each(this.elements,function(e){e.onGlazeHide()}),this.isReadyToShow=!0))},trackImpression:function(){if(!this.appData.isTrackingAllowed()||this.isImpressionTracked||!this.isShown)return;if(this.isShapeVisible()){this.isImpressionTracked=!0;var e=Number(TrackingManager.getViewedGlazesNumber(this.model.get("campaign_id"))||0),t=this.abHasGlaze==1?"yes":"no";e++,TrackingManager.setViewedGlazesNumber(this.model.get("campaign_id"),e),$.ajax({type:"post",url:Settings.apiHost+Settings.api.trackingShow,data:{glaze_id:this.model.get("id"),glaze_variant_id:this.model.get("variant").get("id"),_glz_sid:this.appData.get("_glz_sid"),_glz_psid:this.appData.get("_glz_psid"),glz_shown:t,page_url_hash:this.appData.get("page_url_hash"),is_first:TrackingManager.isImpressed(this.model.get("id"))?0:1},success:_.bind(function(e){Logger.log("Glaze tracking: show"),TrackingManager.setWaitingConversion(this.model,t,this),TrackingManager.setImpression(this.model.get("id"),this.model.get("campaign_id"))},this)})}},trackAbandon:function(){if(!this.appData.isTrackingAllowed()||this.isAbandonTracked)return;Events.dispatch("glazeClosed",{glaze_id:this.model.get("id"),campaign_id:this.model.get("campaign_id"),campaign_title:this.model.get("campaign_title"),glaze_title:this.model.get("title")}),TrackingManager.setClosedCampaign(this.model.get("campaign_id")),$.ajax({type:"post",url:Settings.apiHost+Settings.api.trackingAbandon,data:{glaze_id:this.model.get("id"),_glz_psid:this.appData.get("_glz_psid")},success:_.bind(function(e){e&&e.status==="ok"&&(this.isAbandonTracked=!0,Logger.log("Glaze tracking: abandon"))},this)})},_getSettings:function(){var e=_.extend(_.clone(Settings.defaultGlazeSettings),JSON.parse(this.model.get("campaign_settings"))),t=_.clone(this.appData.extendSettings(e,this.model.get("variant").get("settings"))),n=this.model.get("variant").get("selectorVariant");return n&&n.settings&&(n.settings.deactivate_links&&(t.deactivate_links=n.settings.deactivate_links),n.settings.autoscroll_offset_active&&(t.autoscroll_offset=n.settings.autoscroll_offset),n.settings.css_rules_active&&(t.css_rules=n.settings.css_rules),n.settings.spotlight_areas_active&&(t.spotlight_areas=n.settings.spotlight_areas)),t.advanced_settings=(_.isEmpty(t.advanced_settings)?[]:t.advanced_settings).concat(_.isEmpty(e.advanced_settings)?[]:e.advanced_settings),t.z_index=t.z_index||this.appData.get("website").z_index,t.campaign_css_rules=e.css_rules,t},_setDeferredConditions:function(e){e=e||[],_.each(e,_.bind(function(e,t){e.code?this._setDeferredConditions(e.code):t&&!e.type?this._setDeferredConditions(e):e.type&&e.deferred&&this._setDeferredCondition(e)},this))},_setDeferredCondition:function(e){this.deferredConditions.push(e)},_startCheckingDeferredConditions:function(){this.deferredConditionsRunning=!0,_.each(this.deferredConditions,_.bind(function(e){ConditionChecker.checkDeferredCondition(e,this)},this))},_releaseDeferredCondition:function(e){Logger.log("Glaze: deferred condition completed - "+e.type),this.deferredConditions=_.without(this.deferredConditions,e),this.showGlaze()},remove:function(){this.parent.glazeViews.splice(this.parent.glazeViews.indexOf(this),1),Backbone.View.prototype.remove.apply(this,arguments)}})}),define("text!view/MainView.html",[],function(){return'<% if(data.appData.get(\'is_free\')) { %>\r\n    <a href="<%= data.Settings.apiHost %>" class="branding" target="_blank"></a>\r\n<% } %>\r\n<button class="glaze-restart" data-content="Show again" aria-hidden="true"></button>\r\n'}),define("view/MainView",["require","jquery","underscore","utils/Logger","utils/Events","backbone","view/GlazeView","utils/ConditionChecker","utils/TrackingManager","text!view/MainView.html","Settings","mobiledetect","utils/MiscUtils","uri","utils/FontLoader","AppModel"],function(require){var $=require("jquery"),_=require("underscore"),Logger=require("utils/Logger"),Events=require("utils/Events"),Backbone=require("backbone"),GlazeView=require("view/GlazeView"),ConditionChecker=require("utils/ConditionChecker"),TrackingManager=require("utils/TrackingManager"),template=require("text!view/MainView.html"),Settings=require("Settings"),mobiledetect=require("mobiledetect"),MiscUtils=require("utils/MiscUtils"),md=new mobiledetect(window.navigator.userAgent),URI=require("uri"),FontLoader=require("utils/FontLoader");return Backbone.View.extend({appData:null,className:"glaze-view glaze-exclude",glazeViews:[],docHeight:null,docWidth:null,lastGlaze:null,observer:null,campaignSplitTraffic:{},availableGlazes:[],randomSeedTraffic:null,randomSeedAB:null,abHasGlaze:null,restartingGlaze:null,activeGlaze:null,checkVisibilityTimeout:null,attributes:{},events:{"click .glaze-restart":"openLastGlaze","keydown .glaze-restart":"keydownRestart",keydown:"handleTab"},initialize:function(){this.appData=require("AppModel"),this.Settings=Settings,this.randomSeedTraffic=Math.random(),this.randomSeedAB=Math.random(),Logger.log("Glaze: random seed for split traffic = "+this.randomSeedTraffic),Logger.log("Glaze: random seed for A/B testing = "+this.randomSeedAB),Backbone.View.prototype.initialize.apply(this,arguments),$("body").on("mouseout",_.bind(this.mouseOut,this)),$("body").on("mousemove",_.bind(this.mouseOver,this)),$("body").on("keyup",_.bind(this.keyUp,this)),window.addEventListener("scroll",_.bind(this.scrollOrResize,this),!0),$(window).on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",_.bind(this.onTransition,this)),$(document).on("mouseleave",_.bind(this.exitIntent,this));if(!md.tablet()&&!md.phone())window.addEventListener("click",_.bind(this.clickShape,this),!0);else{window.addEventListener("click",_.bind(this.clickShape,this),!0);var e=window.navigator.userAgent,t=e.match(/iP(ad|hone)/i),n=e.match(/WebKit/i);t&&n&&!e.match(/CriOS/i)&&(document.body.style.cursor="pointer")}this.setClearCommand(),this.initPreviewPreloader()},render:function(){return this.$el.html(_.template(template)({data:this})),this.afterRender(),this},afterRender:function(){if(this.appData.get("website")&&this.appData.get("website").excluded){Logger.log("Glaze: you are excluded from this website Glaze visitors. Clear cookies to get back.");return}var e=this.selectGlaze();e&&e.length?(this.$el.css({display:"block"}),this.renderGlaze(e)):this.$el.css({display:"none"})},renderGlaze:function(e,t,n){t=t||!1,n=n||!1,this.glazeViews.length&&!n&&_.each(this.glazeViews,function(e){e&&e.remove()}),e=_.filter(e,function(e){return!!e});var r=_.all(e,_.bind(function(e){var t=this.preSelectGlazeVariant(e),n=t&&JSON.parse(t.settings);return n&&n.roll_on},this));_.each(e,_.bind(function(e,n){if(r||n===0||this.appData.get("website").account.can_have_multiple_campaigns&&!this.appData.get("previewGlaze")){this.abHasGlaze===null&&(this.abHasGlaze=TrackingManager.getAB(e.campaign_id)||-1,this.abHasGlaze!=-1&&Logger.log("Glaze: A/B testing, saved A/B version - "+(this.abHasGlaze==1?"with glaze":"without glaze")));if(e.forceRestart&&!t){Logger.log("Glaze: restart from",e);var i=new Backbone.Model(e),s=this.preSelectGlazeVariant(e),o=JSON.parse(s.json);o.settings=s.settings?JSON.parse(s.settings):{};var u=new Backbone.Model(o);i.set("variant",u),this.onCloseGlaze(i)}else{Logger.log("Glaze: rendering",e),Events.dispatch("glazeSelected",{glaze_id:e.id,campaign_id:e.campaign_id,campaign_title:e.campaign_title,glaze_title:e.title});var a=new GlazeView({model:new Backbone.Model(e),parent:this});a.render().$el.appendTo(this.$el),a.applySettings(t),this.glazeViews.push(a)}}},this)),window.glaze.API("setActiveGlazes",this.glazeViews)},renderAllAvailableGlazes:function(e){if(this.renderedAllAvailableGlazes)return;this.renderedAllAvailableGlazes=!0,_.each(this.availableGlazes,_.bind(function(t){e!=t.id&&this.renderGlaze([t],!1,!0)},this))},updateDimensions:function(){if(this.$el.css("position")=="absolute"){if($(document).height()!=this.docHeight||this.$(".glaze-layer").height()!=this.docHeight)this.docHeight=$(document).height(),this.$(".glaze-layer").css("height",0),this.$(".glaze-layer").css("height",this.docHeight);this.$(".glaze-layer").width()!=this.docWidth&&(this.docWidth=this.$(".glaze-layer").width()),_.each(this.glazeViews,_.bind(function(e){e&&(e.updateGlazeDimensions(this.$(".glaze-layer").width(),this.$(".glaze-layer").height()),e.updateGlazePosition())},this))}},selectGlaze:function(){if(!this.appData.get("glazes")||!this.appData.get("glazes").length)return!1;_.each(this.appData.get("glazes"),_.bind(function(e){this.appData.get("previewGlaze")&&e.hash===this.appData.get("previewGlaze")&&(e.preview=!0,MiscUtils.sessionStorage().setItem("preview_campaign",e.campaign_id))},this));var e=this.appData.getSortedGlazes(TrackingManager.getLastSeenCampaignId());return e=_.filter(e,_.bind(function(e){var t=this.preSelectGlazeVariant(e),n=JSON.parse(e.campaign_settings||"{}"),r=t&&JSON.parse(t.settings||"{}")||{};e.forceRestart=!1,r=this.appData.extendSettings(n,r);if(!r.advanced_settings||JSON.stringify(r.advanced_settings)==="{}")r.advanced_settings=[];t&&t.conditions&&t.conditions.length&&(r.advanced_settings=r.advanced_settings.concat(t.conditions)),r.restart_appearance=="every"&&TrackingManager.isCampaignClosed(e.campaign_id)&&(Logger.log("Glaze: glaze "+e.title+" force restart enabled"),e.forceRestart=!0);if(t&&t.out_of_capping)return Logger.log("Glaze: glaze "+e.title+" reached frequency capping limit, skipping"),!1;if(!this.passAdditionalSettings(r.advanced_settings)||!this.passAdditionalSettings(n.advanced_settings)||!this.passAdditionalSettings(this.appData.get("website").audiences)||!this.passCampaignSettings(e))return Logger.log("Glaze: glaze "+e.title+" did not pass conditions, skipping"),!1;if(e.preview)return Logger.log("Glaze: glaze "+e.title+" preview"),this.availableGlazes.push(e),!0;if(e.previewByCampaign)return Logger.log("Glaze: glaze "+e.title+" preview by campaign"),this.availableGlazes.push(e),!0;this.availableGlazes.push(e);if(TrackingManager.isConverted(e.id,e.conversion_round)&&this.abHasGlaze!=0){Logger.log("Glaze: glaze "+e.title+" is already converted, skipping");if(!e.forceRestart)return!1}if(TrackingManager.getLastSeenCampaignId()!=e.campaign_id){if(!this.checkSplitTraffic(e,n,this.randomSeedTraffic))return Logger.log("Glaze: glaze "+e.title+" skipped due to campaign split traffic"),!1}else Logger.log("Glaze: glaze "+e.title+" applied because of continuous campaign view");return!0},this)),e},checkSplitTraffic:function(e,t,n){if(!t.split_traffic)return!0;var r=[0,parseInt(t.split_traffic)/100];return this.campaignSplitTraffic[e.campaign_id]?r=this.campaignSplitTraffic[e.campaign_id]:(_.each(this.campaignSplitTraffic,function(e,t){r[0]+=e[1]-e[0],r[1]+=e[1]-e[0]}),this.campaignSplitTraffic[e.campaign_id]=r),n>=r[0]&&n<r[1]},preSelectGlazeVariant:function(e){var t=_.sortBy(e.variants,function(e){return!e.screen_size.max||e.screen_size.max==0?1e6:Number(e.screen_size.max)}),n=_.sortBy(e.variants,function(e){return e.screen_size.min}),r=_.find(e.variants,function(e){return e.screen_size.is_default==1||!e.screen_size.max||e.screen_size.max==0}),i=$(window).width(),s;return s=_.find(t,function(e){var t=e.screen_size.max&&e.screen_size.max!=0?e.screen_size.max:1e6;return Number(t)>=i}),s||(e.campaign_is_mobile_first==1&&n&&n.length?s=n[0]:s=r),!s&&n&&n.length&&(s=n[0]),s},openGlazeById:function(e,t){t=t||!1;var n=_.find(this.appData.get("glazes"),function(t){return t.id==parseInt(e,10)});if(!t){var r=this.preSelectGlazeVariant(n),i=JSON.parse(n.campaign_settings),s=r&&JSON.parse(r.settings||"{}")||{};if(!s.advanced_settings||JSON.stringify(s.advanced_settings)==="{}")s.advanced_settings=[];s=this.appData.extendSettings(i,s),r&&r.conditions&&r.conditions.length&&(s.advanced_settings=s.advanced_settings.concat(r.conditions));if(!this.passAdditionalSettings(s.advanced_settings)||!this.passCampaignSettings(n))return Logger.log("Glaze: glaze "+n.title+" did not pass conditions, skipping"),!1}this.renderGlaze([n],t),this.docHeight=null,this.updateDimensions()},passCampaignSettings:function(e){var t=JSON.parse(e.campaign_settings)||{};if(t.max_glazes){var n=parseInt(t.max_glazes),r=Number(TrackingManager.getViewedGlazesNumber(this.model.get("campaign_id"))||0);if(r>=n)return!1}return t.freq_capping_cmp&&t.freq_capping_cmp_times&&TrackingManager.getImpressionsNumber(e.id)>=parseInt(t.freq_capping_cmp_times)?(Logger.log("Glaze: glaze "+e.title+" did not pass campaign level frequency capping, skipping"),!1):!0},passAdditionalSettings:function(e){if(!e)return!0;var t=_.all(e,_.bind(this.passConditionGroup,this));return t},passConditionGroup:function(e){(e.products||e.value)&&_.each(e.code,function(t,n){n&&_.each(t,function(t,n){n&&(e.products&&t.type==="custom-js"&&t.name.match("{PRODUCT")&&(t.products={products:e.products,categories:e.categories}),e.value&&t.type==="ad"&&(t.value=e.value))})});var t=_.all(e.code,_.bind(this.passConditionSubGroup,this));return t=e.action&&Number(e.action)===1?t:!t,t||Logger.log("Glaze: glaze did not pass condition "+e.title),t},passConditionSubGroup:function(e,t){if(!t)return!0;var n=_.some(e,_.bind(this.passCondition,this));return n},passCondition:function(e,t){return t?ConditionChecker.checkCondition(e):!1},exitIntent:function(e){if(!this.glazeViews.length)return;_.each(this.glazeViews,function(t){t&&t.exitIntent(e)})},mouseOut:function(e){if(!this.glazeViews.length)return;_.each(this.glazeViews,function(t){t&&t.rollOn(e)})},mouseOver:function(e){if(!this.glazeViews.length)return;_.each(this.glazeViews,function(t){t&&(t.contentIntent(e),t.rollOn(e))})},clickShape:function(e){TrackingManager.checkClickElement(e);var t=[];_.each(this.glazeViews,function(n){n&&(n.clickShape(e),t.push(n.model.get("id")))}),TrackingManager.checkVoidVTC(t,e)},onTransition:function(e){_.each(this.glazeViews,function(e){e&&(e.updateGlazePosition(),e.checkVisibility())})},scrollOrResize:function(e){this.checkVisibilityTimeout&&(clearTimeout(this.checkVisibilityTimeout),this.checkVisibilityTimeout=null),this.checkVisibilityTimeout=setTimeout(_.bind(function(){_.each(this.glazeViews,function(e){e&&e.checkVisibility()})},this),50)},keyUp:function(e){e.keyCode===27&&_.each(this.glazeViews,function(e){e&&e.hideGlaze()});if(e.keyCode===9&&this.glazeViews.length&&!$(e.target).parents(".glaze-view").length){var t=this.glazeViews[0].$("button, [href], input, select, textarea").filter(":visible");!e.shiftKey&&t.length?t.first().focus():e.shiftKey&&t.length&&t.last().focus()}},onCloseGlaze:function(model,converted){converted=converted||!1,this.lastGlaze=model;var settings=this.appData.extendSettings(JSON.parse(this.lastGlaze.get("campaign_settings")),this.lastGlaze.get("variant").get("settings")),$restart=this.$(".glaze-restart"),glazeView=_.find(this.glazeViews,_.bind(function(e){return e&&e.model.get("id")==this.lastGlaze.get("id")},this));if(glazeView){var abHasGlaze=glazeView.abHasGlaze;this.glazeViews.splice(this.glazeViews.indexOf(glazeView),1)}settings.restart_appearance&&settings.restart_appearance==="every"&&this.lastGlaze&&TrackingManager.setRestartCampaign(this.lastGlaze.get("campaign_id"));if(settings&&settings.restart){settings.restart_image&&$restart.css("backgroundImage","url("+settings.restart_image+")"),setTimeout(function(){$restart.html(settings.restart_text).show().attr("aria-hidden",!1).focus()},0),settings.restart_text_color&&$restart.css("color",settings.restart_text_color),settings.restart_tab_color&&$restart.css("background",settings.restart_tab_color);if(settings.restart_position&&settings.restart_position!=="default")switch(settings.restart_position){case"bl":$restart.css({top:"auto",bottom:0,left:0,right:"auto"});break;case"tl":$restart.css({top:0,bottom:"auto",left:0,right:"auto"});break;case"tr":$restart.css({top:0,bottom:"auto",left:"auto",right:0})}settings.restart_text_font&&(_.isObject(settings.restart_text_font)?$restart.css({fontFamily:settings.restart_text_font.family}):$restart.css("fontFamily",settings.restart_text_font),settings.restart_text_font.customId?FontLoader.loadCustomFont(settings.restart_text_font.customId):FontLoader.loadFonts([settings.restart_text_font.family])),settings.restart_text_size&&$restart.css("fontSize",settings.restart_text_size+"px")}if(glazeView){if(settings.close_action_type&&(!settings.close_action_condition||settings.close_action_condition==="not_convert"&&!converted||settings.close_action_condition==="convert"&&converted))if(settings.close_action_type==="url")if(settings.close_action_url_blank){var win=window.open(settings.close_action_url,"_blank");win.focus()}else window.location.href=settings.close_action_url;else if(settings.close_action_type==="glaze")this.openGlazeById(settings.close_action_glaze,settings.close_action_glaze_conditions!=="yes");else if(settings.close_action_type==="campaign"){var glazes=_.filter(this.appData.get("glazes"),function(e){return e.campaign_id==settings.close_action_campaign});glazes=_.sortBy(glazes,_.bind(function(e){return parseInt(e.priority)},this)),glazes&&glazes.length&&this.openGlazeById(glazes[0].id,!1)}settings.close_action_js&&(Logger.log("Glaze: execute close javascript action"),eval(settings.close_action_js));var singleTagAction=settings.universal_action_js;if(singleTagAction){singleTagAction=MiscUtils.prepareActionCode(singleTagAction,"GLAZE_CLOSE",model.get("id"),model.get("title"),model.get("campaign_id"),model.get("campaign_title"),abHasGlaze),Logger.log("Glaze: execute single tag action on glaze close "+singleTagAction);try{eval(singleTagAction)}catch(err){console.warn("Error in Single Tag Action on Glaze Close"),console.warn(err)}}}},keydownRestart:function(e){if(e.keyCode===13||e.keyCode===32)e.preventDefault(),this.openLastGlaze()},openLastGlaze:function(){if(this.lastGlaze){var e=this.appData.extendSettings(JSON.parse(this.lastGlaze.get("campaign_settings")),this.lastGlaze.get("variant").get("settings"));if(e.restart_behavior==="start"){var t=_.filter(this.appData.get("glazes"),_.bind(function(e){return e.campaign_id==this.lastGlaze.get("campaign_id")},this));t=_.sortBy(t,_.bind(function(e){return parseInt(e.priority)},this)),t&&t.length&&(this.restartingGlaze=t[0].id,this.trackRestart(t[0].id),this.openGlazeById(t[0].id,!0))}else this.restartingGlaze=this.lastGlaze.get("id"),this.trackRestart(this.lastGlaze.get("id")),this.openGlazeById(this.lastGlaze.get("id"),!0);this.hideRestart()}},hideRestart:function(){var e=this.$(".glaze-restart");e.hide().attr("aria-hidden",!0)},trackRestart:function(e){if(!this.appData.isTrackingAllowed())return;$.ajax({type:"post",url:Settings.apiHost+Settings.api.trackingRestart,data:{glaze_id:e,_glz_psid:this.appData.get("_glz_psid")},success:function(e){Logger.log("Glaze tracking: restart")}})},initPreviewPreloader:function(){var e=$(document).find(".glaze-preview-preloader");e.length&&(e.html("Glaze: ready. Click to stop preview"),e.on("click",function(e){e&&e.preventDefault(),MiscUtils.sessionStorage().removeItem("preview_glaze"),MiscUtils.sessionStorage().removeItem("preview_campaign");var t=new URI(window.location.href);t.deleteQueryParam("preview_glaze"),t.deleteQueryParam("last_account"),t.deleteQueryParam("last_url"),window.location.assign(t.toString())}))},setClearCommand:function(){window.glazeResetUserPE=this.clearStorage},clearStorage:function(){if(confirm("Are you sure you want to clear cookies and storage variables?")){var e=document.cookie.split(";");_.each(e,function(e){MiscUtils.eraseCookieFromAllPaths(e)}),MiscUtils.sessionStorage().clear(),MiscUtils.localStorage().clear(),window._glazePT=!0}},handleTab:function(e){var t=e.keyCode,n=e.shiftKey,r=$(e.target),i=this.$("button, [href], input, select, textarea").filter(":visible"),s=this.$(".glaze-restart");this.glazeViews.length?t===9&&!n&&i.last().is(r)?(e.preventDefault(),i.first().focus()):t===9&&n&&(i.first().is(r)||r.is(this.$el)||r.parent().is(this.$el))&&(e.preventDefault(),i.last().focus()):s.is(r)}})}),define("App",["require","jquery","underscore","view/MainView","utils/TrackingManager","utils/Logger","utils/Events","utils/MiscUtils","Settings","uri"],function(e){var t=e("jquery"),n=e("underscore"),r=e("view/MainView"),i=e("utils/TrackingManager"),s=e("utils/Logger"),o=e("utils/Events"),u=e("utils/MiscUtils"),a=e("Settings"),f=e("uri");return{initialData:null,slug:null,hash:null,mainView:null,start:function(e){o.dispatch("glazeInitialized"),this.initialData=e.initialData,i.trackPage(),this.mainView=new r,this.mainView.render().$el.appendTo("body"),this.mainView.updateDimensions(),t(window).on("resize",n.bind(this.mainView.updateDimensions,this.mainView)),t(window).on("resize",n.bind(this.mainView.scrollOrResize,this.mainView));var s=new f(window.location.href);s.deleteQueryParam("preview_glaze"),s.deleteQueryParam("last_account"),s.deleteQueryParam("last_url"),this.slug=s.path()+s.query(),this.hash=window.location.hash,setInterval(n.bind(this.restart,this),300)},restart:function(e){var r=new f(window.location.href);r.deleteQueryParam("preview_glaze"),r.deleteQueryParam("last_account"),r.deleteQueryParam("last_url");var s={origin:r.protocol()+"://"+r.host(),slug:r.path()+r.query(),query:r.query(),accountId:a.accountId,hash:window.location.hash};if(s.slug===this.slug&&s.hash===this.hash)return;this.slug=s.slug,this.hash=s.hash,i.trackPage(),i.checkPageConversion();var o=u.getParameterByName("preview_glaze")||u.sessionStorage().getItem("preview_glaze");o&&(u.sessionStorage().setItem("preview_glaze",o),s.preview=1),s._glz_sid=u.localStorage().getItem("_glz_sid")||"",s._glz_ssid=u.sessionStorage().getItem("_glz_ssid")||"",t.ajax({type:"get",url:a.apiHost+a.api.clientData,data:s,success:n.bind(function(e){this.initialData.set(e.result),this.mainView.afterRender(),this.mainView.updateDimensions(),this.mainView.hideRestart()},this)})}}}),define("AppInstance",["require","App"],function(e){var t=e("App");return t}),define("domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),require.config({urlArgs:"v="+(new Date).getTime(),paths:{jquery:"../lib/jquery-3.5.1.min",jqueryprivate:"utils/jquery-private",underscore:"../../../bower_components/underscore/underscore",underscoreprivate:"utils/underscore-private",backbone:"../../../bower_components/backbone/backbone",text:"../../../bower_components/requirejs-text/text",domReady:"../../../bower_components/domReady/domReady",marionette:"../../../bower_components/marionette/lib/backbone.marionette",cookie:"../../../bower_components/js-cookie/src/js.cookie",mobiledetect:"../../../bower_components/mobile-detect/mobile-detect",webfontloader:"../../../bower_components/webfontloader/webfontloader",uri:"../../../bower_components/jsUri/Uri",jqueryUI:"utils/jquery-ui.min",fabric:"utils/fabric",tocca:"utils/Tocca",jqueryVisible:"utils/jquery.visible"},map:{"*":{jquery:"jqueryprivate",underscore:"underscoreprivate"},jqueryprivate:{jquery:"jquery"},underscoreprivate:{underscore:"underscore"}},shim:{underscore:{exports:"_"},backbone:{deps:["underscore","jquery"],exports:"Backbone"},marionette:{deps:["jquery","underscore","backbone"],exports:"Marionette"},jqueryUI:{deps:["jquery"]}}}),require(["Setup","AppInstance","domReady"],function(e,t){e(function(e){t.start({initialData:e})})}),define("index",function(){});try{w.define=w.glzOldDefine,delete w.glzOldDefine}catch(er){}})(window);